<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Logistic Regression Model and Credit Scorecard | LendingClub Loans Pricing</title>
  <meta name="description" content="HarvardX - PH125.9x Data Science Capstone" />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Logistic Regression Model and Credit Scorecard | LendingClub Loans Pricing" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="HarvardX - PH125.9x Data Science Capstone" />
  <meta name="github-repo" content="Emmanuel_R8/HarvardX-LendingClub" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Logistic Regression Model and Credit Scorecard | LendingClub Loans Pricing" />
  
  <meta name="twitter:description" content="HarvardX - PH125.9x Data Science Capstone" />
  

<meta name="author" content="Emmanuel Rialland - https://github.com/Emmanuel_R8" />


<meta name="date" content="2019-12-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="dataset.html"/>
<link rel="next" href="conclusion.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./introduction.html" target="blank>LendingClub Loans Pricing</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="internal-rate-of-return-credit-margins-and-net-present-values.html"><a href="internal-rate-of-return-credit-margins-and-net-present-values.html"><i class="fa fa-check"></i><b>1</b> Internal Rate of Return, Credit Margins and Net Present Values</a><ul>
<li class="chapter" data-level="1.1" data-path="internal-rate-of-return-credit-margins-and-net-present-values.html"><a href="internal-rate-of-return-credit-margins-and-net-present-values.html#important-warning"><i class="fa fa-check"></i><b>1.1</b> Important warning</a></li>
<li class="chapter" data-level="1.2" data-path="internal-rate-of-return-credit-margins-and-net-present-values.html"><a href="internal-rate-of-return-credit-margins-and-net-present-values.html#background"><i class="fa fa-check"></i><b>1.2</b> Background</a></li>
<li class="chapter" data-level="1.3" data-path="internal-rate-of-return-credit-margins-and-net-present-values.html"><a href="internal-rate-of-return-credit-margins-and-net-present-values.html#internal-rate-of-return"><i class="fa fa-check"></i><b>1.3</b> Internal Rate of Return</a></li>
<li class="chapter" data-level="1.4" data-path="internal-rate-of-return-credit-margins-and-net-present-values.html"><a href="internal-rate-of-return-credit-margins-and-net-present-values.html#dataset-calculation"><i class="fa fa-check"></i><b>1.4</b> Dataset calculation</a><ul>
<li class="chapter" data-level="1.4.1" data-path="internal-rate-of-return-credit-margins-and-net-present-values.html"><a href="internal-rate-of-return-credit-margins-and-net-present-values.html#irr"><i class="fa fa-check"></i><b>1.4.1</b> IRR</a></li>
<li class="chapter" data-level="1.4.2" data-path="internal-rate-of-return-credit-margins-and-net-present-values.html"><a href="internal-rate-of-return-credit-margins-and-net-present-values.html#credit-margins"><i class="fa fa-check"></i><b>1.4.2</b> Credit Margins</a></li>
<li class="chapter" data-level="1.4.3" data-path="internal-rate-of-return-credit-margins-and-net-present-values.html"><a href="internal-rate-of-return-credit-margins-and-net-present-values.html#npv"><i class="fa fa-check"></i><b>1.4.3</b> NPV</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="dataset.html"><a href="dataset.html"><i class="fa fa-check"></i><b>2</b> Dataset</a><ul>
<li class="chapter" data-level="2.1" data-path="dataset.html"><a href="dataset.html#preamble"><i class="fa fa-check"></i><b>2.1</b> Preamble</a></li>
<li class="chapter" data-level="2.2" data-path="dataset.html"><a href="dataset.html#general-presentation"><i class="fa fa-check"></i><b>2.2</b> General presentation</a><ul>
<li class="chapter" data-level="2.2.1" data-path="dataset.html"><a href="dataset.html#business-volume"><i class="fa fa-check"></i><b>2.2.1</b> Business volume</a></li>
<li class="chapter" data-level="2.2.2" data-path="dataset.html"><a href="dataset.html#loan-lifecyle-and-status"><i class="fa fa-check"></i><b>2.2.2</b> Loan lifecyle and status</a></li>
<li class="chapter" data-level="2.2.3" data-path="dataset.html"><a href="dataset.html#loan-application"><i class="fa fa-check"></i><b>2.2.3</b> Loan application</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="dataset.html"><a href="dataset.html#rates"><i class="fa fa-check"></i><b>2.3</b> Rates</a><ul>
<li class="chapter" data-level="2.3.1" data-path="dataset.html"><a href="dataset.html#irr-and-required-credit-margins"><i class="fa fa-check"></i><b>2.3.1</b> IRR and required credit margins</a></li>
<li class="chapter" data-level="2.3.2" data-path="dataset.html"><a href="dataset.html#dataset-1"><i class="fa fa-check"></i><b>2.3.2</b> Dataset</a></li>
<li class="chapter" data-level="2.3.3" data-path="dataset.html"><a href="dataset.html#interest-rates"><i class="fa fa-check"></i><b>2.3.3</b> Interest rates</a></li>
<li class="chapter" data-level="2.3.4" data-path="dataset.html"><a href="dataset.html#purpose"><i class="fa fa-check"></i><b>2.3.4</b> Purpose</a></li>
<li class="chapter" data-level="2.3.5" data-path="dataset.html"><a href="dataset.html#payments"><i class="fa fa-check"></i><b>2.3.5</b> Payments</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="dataset.html"><a href="dataset.html#net-present-value"><i class="fa fa-check"></i><b>2.4</b> Net present value</a><ul>
<li class="chapter" data-level="2.4.1" data-path="dataset.html"><a href="dataset.html#average-npv-and-credit-margin-by-subgrade"><i class="fa fa-check"></i><b>2.4.1</b> Average NPV and credit margin by subgrade</a></li>
<li class="chapter" data-level="2.4.2" data-path="dataset.html"><a href="dataset.html#principal-losses"><i class="fa fa-check"></i><b>2.4.2</b> Principal losses</a></li>
<li class="chapter" data-level="2.4.3" data-path="dataset.html"><a href="dataset.html#distribution-of-principal-losses-by-rating"><i class="fa fa-check"></i><b>2.4.3</b> Distribution of principal losses by rating</a></li>
<li class="chapter" data-level="2.4.4" data-path="dataset.html"><a href="dataset.html#npv-distribution-by-rating"><i class="fa fa-check"></i><b>2.4.4</b> NPV distribution by rating</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="dataset.html"><a href="dataset.html#variables"><i class="fa fa-check"></i><b>2.5</b> Variables</a><ul>
<li class="chapter" data-level="2.5.1" data-path="dataset.html"><a href="dataset.html#identification"><i class="fa fa-check"></i><b>2.5.1</b> Identification</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="dataset.html"><a href="dataset.html#loan-decision"><i class="fa fa-check"></i><b>2.6</b> Loan decision</a></li>
<li class="chapter" data-level="2.7" data-path="dataset.html"><a href="dataset.html#payment-related-information"><i class="fa fa-check"></i><b>2.7</b> Payment-related information</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html"><i class="fa fa-check"></i><b>3</b> Logistic Regression Model and Credit Scorecard</a><ul>
<li class="chapter" data-level="3.1" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a><ul>
<li class="chapter" data-level="3.1.1" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#split"><i class="fa fa-check"></i><b>3.1.1</b> Split</a></li>
<li class="chapter" data-level="3.1.2" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#the-modeling-task"><i class="fa fa-check"></i><b>3.1.2</b> The modeling task</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#logistic-regression"><i class="fa fa-check"></i><b>3.2</b> Logistic Regression</a><ul>
<li class="chapter" data-level="3.2.1" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#data-preparation"><i class="fa fa-check"></i><b>3.2.1</b> Data preparation</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#binning-and-weight-of-evidence"><i class="fa fa-check"></i><b>3.3</b> Binning and Weight of Evidence</a><ul>
<li class="chapter" data-level="3.3.1" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#loop-through-all-variables"><i class="fa fa-check"></i><b>3.3.1</b> Loop through all variables</a></li>
<li class="chapter" data-level="3.3.2" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#select-relevant-variables"><i class="fa fa-check"></i><b>3.3.2</b> Select relevant variables</a></li>
<li class="chapter" data-level="3.3.3" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#create-data-table-with-only-binary-variables-transform-every-bin-to-a-01-value"><i class="fa fa-check"></i><b>3.3.3</b> Create data table with only binary variables (transform every bin to a 0/1 value)</a></li>
<li class="chapter" data-level="3.3.4" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#comparison-of-individual-characteristics"><i class="fa fa-check"></i><b>3.3.4</b> Comparison of individual characteristics</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#logistic-regression-1"><i class="fa fa-check"></i><b>3.4</b> Logistic Regression</a><ul>
<li class="chapter" data-level="3.4.1" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#logistic-regression-using-the-speedglm-package"><i class="fa fa-check"></i><b>3.4.1</b> Logistic regression using the <code>SpeedGLM</code> package</a></li>
<li class="chapter" data-level="3.4.2" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#remove-identical-bins"><i class="fa fa-check"></i><b>3.4.2</b> Remove identical bins</a></li>
<li class="chapter" data-level="3.4.3" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#first-training-on-variables-previously-selected-on-their-information-value"><i class="fa fa-check"></i><b>3.4.3</b> First training on variables previously selected on their Information Value</a></li>
<li class="chapter" data-level="3.4.4" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#second-training"><i class="fa fa-check"></i><b>3.4.4</b> Second training</a></li>
<li class="chapter" data-level="3.4.5" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#third-training"><i class="fa fa-check"></i><b>3.4.5</b> Third training</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#model-result"><i class="fa fa-check"></i><b>3.5</b> Model result</a><ul>
<li class="chapter" data-level="3.5.1" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#final-list-of-variables"><i class="fa fa-check"></i><b>3.5.1</b> Final list of variables</a></li>
<li class="chapter" data-level="3.5.2" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#scoring"><i class="fa fa-check"></i><b>3.5.2</b> Scoring</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#training-set"><i class="fa fa-check"></i><b>3.6</b> Training set</a><ul>
<li class="chapter" data-level="3.6.1" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#histogram-of-the-scores"><i class="fa fa-check"></i><b>3.6.1</b> Histogram of the scores</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#test-set"><i class="fa fa-check"></i><b>3.7</b> Test set</a></li>
<li class="chapter" data-level="3.8" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#correlation-matrix"><i class="fa fa-check"></i><b>3.8</b> Correlation matrix</a></li>
<li class="chapter" data-level="3.9" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#roc-curve"><i class="fa fa-check"></i><b>3.9</b> ROC Curve</a></li>
<li class="chapter" data-level="3.10" data-path="logistic-regression-model-and-credit-scorecard.html"><a href="logistic-regression-model-and-credit-scorecard.html#bin-test-set-by-prediction"><i class="fa fa-check"></i><b>3.10</b> Bin test set by prediction</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>4</b> Conclusion</a></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i>Appendix</a><ul>
<li class="chapter" data-level="4.1" data-path="appendix.html"><a href="appendix.html#list-assumptions"><i class="fa fa-check"></i><b>4.1</b> List of assumptions / limitations regarding the dataset</a></li>
<li class="chapter" data-level="4.2" data-path="appendix.html"><a href="appendix.html#data-preparation-and-formatting"><i class="fa fa-check"></i><b>4.2</b> Data preparation and formatting</a><ul>
<li class="chapter" data-level="4.2.1" data-path="appendix.html"><a href="appendix.html#lendinclub-dataset"><i class="fa fa-check"></i><b>4.2.1</b> LendinClub dataset</a></li>
<li class="chapter" data-level="4.2.2" data-path="appendix.html"><a href="appendix.html#zip-codes-and-fips-codes"><i class="fa fa-check"></i><b>4.2.2</b> Zip codes and FIPS codes</a></li>
<li class="chapter" data-level="4.2.3" data-path="appendix.html"><a href="appendix.html#market-interest-rates"><i class="fa fa-check"></i><b>4.2.3</b> Market interest rates</a></li>
<li class="chapter" data-level="4.2.4" data-path="appendix.html"><a href="appendix.html#macro-economical-data"><i class="fa fa-check"></i><b>4.2.4</b> Macro-economical data</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="appendix.html"><a href="appendix.html#list-of-variables"><i class="fa fa-check"></i><b>4.3</b> List of variables</a></li>
<li class="chapter" data-level="4.4" data-path="appendix.html"><a href="appendix.html#calculations-of-the-internal-rate-of-returns-and-month-to-default"><i class="fa fa-check"></i><b>4.4</b> Calculations of the internal rate of returns and month-to-default</a><ul>
<li class="chapter" data-level="4.4.1" data-path="appendix.html"><a href="appendix.html#r-code"><i class="fa fa-check"></i><b>4.4.1</b> R code</a></li>
<li class="chapter" data-level="4.4.2" data-path="appendix.html"><a href="appendix.html#julia-code"><i class="fa fa-check"></i><b>4.4.2</b> Julia code</a></li>
<li class="chapter" data-level="4.4.3" data-path="appendix.html"><a href="appendix.html#maxima-derivation-of-the-cost-function"><i class="fa fa-check"></i><b>4.4.3</b> Maxima derivation of the cost function</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="appendix.html"><a href="appendix.html#system-version"><i class="fa fa-check"></i><b>4.5</b> System version</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org/" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">LendingClub Loans Pricing</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="logistic-regression-model-and-credit-scorecard" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Logistic Regression Model and Credit Scorecard</h1>
<p></p>
<p></p>
<p>At the outset, the dataset presents a number of challenges:</p>
<ul>
<li><p>There is a mix of continuous and categorical data.</p></li>
<li><p>The number of observations is very large.</p></li>
<li><p>The possible number of predictors is large (partially due to one-hot encoding of categorical values).</p></li>
<li><p>As shown in the previous section, credit margins have changed over time. This is clearly related to the wider US economic environment. Financial hardship is a key driver for some of the loans. Availability of disposable income is important to assess the ability to repay. Therefore, the cost of living, which varies from state to state, seems relevant.</p></li>
</ul>
<p>[TODO: Bias/Complexity trade-off]
[TODO: AoC? or AuC?]</p>
<div id="introduction-1" class="section level2">
<h2><span class="header-section-number">3.1</span> Introduction</h2>
<div id="split" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Split</h3>
<p>The dataset was randomly split into training and validation sets (80/20 ratio).</p>
<p>We initiated the exploration of potential models with Principal Component Analysis, Linear Regression, Extreme Boosting and Random Forest. No model could be trained on the full set. We therefore came to limit the training set on a random sample of 0.1% (1 thousandth) of the initial full set.</p>
<p>Any model will require training in batch (e.g. stochastic gradient descent) or online. Our untested intuition is that online methods are not adapted to an unbalanced dataset: the number of defaults/write-offs is fairly low for high quality ratings. However, the dataset is evidently a time series which points to online training. We will not explore that line of investigation, although exploring that tension would be an interesting subject.</p>
</div>
<div id="the-modeling-task" class="section level3">
<h3><span class="header-section-number">3.1.2</span> The modeling task</h3>
<p>Two step process:
- Given dataset (+/- rating?) find a score between -5 and +5
- Given a score between -5 and +5 given the right parameters for the modes
- Given a density curve extrapolate the required margin</p>
<ul>
<li>Make money or not?</li>
</ul>
</div>
</div>
<div id="logistic-regression" class="section level2">
<h2><span class="header-section-number">3.2</span> Logistic Regression</h2>
<p><strong>Logistic models</strong> (also called <strong>logit model</strong>) are used to model binary events. Examples would be passing or failing an exam, a newborn being a boy or a girl, a voter choosing a particular political party, or – relevant to us – a borrower defaulting or not on a loan. If the binary variable is modeled as a 0/1 outcome, the model will yield a value between 0 and 1 which can be used as a probabilty.</p>
<p>We are interested in using a number of variables (being continuous and/or categorical) to model the binary response. A natural model is a linear combination of the variables. Since the predicted value would be continuous and not be bounded by 0/1, the outcome is transformed. A commonly used transformation of the logodds (logarithm of the odds given a particular probability) <span class="math inline">\(\log \left( \frac{p}{1 - p} \right)\)</span>. This expression has a few advantages: it converts any value (between <span class="math inline">\(- \infty\)</span> and <span class="math inline">\(+\infty\)</span> produced by the linear regression), and it is symmetrical around <span class="math inline">\(x = 0\)</span> and <span class="math inline">\(y = 1/2\)</span>. That is, using the odds instead of the probability avoids infinity; it behaves identically when p approaches 0 or 1 (this would not be the case using p). The reciprocal of the logodds is <span class="math inline">\(p = \frac{1}{1 - e^{-x}}\)</span>.</p>
<p>For a number of <span class="math inline">\(X_i\)</span> variables, the model to fit is then:</p>
<p><span class="math display">\[p =  \frac{1}{1 - e^{-\sum_i{\alpha_i X_i}}}\]</span></p>
<p>The commonly used method to evaluate the creditworthiness of a borrower is to create scorecards whereby particular characteristics are segmented into intervals and attributed discrete scores. In plain English, a continuous variable (say the age of the applicant) is segmented into intervals (e.g. 0-18 year-olds, 18-26 year-olds,…), and then given a score. Those different segments become categorical variables. The task of the model is to:</p>
<ul>
<li><p>identify the best way to segment a continuous variable to maximise the information value of the different segments (called bins): intuitively empty or quasi-empty bins (either no or few applicants in the bin) are not informative; bins for which the response is completely random are not predictive, whereas a bin where the response always has the same response is informative (i.e. anybody with income of 0 and 10 dolars per year will default, anybody with a salary of $1 million per month will repay).</p></li>
<li><p>use a generalised linear model using the new categorical variables;</p></li>
<li><p>transforms the linear coefficients estimated for each category into numerical scores.</p></li>
</ul>
<blockquote>
<p>WARNING: To run this model, you will need at least 32GB of memory (real plus virtual/swap space)</p>
</blockquote>
<div id="data-preparation" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Data preparation</h3>
<blockquote>
<p>WARNING: Execute <code>CleanLoad.Rmd</code> first</p>
</blockquote>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" href="#cb4-1" data-line-number="1"><span class="co"># AFTER EXECUTION OF `CleanLoad.Rmd`</span></a>
<a class="sourceLine" id="cb4-2" href="#cb4-2" data-line-number="2"></a>
<a class="sourceLine" id="cb4-3" href="#cb4-3" data-line-number="3"><span class="co"># Variables not used</span></a>
<a class="sourceLine" id="cb4-4" href="#cb4-4" data-line-number="4"><span class="kw">rm</span>(lending_club, loans)</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" href="#cb5-1" data-line-number="1"><span class="co"># select the variables that might be used to create the training+test set </span></a>
<a class="sourceLine" id="cb5-2" href="#cb5-2" data-line-number="2">modelVarsIn &lt;-<span class="st"> </span><span class="kw">c</span>(LC_variable[LC_variable<span class="op">$</span>inModel <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>, <span class="st">&quot;variable_name&quot;</span>])<span class="op">$</span>variable_name</a>
<a class="sourceLine" id="cb5-3" href="#cb5-3" data-line-number="3">modelVarsIn &lt;-<span class="st"> </span><span class="kw">c</span>(modelVarsIn, </a>
<a class="sourceLine" id="cb5-4" href="#cb5-4" data-line-number="4">                 <span class="st">&quot;grade_num&quot;</span>, <span class="st">&quot;sub_grade_num&quot;</span>, </a>
<a class="sourceLine" id="cb5-5" href="#cb5-5" data-line-number="5">                 <span class="st">&quot;principal_loss_pct&quot;</span>, <span class="st">&quot;creditMargin&quot;</span>, <span class="st">&quot;monthDefault&quot;</span>)</a>
<a class="sourceLine" id="cb5-6" href="#cb5-6" data-line-number="6"></a>
<a class="sourceLine" id="cb5-7" href="#cb5-7" data-line-number="7"><span class="co"># Make sure that some variables are NOT in included in the final training set</span></a>
<a class="sourceLine" id="cb5-8" href="#cb5-8" data-line-number="8">modelVarsOut &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;grade_num&quot;</span>, <span class="st">&quot;sub_grade_num&quot;</span>, </a>
<a class="sourceLine" id="cb5-9" href="#cb5-9" data-line-number="9">                  <span class="st">&quot;principal_loss_pct&quot;</span>, <span class="st">&quot;creditMargin&quot;</span>, <span class="st">&quot;monthDefault&quot;</span>, </a>
<a class="sourceLine" id="cb5-10" href="#cb5-10" data-line-number="10">                  <span class="st">&quot;zip_code&quot;</span>)</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" href="#cb6-1" data-line-number="1"><span class="co">## ###############################################################################################</span></a>
<a class="sourceLine" id="cb6-2" href="#cb6-2" data-line-number="2"><span class="co">##</span></a>
<a class="sourceLine" id="cb6-3" href="#cb6-3" data-line-number="3"><span class="co">## Prepare a dataset with ONLY the predictors NOT removing NA&#39;s</span></a>
<a class="sourceLine" id="cb6-4" href="#cb6-4" data-line-number="4"><span class="co">## </span></a>
<a class="sourceLine" id="cb6-5" href="#cb6-5" data-line-number="5">loansPredictors &lt;-</a>
<a class="sourceLine" id="cb6-6" href="#cb6-6" data-line-number="6"><span class="st">  </span>loansWorkingSet <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-7" href="#cb6-7" data-line-number="7"></a>
<a class="sourceLine" id="cb6-8" href="#cb6-8" data-line-number="8"><span class="st">  </span><span class="co"># Keep the chosen predictors</span></a>
<a class="sourceLine" id="cb6-9" href="#cb6-9" data-line-number="9"><span class="st">  </span><span class="co"># Use tidyselect::one_of() to avoid errors if column does not exist</span></a>
<a class="sourceLine" id="cb6-10" href="#cb6-10" data-line-number="10"><span class="st">  </span><span class="kw">select</span>(tidyselect<span class="op">::</span><span class="kw">one_of</span>(modelVarsIn)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-11" href="#cb6-11" data-line-number="11"></a>
<a class="sourceLine" id="cb6-12" href="#cb6-12" data-line-number="12"><span class="st">  </span><span class="co">##</span></a>
<a class="sourceLine" id="cb6-13" href="#cb6-13" data-line-number="13"><span class="st">  </span><span class="co">## Dates to numeric, in &#39;decimal&#39; years since 2000</span></a>
<a class="sourceLine" id="cb6-14" href="#cb6-14" data-line-number="14"><span class="st">  </span><span class="co">##</span></a>
<a class="sourceLine" id="cb6-15" href="#cb6-15" data-line-number="15"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">c</span>(<span class="st">&quot;issue_d&quot;</span>, <span class="st">&quot;earliest_cr_line&quot;</span>), <span class="cf">function</span>(d) {</a>
<a class="sourceLine" id="cb6-16" href="#cb6-16" data-line-number="16">    <span class="kw">return</span>(<span class="kw">year</span>(d) <span class="op">-</span><span class="st"> </span><span class="dv">2000</span> <span class="op">+</span><span class="st"> </span>(<span class="kw">month</span>(d) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>) <span class="op">/</span><span class="st"> </span><span class="dv">12</span>)</a>
<a class="sourceLine" id="cb6-17" href="#cb6-17" data-line-number="17">  }) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-18" href="#cb6-18" data-line-number="18"></a>
<a class="sourceLine" id="cb6-19" href="#cb6-19" data-line-number="19"><span class="st">  </span><span class="co">## Add polynomials of the dates to model the time-trend shape</span></a>
<a class="sourceLine" id="cb6-20" href="#cb6-20" data-line-number="20"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb6-21" href="#cb6-21" data-line-number="21">    <span class="dt">issue_d2 =</span> issue_d<span class="op">^</span><span class="dv">2</span>,</a>
<a class="sourceLine" id="cb6-22" href="#cb6-22" data-line-number="22">    <span class="dt">issue_d3 =</span> issue_d<span class="op">^</span><span class="dv">3</span>,</a>
<a class="sourceLine" id="cb6-23" href="#cb6-23" data-line-number="23">    <span class="dt">earliest_cr_line2 =</span> earliest_cr_line<span class="op">^</span><span class="dv">2</span>,</a>
<a class="sourceLine" id="cb6-24" href="#cb6-24" data-line-number="24">    <span class="dt">earliest_cr_line3 =</span> earliest_cr_line<span class="op">^</span><span class="dv">3</span></a>
<a class="sourceLine" id="cb6-25" href="#cb6-25" data-line-number="25">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-26" href="#cb6-26" data-line-number="26"></a>
<a class="sourceLine" id="cb6-27" href="#cb6-27" data-line-number="27"><span class="st">  </span><span class="co">## Create a logical flag TRUE for non-defaulted (good) loans</span></a>
<a class="sourceLine" id="cb6-28" href="#cb6-28" data-line-number="28"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">isGoodLoan =</span> (principal_loss_pct <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.001</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-29" href="#cb6-29" data-line-number="29"></a>
<a class="sourceLine" id="cb6-30" href="#cb6-30" data-line-number="30"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>tidyselect<span class="op">::</span><span class="kw">one_of</span>(modelVarsOut))</a>
<a class="sourceLine" id="cb6-31" href="#cb6-31" data-line-number="31"></a>
<a class="sourceLine" id="cb6-32" href="#cb6-32" data-line-number="32"></a>
<a class="sourceLine" id="cb6-33" href="#cb6-33" data-line-number="33"></a>
<a class="sourceLine" id="cb6-34" href="#cb6-34" data-line-number="34"><span class="co">## ###############################################################################################</span></a>
<a class="sourceLine" id="cb6-35" href="#cb6-35" data-line-number="35"><span class="co">##</span></a>
<a class="sourceLine" id="cb6-36" href="#cb6-36" data-line-number="36"><span class="co">## Create training / test sets 80%/20%</span></a>
<a class="sourceLine" id="cb6-37" href="#cb6-37" data-line-number="37"><span class="co">##</span></a>
<a class="sourceLine" id="cb6-38" href="#cb6-38" data-line-number="38">proportionTraining &lt;-<span class="st"> </span><span class="fl">0.8</span></a>
<a class="sourceLine" id="cb6-39" href="#cb6-39" data-line-number="39"><span class="kw">set.seed</span>(<span class="dv">42</span>)</a>
<a class="sourceLine" id="cb6-40" href="#cb6-40" data-line-number="40"></a>
<a class="sourceLine" id="cb6-41" href="#cb6-41" data-line-number="41">nSamples &lt;-<span class="st"> </span><span class="kw">nrow</span>(loansPredictors)</a>
<a class="sourceLine" id="cb6-42" href="#cb6-42" data-line-number="42"></a>
<a class="sourceLine" id="cb6-43" href="#cb6-43" data-line-number="43">sampleTraining &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span>nSamples, <span class="kw">floor</span>(nSamples <span class="op">*</span><span class="st"> </span>proportionTraining), <span class="dt">replace =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb6-44" href="#cb6-44" data-line-number="44">loansTraining &lt;-<span class="st"> </span>loansPredictors <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">slice</span>(sampleTraining)</a>
<a class="sourceLine" id="cb6-45" href="#cb6-45" data-line-number="45">loansTest &lt;-<span class="st"> </span>loansPredictors <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">slice</span>(<span class="op">-</span>sampleTraining)</a>
<a class="sourceLine" id="cb6-46" href="#cb6-46" data-line-number="46"></a>
<a class="sourceLine" id="cb6-47" href="#cb6-47" data-line-number="47"><span class="co"># Subsets of the training set</span></a>
<a class="sourceLine" id="cb6-48" href="#cb6-48" data-line-number="48"><span class="kw">set.seed</span>(<span class="dv">42</span>)</a>
<a class="sourceLine" id="cb6-49" href="#cb6-49" data-line-number="49">nSamplesTraining &lt;-<span class="st"> </span><span class="kw">nrow</span>(loansTraining)</a>
<a class="sourceLine" id="cb6-50" href="#cb6-50" data-line-number="50"></a>
<a class="sourceLine" id="cb6-51" href="#cb6-51" data-line-number="51"><span class="co"># 1%</span></a>
<a class="sourceLine" id="cb6-52" href="#cb6-52" data-line-number="52">sample01 &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span>nSamplesTraining, <span class="kw">floor</span>(nSamplesTraining <span class="op">*</span><span class="st"> </span><span class="fl">0.01</span>), <span class="dt">replace =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb6-53" href="#cb6-53" data-line-number="53">loans01 &lt;-<span class="st"> </span>loansTraining <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">slice</span>(sample01)</a>
<a class="sourceLine" id="cb6-54" href="#cb6-54" data-line-number="54"></a>
<a class="sourceLine" id="cb6-55" href="#cb6-55" data-line-number="55"><span class="co"># 20%</span></a>
<a class="sourceLine" id="cb6-56" href="#cb6-56" data-line-number="56">sample20 &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span>nSamplesTraining, <span class="kw">floor</span>(nSamplesTraining <span class="op">*</span><span class="st"> </span><span class="fl">0.20</span>), <span class="dt">replace =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb6-57" href="#cb6-57" data-line-number="57">loans20 &lt;-<span class="st"> </span>loansTraining <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">slice</span>(sample20)</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" href="#cb7-1" data-line-number="1"><span class="co"># Not used later on</span></a>
<a class="sourceLine" id="cb7-2" href="#cb7-2" data-line-number="2"><span class="kw">rm</span>(loansWorkingSet, loansPredictors, LoansNPV, LoansIRR, LoansMargin, RATES, RATES3Y, RATES5Y)</a>
<a class="sourceLine" id="cb7-3" href="#cb7-3" data-line-number="3"><span class="kw">gc</span>(<span class="dt">full =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb8-1" href="#cb8-1" data-line-number="1">##             used   (Mb) gc trigger   (Mb)   max used    (Mb)</a>
<a class="sourceLine" id="cb8-2" href="#cb8-2" data-line-number="2">## Ncells   2831583  151.3    6816128  364.1    6816128   364.1</a>
<a class="sourceLine" id="cb8-3" href="#cb8-3" data-line-number="3">## Vcells 250281346 1909.5 1168995629 8918.8 1826494161 13935.1</a></code></pre></div>
<p></p>
</div>
</div>
<div id="binning-and-weight-of-evidence" class="section level2">
<h2><span class="header-section-number">3.3</span> Binning and Weight of Evidence</h2>
<p>This subsection owes a lot influence to the <code>smbinning</code> package source code from which we reimplemented some aspects using the <code>tidyverse</code> <strong>style</strong> (the original source code uses SQL statements to access dataframes), and the <code>Information</code> package vignette.<a href="#fn15" class="footnote-ref" id="fnref15"><sup>15</sup></a></p>
<p>To identify the various bins (and number and location)</p>
<p>Let’s say that we have a binary dependent variable Y and a set of predictive variables X1,,Xp. As mentioned above, Y can capture a wide range of outcomes, such as defaulting on a loan, clicking on an ad, or terminating a subscription.</p>
<p>WOE and IV play two distinct roles when analyzing data:</p>
<pre><code>WOE describes the relationship between a predictive variable and a binary target variable.
IV measures the strength of that relationship.</code></pre>
<p></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" href="#cb10-1" data-line-number="1"><span class="co"># Ensure that `binner` is here and available</span></a>
<a class="sourceLine" id="cb10-2" href="#cb10-2" data-line-number="2"><span class="cf">if</span> (<span class="st">&quot;package:binner&quot;</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">search</span>()) { </a>
<a class="sourceLine" id="cb10-3" href="#cb10-3" data-line-number="3">  <span class="kw">detach</span>(<span class="st">&quot;package:binner&quot;</span>, <span class="dt">unload =</span> <span class="ot">TRUE</span>, <span class="dt">force =</span> <span class="ot">TRUE</span>) </a>
<a class="sourceLine" id="cb10-4" href="#cb10-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb10-5" href="#cb10-5" data-line-number="5"></a>
<a class="sourceLine" id="cb10-6" href="#cb10-6" data-line-number="6"><span class="cf">if</span> (<span class="op">!</span>(<span class="st">&quot;binner&quot;</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">installed.packages</span>()[,<span class="dv">1</span>])) {</a>
<a class="sourceLine" id="cb10-7" href="#cb10-7" data-line-number="7">  devtools<span class="op">::</span><span class="kw">install_local</span>(<span class="st">&quot;~/Development/R/DVPT-PACKAGES/Score_modeling_binning/binner&quot;</span>, </a>
<a class="sourceLine" id="cb10-8" href="#cb10-8" data-line-number="8">                          <span class="dt">force =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb10-9" href="#cb10-9" data-line-number="9">                          <span class="dt">quiet =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb10-10" href="#cb10-10" data-line-number="10">  <span class="co"># devtools::install_github(&quot;Emmanuel-R8/SMBinning&quot;)</span></a>
<a class="sourceLine" id="cb10-11" href="#cb10-11" data-line-number="11">}</a>
<a class="sourceLine" id="cb10-12" href="#cb10-12" data-line-number="12"></a>
<a class="sourceLine" id="cb10-13" href="#cb10-13" data-line-number="13"><span class="kw">library</span>(binner)</a></code></pre></div>
<p></p>
<div id="loop-through-all-variables" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Loop through all variables</h3>
<p></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" href="#cb11-1" data-line-number="1">loansBinning &lt;-<span class="st"> </span>loansTraining <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-2" href="#cb11-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb11-3" href="#cb11-3" data-line-number="3">    <span class="dt">home_ownership =</span> <span class="kw">as_factor</span>(home_ownership),</a>
<a class="sourceLine" id="cb11-4" href="#cb11-4" data-line-number="4">    <span class="dt">emp_length =</span> <span class="kw">as_factor</span>(emp_length),</a>
<a class="sourceLine" id="cb11-5" href="#cb11-5" data-line-number="5">    <span class="dt">grade =</span> <span class="kw">as_factor</span>(grade)</a>
<a class="sourceLine" id="cb11-6" href="#cb11-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb11-7" href="#cb11-7" data-line-number="7"></a>
<a class="sourceLine" id="cb11-8" href="#cb11-8" data-line-number="8">informationValues &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">variable =</span> <span class="kw">names</span>(loansBinning), <span class="dt">IV =</span> <span class="fl">-1.0</span>)</a>
<a class="sourceLine" id="cb11-9" href="#cb11-9" data-line-number="9"></a>
<a class="sourceLine" id="cb11-10" href="#cb11-10" data-line-number="10">listBins &lt;-</a>
<a class="sourceLine" id="cb11-11" href="#cb11-11" data-line-number="11"><span class="st">  </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb11-12" href="#cb11-12" data-line-number="12">    <span class="dt">variable =</span> <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb11-13" href="#cb11-13" data-line-number="13">    <span class="dt">type =</span> <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb11-14" href="#cb11-14" data-line-number="14">    <span class="dt">IV =</span> <span class="fl">0.0</span>,</a>
<a class="sourceLine" id="cb11-15" href="#cb11-15" data-line-number="15">    <span class="dt">WoE =</span> <span class="kw">list</span>(),</a>
<a class="sourceLine" id="cb11-16" href="#cb11-16" data-line-number="16">    <span class="dt">.rows =</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb11-17" href="#cb11-17" data-line-number="17">  )</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" href="#cb12-1" data-line-number="1"><span class="co"># About 500 sec wall-time</span></a>
<a class="sourceLine" id="cb12-2" href="#cb12-2" data-line-number="2">startTime &lt;-<span class="st"> </span><span class="kw">proc.time</span>()</a>
<a class="sourceLine" id="cb12-3" href="#cb12-3" data-line-number="3"><span class="cf">for</span> (n <span class="cf">in</span> informationValues<span class="op">$</span>variable) {</a>
<a class="sourceLine" id="cb12-4" href="#cb12-4" data-line-number="4">  <span class="kw">cat</span>(<span class="st">&quot;Variable: &quot;</span>, n)</a>
<a class="sourceLine" id="cb12-5" href="#cb12-5" data-line-number="5"></a>
<a class="sourceLine" id="cb12-6" href="#cb12-6" data-line-number="6">  <span class="co"># We don&#39;t test the response with itself</span></a>
<a class="sourceLine" id="cb12-7" href="#cb12-7" data-line-number="7">  <span class="cf">if</span> (n <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;isGoodLoan&quot;</span>)) {</a>
<a class="sourceLine" id="cb12-8" href="#cb12-8" data-line-number="8">    <span class="kw">cat</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb12-9" href="#cb12-9" data-line-number="9"></a>
<a class="sourceLine" id="cb12-10" href="#cb12-10" data-line-number="10">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb12-11" href="#cb12-11" data-line-number="11">    <span class="cf">if</span> (<span class="kw">class</span>(loansBinning[[<span class="dv">1</span>, n]]) <span class="op">==</span><span class="st"> &quot;factor&quot;</span>) {</a>
<a class="sourceLine" id="cb12-12" href="#cb12-12" data-line-number="12">      <span class="kw">cat</span>(<span class="st">&quot; is a factor, &quot;</span>)</a>
<a class="sourceLine" id="cb12-13" href="#cb12-13" data-line-number="13">      result &lt;-<span class="st"> </span><span class="kw">WoETableCategorical</span>(</a>
<a class="sourceLine" id="cb12-14" href="#cb12-14" data-line-number="14">        <span class="dt">df =</span> loansBinning,</a>
<a class="sourceLine" id="cb12-15" href="#cb12-15" data-line-number="15">        <span class="dt">x =</span> n,</a>
<a class="sourceLine" id="cb12-16" href="#cb12-16" data-line-number="16">        <span class="dt">y =</span> <span class="st">&quot;isGoodLoan&quot;</span>,</a>
<a class="sourceLine" id="cb12-17" href="#cb12-17" data-line-number="17">        <span class="dt">maxCategories =</span> <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb12-18" href="#cb12-18" data-line-number="18"></a>
<a class="sourceLine" id="cb12-19" href="#cb12-19" data-line-number="19">    } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb12-20" href="#cb12-20" data-line-number="20">      <span class="kw">cat</span>(<span class="st">&quot; is numeric, &quot;</span>)</a>
<a class="sourceLine" id="cb12-21" href="#cb12-21" data-line-number="21">      result &lt;-<span class="st"> </span><span class="kw">WoETableContinuous</span>(<span class="dt">df =</span> loansBinning,</a>
<a class="sourceLine" id="cb12-22" href="#cb12-22" data-line-number="22">                                   <span class="dt">x =</span> n,</a>
<a class="sourceLine" id="cb12-23" href="#cb12-23" data-line-number="23">                                   <span class="dt">y =</span> <span class="st">&quot;isGoodLoan&quot;</span>,</a>
<a class="sourceLine" id="cb12-24" href="#cb12-24" data-line-number="24">                                   <span class="dt">p =</span> <span class="fl">0.05</span>)</a>
<a class="sourceLine" id="cb12-25" href="#cb12-25" data-line-number="25">    }</a>
<a class="sourceLine" id="cb12-26" href="#cb12-26" data-line-number="26"></a>
<a class="sourceLine" id="cb12-27" href="#cb12-27" data-line-number="27">    <span class="kw">tryCatch</span>({</a>
<a class="sourceLine" id="cb12-28" href="#cb12-28" data-line-number="28">      <span class="cf">if</span> (<span class="kw">is.na</span>(result)) {</a>
<a class="sourceLine" id="cb12-29" href="#cb12-29" data-line-number="29">        <span class="kw">cat</span>(<span class="st">&quot;Variable skipped.</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb12-30" href="#cb12-30" data-line-number="30">        <span class="kw">add_row</span>(</a>
<a class="sourceLine" id="cb12-31" href="#cb12-31" data-line-number="31">          listBins,</a>
<a class="sourceLine" id="cb12-32" href="#cb12-32" data-line-number="32">          <span class="dt">variable =</span> n,</a>
<a class="sourceLine" id="cb12-33" href="#cb12-33" data-line-number="33">          <span class="dt">type =</span> <span class="ot">NA</span>,</a>
<a class="sourceLine" id="cb12-34" href="#cb12-34" data-line-number="34">          <span class="dt">IV =</span> <span class="ot">NA</span></a>
<a class="sourceLine" id="cb12-35" href="#cb12-35" data-line-number="35">        )</a>
<a class="sourceLine" id="cb12-36" href="#cb12-36" data-line-number="36">      } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb12-37" href="#cb12-37" data-line-number="37">        <span class="kw">cat</span>(<span class="st">&quot;     IV : &quot;</span>, result<span class="op">$</span>IV, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb12-38" href="#cb12-38" data-line-number="38"></a>
<a class="sourceLine" id="cb12-39" href="#cb12-39" data-line-number="39">        listBins &lt;-<span class="st"> </span>listBins <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-40" href="#cb12-40" data-line-number="40"><span class="st">          </span><span class="kw">add_row</span>(</a>
<a class="sourceLine" id="cb12-41" href="#cb12-41" data-line-number="41">            <span class="dt">variable =</span> n,</a>
<a class="sourceLine" id="cb12-42" href="#cb12-42" data-line-number="42">            <span class="dt">type =</span> result<span class="op">$</span>type,</a>
<a class="sourceLine" id="cb12-43" href="#cb12-43" data-line-number="43">            <span class="dt">IV =</span> result<span class="op">$</span>IV,</a>
<a class="sourceLine" id="cb12-44" href="#cb12-44" data-line-number="44">            <span class="dt">WoE =</span> <span class="kw">list</span>(result<span class="op">$</span>table)</a>
<a class="sourceLine" id="cb12-45" href="#cb12-45" data-line-number="45">          )</a>
<a class="sourceLine" id="cb12-46" href="#cb12-46" data-line-number="46">        </a>
<a class="sourceLine" id="cb12-47" href="#cb12-47" data-line-number="47">        informationValues[n] &lt;-<span class="st"> </span>result<span class="op">$</span>IV</a>
<a class="sourceLine" id="cb12-48" href="#cb12-48" data-line-number="48">        </a>
<a class="sourceLine" id="cb12-49" href="#cb12-49" data-line-number="49">        }</a>
<a class="sourceLine" id="cb12-50" href="#cb12-50" data-line-number="50">    },</a>
<a class="sourceLine" id="cb12-51" href="#cb12-51" data-line-number="51">    <span class="dt">finally =</span> {})</a>
<a class="sourceLine" id="cb12-52" href="#cb12-52" data-line-number="52">  }</a>
<a class="sourceLine" id="cb12-53" href="#cb12-53" data-line-number="53">}</a></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb13-1" href="#cb13-1" data-line-number="1">## Variable:  loanID is numeric, Number of missing/NA values:  0 </a>
<a class="sourceLine" id="cb13-2" href="#cb13-2" data-line-number="2">##      IV :  0.03483779 </a>
<a class="sourceLine" id="cb13-3" href="#cb13-3" data-line-number="3">## Variable:  loan_amnt is numeric, Number of missing/NA values:  0 </a>
<a class="sourceLine" id="cb13-4" href="#cb13-4" data-line-number="4">##      IV :  0.03616236 </a>
<a class="sourceLine" id="cb13-5" href="#cb13-5" data-line-number="5">## Variable:  term is numeric, Number of missing/NA values:  0 </a>
<a class="sourceLine" id="cb13-6" href="#cb13-6" data-line-number="6">##      IV :  0.1732862 </a>
<a class="sourceLine" id="cb13-7" href="#cb13-7" data-line-number="7">## Variable:  int_rate is numeric, Number of missing/NA values:  0 </a>
<a class="sourceLine" id="cb13-8" href="#cb13-8" data-line-number="8">##      IV :  0.4652705 </a>
<a class="sourceLine" id="cb13-9" href="#cb13-9" data-line-number="9">## Variable:  grade is a factor,      IV :  0.4601578 </a>
<a class="sourceLine" id="cb13-10" href="#cb13-10" data-line-number="10">## Variable:  sub_grade is a factor,      IV :  0.4939204 </a>
<a class="sourceLine" id="cb13-11" href="#cb13-11" data-line-number="11">## Variable:  emp_length is a factor, Variable skipped.</a>
<a class="sourceLine" id="cb13-12" href="#cb13-12" data-line-number="12">## Variable:  home_ownership is a factor,      IV :  0.03122319 </a>
<a class="sourceLine" id="cb13-13" href="#cb13-13" data-line-number="13">## Variable:  verification_status is a factor,      IV :  0.0568103 </a>
<a class="sourceLine" id="cb13-14" href="#cb13-14" data-line-number="14">## Variable:  issue_d is numeric, Number of missing/NA values:  0 </a>
<a class="sourceLine" id="cb13-15" href="#cb13-15" data-line-number="15">##      IV :  0.04082864 </a>
<a class="sourceLine" id="cb13-16" href="#cb13-16" data-line-number="16">## Variable:  purpose is a factor,      IV :  0.0195876 </a>
<a class="sourceLine" id="cb13-17" href="#cb13-17" data-line-number="17">## Variable:  addr_state is a factor,      IV :  0.01663099 </a>
<a class="sourceLine" id="cb13-18" href="#cb13-18" data-line-number="18">## Variable:  dti is numeric, Number of missing/NA values:  247 </a>
<a class="sourceLine" id="cb13-19" href="#cb13-19" data-line-number="19">##      IV :  0.07445211 </a>
<a class="sourceLine" id="cb13-20" href="#cb13-20" data-line-number="20">## Variable:  delinq_2yrs is numeric, Number of missing/NA values:  23 </a>
<a class="sourceLine" id="cb13-21" href="#cb13-21" data-line-number="21">##      IV :  0.002442208 </a>
<a class="sourceLine" id="cb13-22" href="#cb13-22" data-line-number="22">## Variable:  earliest_cr_line is numeric, Number of missing/NA values:  23 </a>
<a class="sourceLine" id="cb13-23" href="#cb13-23" data-line-number="23">##      IV :  0.01668446 </a>
<a class="sourceLine" id="cb13-24" href="#cb13-24" data-line-number="24">## Variable:  inq_last_6mths is numeric, Number of missing/NA values:  24 </a>
<a class="sourceLine" id="cb13-25" href="#cb13-25" data-line-number="25">##      IV :  0.02654189 </a>
<a class="sourceLine" id="cb13-26" href="#cb13-26" data-line-number="26">## Variable:  mths_since_last_delinq is numeric, Number of missing/NA values:  527124 </a>
<a class="sourceLine" id="cb13-27" href="#cb13-27" data-line-number="27">##      IV :  0.002617462 </a>
<a class="sourceLine" id="cb13-28" href="#cb13-28" data-line-number="28">## Variable:  mths_since_last_record is numeric, Number of missing/NA values:  866836 </a>
<a class="sourceLine" id="cb13-29" href="#cb13-29" data-line-number="29">##      IV :  0.006109422 </a>
<a class="sourceLine" id="cb13-30" href="#cb13-30" data-line-number="30">## Variable:  open_acc is numeric, Number of missing/NA values:  23 </a>
<a class="sourceLine" id="cb13-31" href="#cb13-31" data-line-number="31">##      IV :  0.004893466 </a>
<a class="sourceLine" id="cb13-32" href="#cb13-32" data-line-number="32">## Variable:  pub_rec is numeric, Number of missing/NA values:  23 </a>
<a class="sourceLine" id="cb13-33" href="#cb13-33" data-line-number="33">##      IV :  0.005781389 </a>
<a class="sourceLine" id="cb13-34" href="#cb13-34" data-line-number="34">## Variable:  revol_bal is numeric, Number of missing/NA values:  0 </a>
<a class="sourceLine" id="cb13-35" href="#cb13-35" data-line-number="35">##      IV :  0.002693195 </a>
<a class="sourceLine" id="cb13-36" href="#cb13-36" data-line-number="36">## Variable:  revol_util is numeric, Number of missing/NA values:  687 </a>
<a class="sourceLine" id="cb13-37" href="#cb13-37" data-line-number="37">##      IV :  0.02549172 </a>
<a class="sourceLine" id="cb13-38" href="#cb13-38" data-line-number="38">## Variable:  total_acc is numeric, Number of missing/NA values:  23 </a>
<a class="sourceLine" id="cb13-39" href="#cb13-39" data-line-number="39">##      IV :  0.001581812 </a>
<a class="sourceLine" id="cb13-40" href="#cb13-40" data-line-number="40">## Variable:  application_type is a factor,      IV :  0.001462783 </a>
<a class="sourceLine" id="cb13-41" href="#cb13-41" data-line-number="41">## Variable:  annual_inc_joint is numeric, Variable skipped.</a>
<a class="sourceLine" id="cb13-42" href="#cb13-42" data-line-number="42">## Variable:  dti_joint is numeric, Variable skipped.</a>
<a class="sourceLine" id="cb13-43" href="#cb13-43" data-line-number="43">## Variable:  verification_status_joint is a factor,      IV :  0.001828885 </a>
<a class="sourceLine" id="cb13-44" href="#cb13-44" data-line-number="44">## Variable:  acc_now_delinq is numeric, Variable skipped.</a>
<a class="sourceLine" id="cb13-45" href="#cb13-45" data-line-number="45">## Variable:  open_rv_12m is numeric, Number of missing/NA values:  645401 </a>
<a class="sourceLine" id="cb13-46" href="#cb13-46" data-line-number="46">##      IV :  0.02649645 </a>
<a class="sourceLine" id="cb13-47" href="#cb13-47" data-line-number="47">## Variable:  open_rv_24m is numeric, Number of missing/NA values:  645401 </a>
<a class="sourceLine" id="cb13-48" href="#cb13-48" data-line-number="48">##      IV :  0.03337626 </a>
<a class="sourceLine" id="cb13-49" href="#cb13-49" data-line-number="49">## Variable:  max_bal_bc is numeric, Number of missing/NA values:  645401 </a>
<a class="sourceLine" id="cb13-50" href="#cb13-50" data-line-number="50">##      IV :  0.02120239 </a>
<a class="sourceLine" id="cb13-51" href="#cb13-51" data-line-number="51">## Variable:  inq_fi is numeric, Number of missing/NA values:  645401 </a>
<a class="sourceLine" id="cb13-52" href="#cb13-52" data-line-number="52">##      IV :  0.01993185 </a>
<a class="sourceLine" id="cb13-53" href="#cb13-53" data-line-number="53">## Variable:  avg_cur_bal is numeric, Number of missing/NA values:  56032 </a>
<a class="sourceLine" id="cb13-54" href="#cb13-54" data-line-number="54">##      IV :  0.05429846 </a>
<a class="sourceLine" id="cb13-55" href="#cb13-55" data-line-number="55">## Variable:  bc_open_to_buy is numeric, Number of missing/NA values:  51160 </a>
<a class="sourceLine" id="cb13-56" href="#cb13-56" data-line-number="56">##      IV :  0.03048348 </a>
<a class="sourceLine" id="cb13-57" href="#cb13-57" data-line-number="57">## Variable:  bc_util is numeric, Number of missing/NA values:  51160 </a>
<a class="sourceLine" id="cb13-58" href="#cb13-58" data-line-number="58">##      IV :  0.03048348 </a>
<a class="sourceLine" id="cb13-59" href="#cb13-59" data-line-number="59">## Variable:  mo_sin_old_il_acct is numeric, Number of missing/NA values:  85391 </a>
<a class="sourceLine" id="cb13-60" href="#cb13-60" data-line-number="60">##      IV :  0.009095095 </a>
<a class="sourceLine" id="cb13-61" href="#cb13-61" data-line-number="61">## Variable:  mo_sin_old_rev_tl_op is numeric, Number of missing/NA values:  56016 </a>
<a class="sourceLine" id="cb13-62" href="#cb13-62" data-line-number="62">##      IV :  0.02704707 </a>
<a class="sourceLine" id="cb13-63" href="#cb13-63" data-line-number="63">## Variable:  mo_sin_rcnt_rev_tl_op is numeric, Number of missing/NA values:  56016 </a>
<a class="sourceLine" id="cb13-64" href="#cb13-64" data-line-number="64">##      IV :  0.02959229 </a>
<a class="sourceLine" id="cb13-65" href="#cb13-65" data-line-number="65">## Variable:  mo_sin_rcnt_tl is numeric, Number of missing/NA values:  56015 </a>
<a class="sourceLine" id="cb13-66" href="#cb13-66" data-line-number="66">##      IV :  0.03358796 </a>
<a class="sourceLine" id="cb13-67" href="#cb13-67" data-line-number="67">## Variable:  mort_acc is numeric, Number of missing/NA values:  39839 </a>
<a class="sourceLine" id="cb13-68" href="#cb13-68" data-line-number="68">##      IV :  0.04381551 </a>
<a class="sourceLine" id="cb13-69" href="#cb13-69" data-line-number="69">## Variable:  mths_since_recent_bc is numeric, Number of missing/NA values:  49826 </a>
<a class="sourceLine" id="cb13-70" href="#cb13-70" data-line-number="70">##      IV :  0.02727271 </a>
<a class="sourceLine" id="cb13-71" href="#cb13-71" data-line-number="71">## Variable:  mths_since_recent_bc_dlq is numeric, Number of missing/NA values:  797767 </a>
<a class="sourceLine" id="cb13-72" href="#cb13-72" data-line-number="72">##      IV :  0.001486543 </a>
<a class="sourceLine" id="cb13-73" href="#cb13-73" data-line-number="73">## Variable:  mths_since_recent_inq is numeric, Number of missing/NA values:  137406 </a>
<a class="sourceLine" id="cb13-74" href="#cb13-74" data-line-number="74">##      IV :  0.0348828 </a>
<a class="sourceLine" id="cb13-75" href="#cb13-75" data-line-number="75">## Variable:  mths_since_recent_revol_delinq is numeric, Number of missing/NA values:  696281 </a>
<a class="sourceLine" id="cb13-76" href="#cb13-76" data-line-number="76">##      IV :  0.001433636 </a>
<a class="sourceLine" id="cb13-77" href="#cb13-77" data-line-number="77">## Variable:  num_accts_ever_120_pd is numeric, Number of missing/NA values:  56015 </a>
<a class="sourceLine" id="cb13-78" href="#cb13-78" data-line-number="78">##      IV :  0.006819851 </a>
<a class="sourceLine" id="cb13-79" href="#cb13-79" data-line-number="79">## Variable:  num_actv_bc_tl is numeric, Number of missing/NA values:  56015 </a>
<a class="sourceLine" id="cb13-80" href="#cb13-80" data-line-number="80">##      IV :  0.01471619 </a>
<a class="sourceLine" id="cb13-81" href="#cb13-81" data-line-number="81">## Variable:  num_actv_rev_tl is numeric, Number of missing/NA values:  56015 </a>
<a class="sourceLine" id="cb13-82" href="#cb13-82" data-line-number="82">##      IV :  0.03353568 </a>
<a class="sourceLine" id="cb13-83" href="#cb13-83" data-line-number="83">## Variable:  num_bc_sats is numeric, Number of missing/NA values:  46723 </a>
<a class="sourceLine" id="cb13-84" href="#cb13-84" data-line-number="84">##      IV :  0.005841431 </a>
<a class="sourceLine" id="cb13-85" href="#cb13-85" data-line-number="85">## Variable:  num_bc_tl is numeric, Number of missing/NA values:  56015 </a>
<a class="sourceLine" id="cb13-86" href="#cb13-86" data-line-number="86">##      IV :  0.007157188 </a>
<a class="sourceLine" id="cb13-87" href="#cb13-87" data-line-number="87">## Variable:  num_il_tl is numeric, Number of missing/NA values:  56015 </a>
<a class="sourceLine" id="cb13-88" href="#cb13-88" data-line-number="88">##      IV :  0.005147452 </a>
<a class="sourceLine" id="cb13-89" href="#cb13-89" data-line-number="89">## Variable:  num_op_rev_tl is numeric, Number of missing/NA values:  56015 </a>
<a class="sourceLine" id="cb13-90" href="#cb13-90" data-line-number="90">##      IV :  0.01095223 </a>
<a class="sourceLine" id="cb13-91" href="#cb13-91" data-line-number="91">## Variable:  num_rev_accts is numeric, Number of missing/NA values:  56015 </a>
<a class="sourceLine" id="cb13-92" href="#cb13-92" data-line-number="92">##      IV :  0.004930698 </a>
<a class="sourceLine" id="cb13-93" href="#cb13-93" data-line-number="93">## Variable:  num_rev_tl_bal_gt_0 is numeric, Number of missing/NA values:  56015 </a>
<a class="sourceLine" id="cb13-94" href="#cb13-94" data-line-number="94">##      IV :  0.03221086 </a>
<a class="sourceLine" id="cb13-95" href="#cb13-95" data-line-number="95">## Variable:  num_sats is numeric, Number of missing/NA values:  46723 </a>
<a class="sourceLine" id="cb13-96" href="#cb13-96" data-line-number="96">##      IV :  0.008577643 </a>
<a class="sourceLine" id="cb13-97" href="#cb13-97" data-line-number="97">## Variable:  num_tl_120dpd_2m is numeric, Variable skipped.</a>
<a class="sourceLine" id="cb13-98" href="#cb13-98" data-line-number="98">## Variable:  num_tl_30dpd is numeric, Variable skipped.</a>
<a class="sourceLine" id="cb13-99" href="#cb13-99" data-line-number="99">## Variable:  num_tl_90g_dpd_24m is numeric, Number of missing/NA values:  56015 </a>
<a class="sourceLine" id="cb13-100" href="#cb13-100" data-line-number="100">##      IV :  0.005525681 </a>
<a class="sourceLine" id="cb13-101" href="#cb13-101" data-line-number="101">## Variable:  num_tl_op_past_12m is numeric, Number of missing/NA values:  56015 </a>
<a class="sourceLine" id="cb13-102" href="#cb13-102" data-line-number="102">##      IV :  0.04852394 </a>
<a class="sourceLine" id="cb13-103" href="#cb13-103" data-line-number="103">## Variable:  pct_tl_nvr_dlq is numeric, Number of missing/NA values:  56139 </a>
<a class="sourceLine" id="cb13-104" href="#cb13-104" data-line-number="104">##      IV :  0.005569665 </a>
<a class="sourceLine" id="cb13-105" href="#cb13-105" data-line-number="105">## Variable:  percent_bc_gt_75 is numeric, Number of missing/NA values:  50862 </a>
<a class="sourceLine" id="cb13-106" href="#cb13-106" data-line-number="106">##      IV :  0.0325666 </a>
<a class="sourceLine" id="cb13-107" href="#cb13-107" data-line-number="107">## Variable:  pub_rec_bankruptcies is numeric, Number of missing/NA values:  1114 </a>
<a class="sourceLine" id="cb13-108" href="#cb13-108" data-line-number="108">##      IV :  0.003680394 </a>
<a class="sourceLine" id="cb13-109" href="#cb13-109" data-line-number="109">## Variable:  tax_liens is numeric, Variable skipped.</a>
<a class="sourceLine" id="cb13-110" href="#cb13-110" data-line-number="110">## Variable:  tot_hi_cred_lim is numeric, Number of missing/NA values:  56015 </a>
<a class="sourceLine" id="cb13-111" href="#cb13-111" data-line-number="111">##      IV :  0.05002856 </a>
<a class="sourceLine" id="cb13-112" href="#cb13-112" data-line-number="112">## Variable:  total_bal_ex_mort is numeric, Number of missing/NA values:  39839 </a>
<a class="sourceLine" id="cb13-113" href="#cb13-113" data-line-number="113">##      IV :  0.006069149 </a>
<a class="sourceLine" id="cb13-114" href="#cb13-114" data-line-number="114">## Variable:  total_bc_limit is numeric, Number of missing/NA values:  39839 </a>
<a class="sourceLine" id="cb13-115" href="#cb13-115" data-line-number="115">##      IV :  0.04118286 </a>
<a class="sourceLine" id="cb13-116" href="#cb13-116" data-line-number="116">## Variable:  total_il_high_credit_limit is numeric, Variable skipped.</a>
<a class="sourceLine" id="cb13-117" href="#cb13-117" data-line-number="117">## Variable:  revol_bal_joint is numeric, Variable skipped.</a>
<a class="sourceLine" id="cb13-118" href="#cb13-118" data-line-number="118">## Variable:  disbursement_method is a factor,      IV :  4.121812e-05 </a>
<a class="sourceLine" id="cb13-119" href="#cb13-119" data-line-number="119">## Variable:  issue_d2 is numeric, Number of missing/NA values:  0 </a>
<a class="sourceLine" id="cb13-120" href="#cb13-120" data-line-number="120">##      IV :  0.04086939 </a>
<a class="sourceLine" id="cb13-121" href="#cb13-121" data-line-number="121">## Variable:  issue_d3 is numeric, Number of missing/NA values:  0 </a>
<a class="sourceLine" id="cb13-122" href="#cb13-122" data-line-number="122">##      IV :  0.04086939 </a>
<a class="sourceLine" id="cb13-123" href="#cb13-123" data-line-number="123">## Variable:  earliest_cr_line2 is numeric, Number of missing/NA values:  23 </a>
<a class="sourceLine" id="cb13-124" href="#cb13-124" data-line-number="124">##      IV :  0.002263311 </a>
<a class="sourceLine" id="cb13-125" href="#cb13-125" data-line-number="125">## Variable:  earliest_cr_line3 is numeric, Number of missing/NA values:  23 </a>
<a class="sourceLine" id="cb13-126" href="#cb13-126" data-line-number="126">##      IV :  0.01460377 </a>
<a class="sourceLine" id="cb13-127" href="#cb13-127" data-line-number="127">## Variable:  isGoodLoan</a></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" href="#cb14-1" data-line-number="1"><span class="kw">proc.time</span>() <span class="op">-</span><span class="st"> </span>startTime</a></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb15-1" href="#cb15-1" data-line-number="1">##    user  system elapsed </a>
<a class="sourceLine" id="cb15-2" href="#cb15-2" data-line-number="2">## 435.527   2.884 459.102</a></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" href="#cb16-1" data-line-number="1"><span class="kw">saveRDS</span>(informationValues, <span class="st">&quot;datasets/informationValues100.rds&quot;</span>)</a>
<a class="sourceLine" id="cb16-2" href="#cb16-2" data-line-number="2"><span class="kw">saveRDS</span>(listBins, <span class="st">&quot;datasets/listBins100.rds&quot;</span>)</a></code></pre></div>
<p></p>
</div>
<div id="select-relevant-variables" class="section level3">
<h3><span class="header-section-number">3.3.2</span> Select relevant variables</h3>
<p>It is considered that information value below 2% is useless.</p>
<p></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" href="#cb17-1" data-line-number="1">bestBins &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb17-2" href="#cb17-2" data-line-number="2"><span class="st">  </span>listBins <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-3" href="#cb17-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(IV <span class="op">&gt;=</span><span class="st"> </span><span class="fl">0.02</span>)</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" href="#cb18-1" data-line-number="1">bestBins <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-2" href="#cb18-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(variable, IV) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-3" href="#cb18-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">IV =</span> <span class="kw">round</span>(IV, <span class="dt">digits =</span> <span class="dv">5</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-4" href="#cb18-4" data-line-number="4"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(IV)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-5" href="#cb18-5" data-line-number="5"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb19-1" href="#cb19-1" data-line-number="1">## # A tibble: 10 x 2</a>
<a class="sourceLine" id="cb19-2" href="#cb19-2" data-line-number="2">##    variable                IV</a>
<a class="sourceLine" id="cb19-3" href="#cb19-3" data-line-number="3">##    &lt;chr&gt;                &lt;dbl&gt;</a>
<a class="sourceLine" id="cb19-4" href="#cb19-4" data-line-number="4">##  1 sub_grade           0.494 </a>
<a class="sourceLine" id="cb19-5" href="#cb19-5" data-line-number="5">##  2 int_rate            0.465 </a>
<a class="sourceLine" id="cb19-6" href="#cb19-6" data-line-number="6">##  3 grade               0.460 </a>
<a class="sourceLine" id="cb19-7" href="#cb19-7" data-line-number="7">##  4 term                0.173 </a>
<a class="sourceLine" id="cb19-8" href="#cb19-8" data-line-number="8">##  5 dti                 0.0744</a>
<a class="sourceLine" id="cb19-9" href="#cb19-9" data-line-number="9">##  6 verification_status 0.0568</a>
<a class="sourceLine" id="cb19-10" href="#cb19-10" data-line-number="10">##  7 avg_cur_bal         0.0543</a>
<a class="sourceLine" id="cb19-11" href="#cb19-11" data-line-number="11">##  8 tot_hi_cred_lim     0.0500</a>
<a class="sourceLine" id="cb19-12" href="#cb19-12" data-line-number="12">##  9 num_tl_op_past_12m  0.0485</a>
<a class="sourceLine" id="cb19-13" href="#cb19-13" data-line-number="13">## 10 mort_acc            0.0438</a></code></pre></div>
<p></p>
<p>However, we should ignore the variables that would not be available at the time the credit scoring is performed.</p>
<p></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" href="#cb20-1" data-line-number="1">bestBins &lt;-<span class="st"> </span>bestBins <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-2" href="#cb20-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>(variable <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb20-3" href="#cb20-3" data-line-number="3">    <span class="st">&quot;loanID&quot;</span>, <span class="st">&quot;term&quot;</span>, <span class="st">&quot;int_rate&quot;</span>, <span class="st">&quot;creditMargin&quot;</span>, <span class="st">&quot;loan_status&quot;</span>,</a>
<a class="sourceLine" id="cb20-4" href="#cb20-4" data-line-number="4">    <span class="st">&quot;grade&quot;</span>, <span class="st">&quot;sub_grade&quot;</span>, <span class="st">&quot;grade_num&quot;</span>, <span class="st">&quot;sub_grade_num&quot;</span>,</a>
<a class="sourceLine" id="cb20-5" href="#cb20-5" data-line-number="5">    <span class="st">&quot;emp_length&quot;</span>, <span class="st">&quot;home_ownership&quot;</span>, <span class="st">&quot;monthDefault&quot;</span>,</a>
<a class="sourceLine" id="cb20-6" href="#cb20-6" data-line-number="6">    <span class="st">&quot;principal_loss_pct&quot;</span>, <span class="st">&quot;creditMargin&quot;</span>, <span class="st">&quot;monthDefault&quot;</span>,</a>
<a class="sourceLine" id="cb20-7" href="#cb20-7" data-line-number="7">    <span class="st">&quot;isGoodLoan&quot;</span>)))</a>
<a class="sourceLine" id="cb20-8" href="#cb20-8" data-line-number="8"></a>
<a class="sourceLine" id="cb20-9" href="#cb20-9" data-line-number="9"><span class="kw">saveRDS</span>(bestBins, <span class="st">&quot;datasets/bestBins100.rds&quot;</span>)</a></code></pre></div>
<p></p>
<p>The 10 best variables that will retain are in the following table. Interestingly, the square and cubic powers of the issue date are retained.</p>
<p></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" href="#cb21-1" data-line-number="1">bestBins <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-2" href="#cb21-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(variable, IV) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-3" href="#cb21-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">IV =</span> <span class="kw">round</span>(IV, <span class="dt">digits =</span> <span class="dv">5</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-4" href="#cb21-4" data-line-number="4"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(IV)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-5" href="#cb21-5" data-line-number="5"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb22-1" href="#cb22-1" data-line-number="1">## # A tibble: 10 x 2</a>
<a class="sourceLine" id="cb22-2" href="#cb22-2" data-line-number="2">##    variable                IV</a>
<a class="sourceLine" id="cb22-3" href="#cb22-3" data-line-number="3">##    &lt;chr&gt;                &lt;dbl&gt;</a>
<a class="sourceLine" id="cb22-4" href="#cb22-4" data-line-number="4">##  1 dti                 0.0744</a>
<a class="sourceLine" id="cb22-5" href="#cb22-5" data-line-number="5">##  2 verification_status 0.0568</a>
<a class="sourceLine" id="cb22-6" href="#cb22-6" data-line-number="6">##  3 avg_cur_bal         0.0543</a>
<a class="sourceLine" id="cb22-7" href="#cb22-7" data-line-number="7">##  4 tot_hi_cred_lim     0.0500</a>
<a class="sourceLine" id="cb22-8" href="#cb22-8" data-line-number="8">##  5 num_tl_op_past_12m  0.0485</a>
<a class="sourceLine" id="cb22-9" href="#cb22-9" data-line-number="9">##  6 mort_acc            0.0438</a>
<a class="sourceLine" id="cb22-10" href="#cb22-10" data-line-number="10">##  7 total_bc_limit      0.0412</a>
<a class="sourceLine" id="cb22-11" href="#cb22-11" data-line-number="11">##  8 issue_d2            0.0409</a>
<a class="sourceLine" id="cb22-12" href="#cb22-12" data-line-number="12">##  9 issue_d3            0.0409</a>
<a class="sourceLine" id="cb22-13" href="#cb22-13" data-line-number="13">## 10 issue_d             0.0408</a></code></pre></div>
<p></p>
<p>And the 10 worst (but retained) variables are:</p>
<p></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" href="#cb23-1" data-line-number="1">bestBins <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb23-2" href="#cb23-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(variable, IV) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb23-3" href="#cb23-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">IV =</span> <span class="kw">round</span>(IV, <span class="dt">digits =</span> <span class="dv">5</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb23-4" href="#cb23-4" data-line-number="4"><span class="st">  </span><span class="kw">arrange</span>(IV) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb23-5" href="#cb23-5" data-line-number="5"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb24-1" href="#cb24-1" data-line-number="1">## # A tibble: 10 x 2</a>
<a class="sourceLine" id="cb24-2" href="#cb24-2" data-line-number="2">##    variable                  IV</a>
<a class="sourceLine" id="cb24-3" href="#cb24-3" data-line-number="3">##    &lt;chr&gt;                  &lt;dbl&gt;</a>
<a class="sourceLine" id="cb24-4" href="#cb24-4" data-line-number="4">##  1 max_bal_bc            0.0212</a>
<a class="sourceLine" id="cb24-5" href="#cb24-5" data-line-number="5">##  2 revol_util            0.0255</a>
<a class="sourceLine" id="cb24-6" href="#cb24-6" data-line-number="6">##  3 open_rv_12m           0.0265</a>
<a class="sourceLine" id="cb24-7" href="#cb24-7" data-line-number="7">##  4 inq_last_6mths        0.0265</a>
<a class="sourceLine" id="cb24-8" href="#cb24-8" data-line-number="8">##  5 mo_sin_old_rev_tl_op  0.0270</a>
<a class="sourceLine" id="cb24-9" href="#cb24-9" data-line-number="9">##  6 mths_since_recent_bc  0.0273</a>
<a class="sourceLine" id="cb24-10" href="#cb24-10" data-line-number="10">##  7 mo_sin_rcnt_rev_tl_op 0.0296</a>
<a class="sourceLine" id="cb24-11" href="#cb24-11" data-line-number="11">##  8 bc_open_to_buy        0.0305</a>
<a class="sourceLine" id="cb24-12" href="#cb24-12" data-line-number="12">##  9 bc_util               0.0305</a>
<a class="sourceLine" id="cb24-13" href="#cb24-13" data-line-number="13">## 10 num_rev_tl_bal_gt_0   0.0322</a></code></pre></div>
<p></p>
</div>
<div id="create-data-table-with-only-binary-variables-transform-every-bin-to-a-01-value" class="section level3">
<h3><span class="header-section-number">3.3.3</span> Create data table with only binary variables (transform every bin to a 0/1 value)</h3>
<p>For each variable, create new variables for each bin in the WoE table of that variable.</p>
<p></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" href="#cb25-1" data-line-number="1"><span class="co"># Variable will contain all the best characteristics. Every continuous variable is reformatted</span></a>
<a class="sourceLine" id="cb25-2" href="#cb25-2" data-line-number="2"><span class="co"># into factors reflecting the appropriate bins</span></a>
<a class="sourceLine" id="cb25-3" href="#cb25-3" data-line-number="3"></a>
<a class="sourceLine" id="cb25-4" href="#cb25-4" data-line-number="4">allFactorsAsCharacteristics &lt;-<span class="st"> </span>loansTraining[,<span class="st">&quot;loanID&quot;</span>]</a>
<a class="sourceLine" id="cb25-5" href="#cb25-5" data-line-number="5">allFactorsAsBins &lt;-<span class="st"> </span>loansTraining[,<span class="st">&quot;loanID&quot;</span>]</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" href="#cb26-1" data-line-number="1"><span class="cf">for</span> (index <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(bestBins)) {</a>
<a class="sourceLine" id="cb26-2" href="#cb26-2" data-line-number="2"><span class="co">#for (index in 1:27) {</span></a>
<a class="sourceLine" id="cb26-3" href="#cb26-3" data-line-number="3">  name &lt;-<span class="st"> </span>bestBins<span class="op">$</span>variable[index][[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb26-4" href="#cb26-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb26-5" href="#cb26-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">&quot;--------------------&quot;</span>,</a>
<a class="sourceLine" id="cb26-6" href="#cb26-6" data-line-number="6">      index,</a>
<a class="sourceLine" id="cb26-7" href="#cb26-7" data-line-number="7">      <span class="st">&quot;--&quot;</span>,</a>
<a class="sourceLine" id="cb26-8" href="#cb26-8" data-line-number="8">      name, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb26-9" href="#cb26-9" data-line-number="9">  </a>
<a class="sourceLine" id="cb26-10" href="#cb26-10" data-line-number="10">  ltIndex &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">names</span>(loansTraining) <span class="op">==</span><span class="st"> </span>name)</a>
<a class="sourceLine" id="cb26-11" href="#cb26-11" data-line-number="11">  </a>
<a class="sourceLine" id="cb26-12" href="#cb26-12" data-line-number="12">  characteristic &lt;-<span class="st"> </span><span class="kw">categoriseFromWoE</span>(<span class="dt">df =</span> loansTraining[, ltIndex],</a>
<a class="sourceLine" id="cb26-13" href="#cb26-13" data-line-number="13">                                      <span class="dt">varName =</span>  name,</a>
<a class="sourceLine" id="cb26-14" href="#cb26-14" data-line-number="14">                                      <span class="dt">woeTable =</span> bestBins<span class="op">$</span>WoE[index][[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb26-15" href="#cb26-15" data-line-number="15">  </a>
<a class="sourceLine" id="cb26-16" href="#cb26-16" data-line-number="16">  bins &lt;-<span class="st"> </span><span class="kw">categoriseFromWoE.Wide</span>(<span class="dt">df =</span> loansTraining[, ltIndex],</a>
<a class="sourceLine" id="cb26-17" href="#cb26-17" data-line-number="17">                                 <span class="dt">varName =</span>  name,</a>
<a class="sourceLine" id="cb26-18" href="#cb26-18" data-line-number="18">                                 <span class="dt">woeTable =</span> bestBins<span class="op">$</span>WoE[index][[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb26-19" href="#cb26-19" data-line-number="19">  </a>
<a class="sourceLine" id="cb26-20" href="#cb26-20" data-line-number="20">  allFactorsAsCharacteristics &lt;-</a>
<a class="sourceLine" id="cb26-21" href="#cb26-21" data-line-number="21"><span class="st">    </span>allFactorsAsCharacteristics <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-22" href="#cb26-22" data-line-number="22"><span class="st">    </span><span class="kw">cbind</span>(characteristic)</a>
<a class="sourceLine" id="cb26-23" href="#cb26-23" data-line-number="23">  </a>
<a class="sourceLine" id="cb26-24" href="#cb26-24" data-line-number="24">  </a>
<a class="sourceLine" id="cb26-25" href="#cb26-25" data-line-number="25">  allFactorsAsBins &lt;-</a>
<a class="sourceLine" id="cb26-26" href="#cb26-26" data-line-number="26"><span class="st">    </span>allFactorsAsBins <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-27" href="#cb26-27" data-line-number="27"><span class="st">    </span><span class="kw">cbind</span>(bins)</a>
<a class="sourceLine" id="cb26-28" href="#cb26-28" data-line-number="28">  </a>
<a class="sourceLine" id="cb26-29" href="#cb26-29" data-line-number="29">}</a></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb27-1" href="#cb27-1" data-line-number="1">## -------------------- 1 -- loan_amnt </a>
<a class="sourceLine" id="cb27-2" href="#cb27-2" data-line-number="2">## -------------------- 2 -- verification_status </a>
<a class="sourceLine" id="cb27-3" href="#cb27-3" data-line-number="3">## -------------------- 3 -- issue_d </a>
<a class="sourceLine" id="cb27-4" href="#cb27-4" data-line-number="4">## -------------------- 4 -- dti </a>
<a class="sourceLine" id="cb27-5" href="#cb27-5" data-line-number="5">## -------------------- 5 -- inq_last_6mths </a>
<a class="sourceLine" id="cb27-6" href="#cb27-6" data-line-number="6">## -------------------- 6 -- revol_util </a>
<a class="sourceLine" id="cb27-7" href="#cb27-7" data-line-number="7">## -------------------- 7 -- open_rv_12m </a>
<a class="sourceLine" id="cb27-8" href="#cb27-8" data-line-number="8">## -------------------- 8 -- open_rv_24m </a>
<a class="sourceLine" id="cb27-9" href="#cb27-9" data-line-number="9">## -------------------- 9 -- max_bal_bc </a>
<a class="sourceLine" id="cb27-10" href="#cb27-10" data-line-number="10">## -------------------- 10 -- avg_cur_bal </a>
<a class="sourceLine" id="cb27-11" href="#cb27-11" data-line-number="11">## -------------------- 11 -- bc_open_to_buy </a>
<a class="sourceLine" id="cb27-12" href="#cb27-12" data-line-number="12">## -------------------- 12 -- bc_util </a>
<a class="sourceLine" id="cb27-13" href="#cb27-13" data-line-number="13">## -------------------- 13 -- mo_sin_old_rev_tl_op </a>
<a class="sourceLine" id="cb27-14" href="#cb27-14" data-line-number="14">## -------------------- 14 -- mo_sin_rcnt_rev_tl_op </a>
<a class="sourceLine" id="cb27-15" href="#cb27-15" data-line-number="15">## -------------------- 15 -- mo_sin_rcnt_tl </a>
<a class="sourceLine" id="cb27-16" href="#cb27-16" data-line-number="16">## -------------------- 16 -- mort_acc </a>
<a class="sourceLine" id="cb27-17" href="#cb27-17" data-line-number="17">## -------------------- 17 -- mths_since_recent_bc </a>
<a class="sourceLine" id="cb27-18" href="#cb27-18" data-line-number="18">## -------------------- 18 -- mths_since_recent_inq </a>
<a class="sourceLine" id="cb27-19" href="#cb27-19" data-line-number="19">## -------------------- 19 -- num_actv_rev_tl </a>
<a class="sourceLine" id="cb27-20" href="#cb27-20" data-line-number="20">## -------------------- 20 -- num_rev_tl_bal_gt_0 </a>
<a class="sourceLine" id="cb27-21" href="#cb27-21" data-line-number="21">## -------------------- 21 -- num_tl_op_past_12m </a>
<a class="sourceLine" id="cb27-22" href="#cb27-22" data-line-number="22">## -------------------- 22 -- percent_bc_gt_75 </a>
<a class="sourceLine" id="cb27-23" href="#cb27-23" data-line-number="23">## -------------------- 23 -- tot_hi_cred_lim </a>
<a class="sourceLine" id="cb27-24" href="#cb27-24" data-line-number="24">## -------------------- 24 -- total_bc_limit </a>
<a class="sourceLine" id="cb27-25" href="#cb27-25" data-line-number="25">## -------------------- 25 -- issue_d2 </a>
<a class="sourceLine" id="cb27-26" href="#cb27-26" data-line-number="26">## -------------------- 26 -- issue_d3</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" href="#cb28-1" data-line-number="1"><span class="kw">saveRDS</span>(allFactorsAsCharacteristics, <span class="st">&quot;datasets/allCharacteristics100.rds&quot;</span>) ; <span class="kw">saveRDS</span>(allFactorsAsBins, <span class="st">&quot;datasets/allBins100.rds&quot;</span>)</a></code></pre></div>
<p></p>
</div>
<div id="comparison-of-individual-characteristics" class="section level3">
<h3><span class="header-section-number">3.3.4</span> Comparison of individual characteristics</h3>
<blockquote>
<p>[TODO]
Present data by order of IV
Sort WoE buildup for key IV</p>
</blockquote>
<ul>
<li><p>re-train secures the lowest Akaike criterion and will be chosen.</p></li>
<li><p>On this test, the best variables are: SORT BY IV. Then WoE for the first few ones.</p></li>
</ul>
<p></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" href="#cb29-1" data-line-number="1">loansBinning &lt;-<span class="st"> </span>loans20 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb29-2" href="#cb29-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb29-3" href="#cb29-3" data-line-number="3">    <span class="dt">home_ownership =</span> <span class="kw">as_factor</span>(home_ownership),</a>
<a class="sourceLine" id="cb29-4" href="#cb29-4" data-line-number="4">    <span class="dt">emp_length =</span> <span class="kw">as_factor</span>(emp_length)</a>
<a class="sourceLine" id="cb29-5" href="#cb29-5" data-line-number="5">  )</a>
<a class="sourceLine" id="cb29-6" href="#cb29-6" data-line-number="6"></a>
<a class="sourceLine" id="cb29-7" href="#cb29-7" data-line-number="7">best10 &lt;-<span class="st"> </span>bestBins <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb29-8" href="#cb29-8" data-line-number="8"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(IV)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb29-9" href="#cb29-9" data-line-number="9"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a></code></pre></div>
<p></p>
<div id="dti" class="section level4">
<h4><span class="header-section-number">3.3.4.1</span> dti</h4>
<p></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" href="#cb30-1" data-line-number="1">plotBinWoE &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">n =</span> <span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb30-2" href="#cb30-2" data-line-number="2">  vName &lt;-<span class="st"> </span>best10[n,]<span class="op">$</span>variable</a>
<a class="sourceLine" id="cb30-3" href="#cb30-3" data-line-number="3">  </a>
<a class="sourceLine" id="cb30-4" href="#cb30-4" data-line-number="4">  <span class="cf">if</span> (best10[n,]<span class="op">$</span>type <span class="op">==</span><span class="st"> &quot;numeric&quot;</span>) {</a>
<a class="sourceLine" id="cb30-5" href="#cb30-5" data-line-number="5">    best10[n,]<span class="op">$</span>WoE[[<span class="dv">1</span>]] <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb30-6" href="#cb30-6" data-line-number="6"><span class="st">      </span><span class="kw">arrange</span>(WoE) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb30-7" href="#cb30-7" data-line-number="7"><span class="st">      </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(Name, WoE)) <span class="op">+</span></a>
<a class="sourceLine" id="cb30-8" href="#cb30-8" data-line-number="8"><span class="st">      </span><span class="kw">geom_col</span>(<span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb30-9" href="#cb30-9" data-line-number="9"><span class="st">      </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb30-10" href="#cb30-10" data-line-number="10"><span class="st">      </span><span class="kw">ggtitle</span>(vName)</a>
<a class="sourceLine" id="cb30-11" href="#cb30-11" data-line-number="11">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb30-12" href="#cb30-12" data-line-number="12">    best10[n,]<span class="op">$</span>WoE[[<span class="dv">1</span>]] <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb30-13" href="#cb30-13" data-line-number="13"><span class="st">      </span><span class="kw">arrange</span>(WoE) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb30-14" href="#cb30-14" data-line-number="14"><span class="st">      </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(Name, WoE)) <span class="op">+</span></a>
<a class="sourceLine" id="cb30-15" href="#cb30-15" data-line-number="15"><span class="st">      </span><span class="kw">geom_col</span>(<span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb30-16" href="#cb30-16" data-line-number="16"><span class="st">      </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb30-17" href="#cb30-17" data-line-number="17"><span class="st">      </span><span class="kw">ggtitle</span>(vName)</a>
<a class="sourceLine" id="cb30-18" href="#cb30-18" data-line-number="18">    </a>
<a class="sourceLine" id="cb30-19" href="#cb30-19" data-line-number="19">  }</a>
<a class="sourceLine" id="cb30-20" href="#cb30-20" data-line-number="20">  </a>
<a class="sourceLine" id="cb30-21" href="#cb30-21" data-line-number="21">}</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" href="#cb31-1" data-line-number="1"><span class="kw">plotBinWoE</span>(<span class="dv">10</span>)</a></code></pre></div>
<p><img src="build/figure/graphics-unnamed-chunk-7-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p></p>
</div>
<div id="home-ownership" class="section level4">
<h4><span class="header-section-number">3.3.4.2</span> Home ownership</h4>
<p></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" href="#cb32-1" data-line-number="1">resultHome &lt;-<span class="st"> </span><span class="kw">WoETable</span>(</a>
<a class="sourceLine" id="cb32-2" href="#cb32-2" data-line-number="2">  <span class="dt">df =</span> loansBinning,</a>
<a class="sourceLine" id="cb32-3" href="#cb32-3" data-line-number="3">  <span class="dt">x =</span> <span class="st">&quot;home_ownership&quot;</span>,</a>
<a class="sourceLine" id="cb32-4" href="#cb32-4" data-line-number="4">  <span class="dt">y =</span> <span class="st">&quot;isGoodLoan&quot;</span>,</a>
<a class="sourceLine" id="cb32-5" href="#cb32-5" data-line-number="5">  <span class="dt">maxCategories =</span> <span class="dv">20</span></a>
<a class="sourceLine" id="cb32-6" href="#cb32-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb32-7" href="#cb32-7" data-line-number="7"></a>
<a class="sourceLine" id="cb32-8" href="#cb32-8" data-line-number="8">resultHome</a></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb33-1" href="#cb33-1" data-line-number="1">## $IV</a>
<a class="sourceLine" id="cb33-2" href="#cb33-2" data-line-number="2">## [1] 0.03159041</a>
<a class="sourceLine" id="cb33-3" href="#cb33-3" data-line-number="3">## </a>
<a class="sourceLine" id="cb33-4" href="#cb33-4" data-line-number="4">## $type</a>
<a class="sourceLine" id="cb33-5" href="#cb33-5" data-line-number="5">## [1] &quot;categorical&quot;</a>
<a class="sourceLine" id="cb33-6" href="#cb33-6" data-line-number="6">## </a>
<a class="sourceLine" id="cb33-7" href="#cb33-7" data-line-number="7">## $table</a>
<a class="sourceLine" id="cb33-8" href="#cb33-8" data-line-number="8">## # A tibble: 6 x 19</a>
<a class="sourceLine" id="cb33-9" href="#cb33-9" data-line-number="9">##   home_ownership Name   Count nGood  nBad cumCount cumGood cumBad pctCount pctGood  pctBad OddsInBin LnOddsInBin WoEInBin IVInBin</a>
<a class="sourceLine" id="cb33-10" href="#cb33-10" data-line-number="10">##   &lt;chr&gt;          &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;</a>
<a class="sourceLine" id="cb33-11" href="#cb33-11" data-line-number="11">## 1 ANY            ANY       48    41     7       48      41      7  2.30e-4 2.46e-4 1.66e-4      5.86        1.77     1.77       0</a>
<a class="sourceLine" id="cb33-12" href="#cb33-12" data-line-number="12">## 2 MORTGAGE       MORT… 103381 85422 17959   103429   85463  17966  4.95e-1 5.12e-1 4.27e-1      4.76        1.56     1.56       0</a>
<a class="sourceLine" id="cb33-13" href="#cb33-13" data-line-number="13">## 3 NONE           NONE       6     5     1   103435   85468  17967  2.87e-5 2.99e-5 2.38e-5      5.          1.61     1.61       0</a>
<a class="sourceLine" id="cb33-14" href="#cb33-14" data-line-number="14">## 4 OTHER          OTHER     25    20     5   103460   85488  17972  1.20e-4 1.20e-4 1.19e-4      4.          1.39     1.39       0</a>
<a class="sourceLine" id="cb33-15" href="#cb33-15" data-line-number="15">## 5 OWN            OWN    22153 17646  4507   125613  103134  22479  1.06e-1 1.06e-1 1.07e-1      3.92        1.36     1.36       0</a>
<a class="sourceLine" id="cb33-16" href="#cb33-16" data-line-number="16">## 6 RENT           RENT   83403 63839 19564   209016  166973  42043  3.99e-1 3.82e-1 4.65e-1      3.26        1.18     1.18       0</a>
<a class="sourceLine" id="cb33-17" href="#cb33-17" data-line-number="17">## # … with 4 more variables: WoE &lt;dbl&gt;, IV &lt;dbl&gt;, pctGoodBin &lt;dbl&gt;, pctBadBin &lt;dbl&gt;</a></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" href="#cb34-1" data-line-number="1">resultHome<span class="op">$</span>IV</a></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb35-1" href="#cb35-1" data-line-number="1">## [1] 0.03159041</a></code></pre></div>
<p></p>
</div>
<div id="verification-status" class="section level4">
<h4><span class="header-section-number">3.3.4.3</span> Verification Status</h4>
<p></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" href="#cb36-1" data-line-number="1">resultVerif &lt;-<span class="st"> </span><span class="kw">WoETable</span>(</a>
<a class="sourceLine" id="cb36-2" href="#cb36-2" data-line-number="2">  <span class="dt">df =</span> loansBinning,</a>
<a class="sourceLine" id="cb36-3" href="#cb36-3" data-line-number="3">  <span class="dt">x =</span> <span class="st">&quot;verification_status&quot;</span>,</a>
<a class="sourceLine" id="cb36-4" href="#cb36-4" data-line-number="4">  <span class="dt">y =</span> <span class="st">&quot;isGoodLoan&quot;</span>,</a>
<a class="sourceLine" id="cb36-5" href="#cb36-5" data-line-number="5">  <span class="dt">maxCategories =</span> <span class="dv">20</span></a>
<a class="sourceLine" id="cb36-6" href="#cb36-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb36-7" href="#cb36-7" data-line-number="7"></a>
<a class="sourceLine" id="cb36-8" href="#cb36-8" data-line-number="8">resultVerif</a></code></pre></div>
<div class="sourceCode" id="cb37"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb37-1" href="#cb37-1" data-line-number="1">## $IV</a>
<a class="sourceLine" id="cb37-2" href="#cb37-2" data-line-number="2">## [1] 0.05906488</a>
<a class="sourceLine" id="cb37-3" href="#cb37-3" data-line-number="3">## </a>
<a class="sourceLine" id="cb37-4" href="#cb37-4" data-line-number="4">## $type</a>
<a class="sourceLine" id="cb37-5" href="#cb37-5" data-line-number="5">## [1] &quot;categorical&quot;</a>
<a class="sourceLine" id="cb37-6" href="#cb37-6" data-line-number="6">## </a>
<a class="sourceLine" id="cb37-7" href="#cb37-7" data-line-number="7">## $table</a>
<a class="sourceLine" id="cb37-8" href="#cb37-8" data-line-number="8">## # A tibble: 3 x 19</a>
<a class="sourceLine" id="cb37-9" href="#cb37-9" data-line-number="9">##   verification_st… Name  Count nGood  nBad cumCount cumGood cumBad pctCount pctGood pctBad OddsInBin LnOddsInBin WoEInBin IVInBin</a>
<a class="sourceLine" id="cb37-10" href="#cb37-10" data-line-number="10">##   &lt;chr&gt;            &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;</a>
<a class="sourceLine" id="cb37-11" href="#cb37-11" data-line-number="11">## 1 Not Verified     Not … 62900 53692  9208    62900   53692   9208    0.301   0.322  0.219      5.83        1.76     1.76       0</a>
<a class="sourceLine" id="cb37-12" href="#cb37-12" data-line-number="12">## 2 Source Verified  Sour… 80857 63762 17095   143757  117454  26303    0.387   0.382  0.407      3.73        1.32     1.32       0</a>
<a class="sourceLine" id="cb37-13" href="#cb37-13" data-line-number="13">## 3 Verified         Veri… 65259 49519 15740   209016  166973  42043    0.312   0.297  0.374      3.15        1.15     1.15       0</a>
<a class="sourceLine" id="cb37-14" href="#cb37-14" data-line-number="14">## # … with 4 more variables: WoE &lt;dbl&gt;, IV &lt;dbl&gt;, pctGoodBin &lt;dbl&gt;, pctBadBin &lt;dbl&gt;</a></code></pre></div>
<div class="sourceCode" id="cb38"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" href="#cb38-1" data-line-number="1">resultVerif<span class="op">$</span>IV</a></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb39-1" href="#cb39-1" data-line-number="1">## [1] 0.05906488</a></code></pre></div>
<p></p>
</div>
<div id="purpose-1" class="section level4">
<h4><span class="header-section-number">3.3.4.4</span> Purpose</h4>
<p></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" href="#cb40-1" data-line-number="1">resultHome &lt;-<span class="st"> </span><span class="kw">WoETable</span>(</a>
<a class="sourceLine" id="cb40-2" href="#cb40-2" data-line-number="2">  <span class="dt">df =</span> loansBinning,</a>
<a class="sourceLine" id="cb40-3" href="#cb40-3" data-line-number="3">  <span class="dt">x =</span> <span class="st">&quot;purpose&quot;</span>,</a>
<a class="sourceLine" id="cb40-4" href="#cb40-4" data-line-number="4">  <span class="dt">y =</span> <span class="st">&quot;isGoodLoan&quot;</span>,</a>
<a class="sourceLine" id="cb40-5" href="#cb40-5" data-line-number="5">  <span class="dt">maxCategories =</span> <span class="dv">20</span></a>
<a class="sourceLine" id="cb40-6" href="#cb40-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb40-7" href="#cb40-7" data-line-number="7"></a>
<a class="sourceLine" id="cb40-8" href="#cb40-8" data-line-number="8">resultHome</a></code></pre></div>
<div class="sourceCode" id="cb41"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb41-1" href="#cb41-1" data-line-number="1">## $IV</a>
<a class="sourceLine" id="cb41-2" href="#cb41-2" data-line-number="2">## [1] 0.01762216</a>
<a class="sourceLine" id="cb41-3" href="#cb41-3" data-line-number="3">## </a>
<a class="sourceLine" id="cb41-4" href="#cb41-4" data-line-number="4">## $type</a>
<a class="sourceLine" id="cb41-5" href="#cb41-5" data-line-number="5">## [1] &quot;categorical&quot;</a>
<a class="sourceLine" id="cb41-6" href="#cb41-6" data-line-number="6">## </a>
<a class="sourceLine" id="cb41-7" href="#cb41-7" data-line-number="7">## $table</a>
<a class="sourceLine" id="cb41-8" href="#cb41-8" data-line-number="8">## # A tibble: 14 x 19</a>
<a class="sourceLine" id="cb41-9" href="#cb41-9" data-line-number="9">##    purpose Name   Count nGood  nBad cumCount cumGood cumBad pctCount pctGood  pctBad OddsInBin LnOddsInBin WoEInBin IVInBin</a>
<a class="sourceLine" id="cb41-10" href="#cb41-10" data-line-number="10">##    &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;</a>
<a class="sourceLine" id="cb41-11" href="#cb41-11" data-line-number="11">##  1 car     car     2245  1917   328     2245    1917    328 0.0107   1.15e-2 7.80e-3      5.84       1.77     1.77        0</a>
<a class="sourceLine" id="cb41-12" href="#cb41-12" data-line-number="12">##  2 credit… cred…  45514 37704  7810    47759   39621   8138 0.218    2.26e-1 1.86e-1      4.83       1.57     1.57        0</a>
<a class="sourceLine" id="cb41-13" href="#cb41-13" data-line-number="13">##  3 debt_c… debt… 121629 95832 25797   169388  135453  33935 0.582    5.74e-1 6.14e-1      3.71       1.31     1.31        0</a>
<a class="sourceLine" id="cb41-14" href="#cb41-14" data-line-number="14">##  4 educat… educ…     71    57    14   169459  135510  33949 0.000340 3.41e-4 3.33e-4      4.07       1.40     1.40        0</a>
<a class="sourceLine" id="cb41-15" href="#cb41-15" data-line-number="15">##  5 home_i… home…  13711 11216  2495   183170  146726  36444 0.0656   6.72e-2 5.93e-2      4.50       1.50     1.50        0</a>
<a class="sourceLine" id="cb41-16" href="#cb41-16" data-line-number="16">##  6 house   house   1141   904   237   184311  147630  36681 0.00546  5.41e-3 5.64e-3      3.81       1.34     1.34        0</a>
<a class="sourceLine" id="cb41-17" href="#cb41-17" data-line-number="17">##  7 major_… majo…   4505  3664   841   188816  151294  37522 0.0216   2.19e-2 2.00e-2      4.36       1.47     1.47        0</a>
<a class="sourceLine" id="cb41-18" href="#cb41-18" data-line-number="18">##  8 medical medi…   2405  1872   533   191221  153166  38055 0.0115   1.12e-2 1.27e-2      3.51       1.26     1.26        0</a>
<a class="sourceLine" id="cb41-19" href="#cb41-19" data-line-number="19">##  9 moving  movi…   1505  1129   376   192726  154295  38431 0.00720  6.76e-3 8.94e-3      3.00       1.10     1.10        0</a>
<a class="sourceLine" id="cb41-20" href="#cb41-20" data-line-number="20">## 10 other   other  12001  9425  2576   204727  163720  41007 0.0574   5.64e-2 6.13e-2      3.66       1.30     1.30        0</a>
<a class="sourceLine" id="cb41-21" href="#cb41-21" data-line-number="21">## 11 renewa… rene…    134   107    27   204861  163827  41034 0.000641 6.41e-4 6.42e-4      3.96       1.38     1.38        0</a>
<a class="sourceLine" id="cb41-22" href="#cb41-22" data-line-number="22">## 12 small_… smal…   2374  1688   686   207235  165515  41720 0.0114   1.01e-2 1.63e-2      2.46       0.900    0.900       0</a>
<a class="sourceLine" id="cb41-23" href="#cb41-23" data-line-number="23">## 13 vacati… vaca…   1412  1137   275   208647  166652  41995 0.00676  6.81e-3 6.54e-3      4.13       1.42     1.42        0</a>
<a class="sourceLine" id="cb41-24" href="#cb41-24" data-line-number="24">## 14 wedding wedd…    369   321    48   209016  166973  42043 0.00177  1.92e-3 1.14e-3      6.69       1.90     1.90        0</a>
<a class="sourceLine" id="cb41-25" href="#cb41-25" data-line-number="25">## # … with 4 more variables: WoE &lt;dbl&gt;, IV &lt;dbl&gt;, pctGoodBin &lt;dbl&gt;, pctBadBin &lt;dbl&gt;</a></code></pre></div>
<div class="sourceCode" id="cb42"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" href="#cb42-1" data-line-number="1">resultHome<span class="op">$</span>IV</a></code></pre></div>
<div class="sourceCode" id="cb43"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb43-1" href="#cb43-1" data-line-number="1">## [1] 0.01762216</a></code></pre></div>
<p></p>
</div>
<div id="sub-grade" class="section level4">
<h4><span class="header-section-number">3.3.4.5</span> Sub grade</h4>
<p></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" href="#cb44-1" data-line-number="1">resultSubgrade &lt;-<span class="st"> </span><span class="kw">WoETable</span>(</a>
<a class="sourceLine" id="cb44-2" href="#cb44-2" data-line-number="2">  <span class="dt">df =</span> loansBinning,</a>
<a class="sourceLine" id="cb44-3" href="#cb44-3" data-line-number="3">  <span class="dt">x =</span> <span class="st">&quot;sub_grade&quot;</span>,</a>
<a class="sourceLine" id="cb44-4" href="#cb44-4" data-line-number="4">  <span class="dt">y =</span> <span class="st">&quot;isGoodLoan&quot;</span>,</a>
<a class="sourceLine" id="cb44-5" href="#cb44-5" data-line-number="5">  <span class="dt">maxCategories =</span> <span class="dv">50</span></a>
<a class="sourceLine" id="cb44-6" href="#cb44-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb44-7" href="#cb44-7" data-line-number="7"></a>
<a class="sourceLine" id="cb44-8" href="#cb44-8" data-line-number="8">resultSubgrade</a></code></pre></div>
<div class="sourceCode" id="cb45"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb45-1" href="#cb45-1" data-line-number="1">## $IV</a>
<a class="sourceLine" id="cb45-2" href="#cb45-2" data-line-number="2">## [1] 0.4980104</a>
<a class="sourceLine" id="cb45-3" href="#cb45-3" data-line-number="3">## </a>
<a class="sourceLine" id="cb45-4" href="#cb45-4" data-line-number="4">## $type</a>
<a class="sourceLine" id="cb45-5" href="#cb45-5" data-line-number="5">## [1] &quot;categorical&quot;</a>
<a class="sourceLine" id="cb45-6" href="#cb45-6" data-line-number="6">## </a>
<a class="sourceLine" id="cb45-7" href="#cb45-7" data-line-number="7">## $table</a>
<a class="sourceLine" id="cb45-8" href="#cb45-8" data-line-number="8">## # A tibble: 35 x 19</a>
<a class="sourceLine" id="cb45-9" href="#cb45-9" data-line-number="9">##    sub_grade Name  Count nGood  nBad cumCount cumGood cumBad pctCount pctGood  pctBad OddsInBin LnOddsInBin WoEInBin IVInBin   WoE</a>
<a class="sourceLine" id="cb45-10" href="#cb45-10" data-line-number="10">##    &lt;chr&gt;     &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;</a>
<a class="sourceLine" id="cb45-11" href="#cb45-11" data-line-number="11">##  1 A1        A1     6501  6297   204     6501    6297    204   0.0311  0.0377 0.00485     30.9         3.43     3.43       0 2.05 </a>
<a class="sourceLine" id="cb45-12" href="#cb45-12" data-line-number="12">##  2 A2        A2     5620  5344   276    12121   11641    480   0.0269  0.0320 0.00656     19.4         2.96     2.96       0 1.58 </a>
<a class="sourceLine" id="cb45-13" href="#cb45-13" data-line-number="13">##  3 A3        A3     5889  5582   307    18010   17223    787   0.0282  0.0334 0.00730     18.2         2.90     2.90       0 1.52 </a>
<a class="sourceLine" id="cb45-14" href="#cb45-14" data-line-number="14">##  4 A4        A4     8159  7578   581    26169   24801   1368   0.0390  0.0454 0.0138      13.0         2.57     2.57       0 1.19 </a>
<a class="sourceLine" id="cb45-15" href="#cb45-15" data-line-number="15">##  5 A5        A5    10020  9171   849    36189   33972   2217   0.0479  0.0549 0.0202      10.8         2.38     2.38       0 1.00 </a>
<a class="sourceLine" id="cb45-16" href="#cb45-16" data-line-number="16">##  6 B1        B1    10934  9743  1191    47123   43715   3408   0.0523  0.0584 0.0283       8.18        2.10     2.10       0 0.723</a>
<a class="sourceLine" id="cb45-17" href="#cb45-17" data-line-number="17">##  7 B2        B2    11345 10101  1244    58468   53816   4652   0.0543  0.0605 0.0296       8.12        2.09     2.09       0 0.715</a>
<a class="sourceLine" id="cb45-18" href="#cb45-18" data-line-number="18">##  8 B3        B3    12838 11186  1652    71306   65002   6304   0.0614  0.0670 0.0393       6.77        1.91     1.91       0 0.534</a>
<a class="sourceLine" id="cb45-19" href="#cb45-19" data-line-number="19">##  9 B4        B4    12895 10959  1936    84201   75961   8240   0.0617  0.0656 0.0460       5.66        1.73     1.73       0 0.354</a>
<a class="sourceLine" id="cb45-20" href="#cb45-20" data-line-number="20">## 10 B5        B5    12882 10749  2133    97083   86710  10373   0.0616  0.0644 0.0507       5.04        1.62     1.62       0 0.238</a>
<a class="sourceLine" id="cb45-21" href="#cb45-21" data-line-number="21">## # … with 25 more rows, and 3 more variables: IV &lt;dbl&gt;, pctGoodBin &lt;dbl&gt;, pctBadBin &lt;dbl&gt;</a></code></pre></div>
<div class="sourceCode" id="cb46"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" href="#cb46-1" data-line-number="1">resultSubgrade<span class="op">$</span>IV</a></code></pre></div>
<div class="sourceCode" id="cb47"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb47-1" href="#cb47-1" data-line-number="1">## [1] 0.4980104</a></code></pre></div>
<p></p>
</div>
<div id="employment-years" class="section level4">
<h4><span class="header-section-number">3.3.4.6</span> Employment years</h4>
<p></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" href="#cb48-1" data-line-number="1">resultEmp &lt;-<span class="st"> </span><span class="kw">WoETable</span>(</a>
<a class="sourceLine" id="cb48-2" href="#cb48-2" data-line-number="2">  <span class="dt">df =</span> loansBinning,</a>
<a class="sourceLine" id="cb48-3" href="#cb48-3" data-line-number="3">  <span class="dt">x =</span> <span class="st">&quot;emp_length&quot;</span>,</a>
<a class="sourceLine" id="cb48-4" href="#cb48-4" data-line-number="4">  <span class="dt">y =</span> <span class="st">&quot;isGoodLoan&quot;</span>,</a>
<a class="sourceLine" id="cb48-5" href="#cb48-5" data-line-number="5">  <span class="dt">maxCategories =</span> <span class="dv">20</span></a>
<a class="sourceLine" id="cb48-6" href="#cb48-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb48-7" href="#cb48-7" data-line-number="7"></a>
<a class="sourceLine" id="cb48-8" href="#cb48-8" data-line-number="8">resultEmp</a></code></pre></div>
<div class="sourceCode" id="cb49"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb49-1" href="#cb49-1" data-line-number="1">## $IV</a>
<a class="sourceLine" id="cb49-2" href="#cb49-2" data-line-number="2">## [1] NaN</a>
<a class="sourceLine" id="cb49-3" href="#cb49-3" data-line-number="3">## </a>
<a class="sourceLine" id="cb49-4" href="#cb49-4" data-line-number="4">## $type</a>
<a class="sourceLine" id="cb49-5" href="#cb49-5" data-line-number="5">## [1] &quot;categorical&quot;</a>
<a class="sourceLine" id="cb49-6" href="#cb49-6" data-line-number="6">## </a>
<a class="sourceLine" id="cb49-7" href="#cb49-7" data-line-number="7">## $table</a>
<a class="sourceLine" id="cb49-8" href="#cb49-8" data-line-number="8">## # A tibble: 9 x 19</a>
<a class="sourceLine" id="cb49-9" href="#cb49-9" data-line-number="9">##   emp_length Name  Count nGood  nBad cumCount cumGood cumBad pctCount pctGood pctBad OddsInBin LnOddsInBin WoEInBin IVInBin</a>
<a class="sourceLine" id="cb49-10" href="#cb49-10" data-line-number="10">##   &lt;chr&gt;      &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;</a>
<a class="sourceLine" id="cb49-11" href="#cb49-11" data-line-number="11">## 1 2          2     19170 15398  3772    19170   15398   3772   0.0917  0.0922 0.0897      4.08        1.41     1.41       0</a>
<a class="sourceLine" id="cb49-12" href="#cb49-12" data-line-number="12">## 2 3          3     16645 13222  3423    35815   28620   7195   0.0796  0.0792 0.0814      3.86        1.35     1.35       0</a>
<a class="sourceLine" id="cb49-13" href="#cb49-13" data-line-number="13">## 3 4          4     12601 10185  2416    48416   38805   9611   0.0603  0.0610 0.0575      4.22        1.44     1.44       0</a>
<a class="sourceLine" id="cb49-14" href="#cb49-14" data-line-number="14">## 4 5          5     13032 10426  2606    61448   49231  12217   0.0623  0.0624 0.0620      4.00        1.39     1.39       0</a>
<a class="sourceLine" id="cb49-15" href="#cb49-15" data-line-number="15">## 5 6          6      9815  7944  1871    71263   57175  14088   0.0470  0.0476 0.0445      4.25        1.45     1.45       0</a>
<a class="sourceLine" id="cb49-16" href="#cb49-16" data-line-number="16">## 6 7          7      9295  7409  1886    80558   64584  15974   0.0445  0.0444 0.0449      3.93        1.37     1.37       0</a>
<a class="sourceLine" id="cb49-17" href="#cb49-17" data-line-number="17">## 7 8          8      9487  7567  1920    90045   72151  17894   0.0454  0.0453 0.0457      3.94        1.37     1.37       0</a>
<a class="sourceLine" id="cb49-18" href="#cb49-18" data-line-number="18">## 8 9          9      7675  6172  1503    97720   78323  19397   0.0367  0.0370 0.0357      4.11        1.41     1.41       0</a>
<a class="sourceLine" id="cb49-19" href="#cb49-19" data-line-number="19">## 9 0          0         0     0     0    97720   78323  19397   0       0      0         NaN         NaN      NaN        NaN</a>
<a class="sourceLine" id="cb49-20" href="#cb49-20" data-line-number="20">## # … with 4 more variables: WoE &lt;dbl&gt;, IV &lt;dbl&gt;, pctGoodBin &lt;dbl&gt;, pctBadBin &lt;dbl&gt;</a></code></pre></div>
<div class="sourceCode" id="cb50"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" href="#cb50-1" data-line-number="1">resultEmp<span class="op">$</span>IV</a></code></pre></div>
<div class="sourceCode" id="cb51"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb51-1" href="#cb51-1" data-line-number="1">## [1] NaN</a></code></pre></div>
<p></p>
</div>
<div id="bank-card-utilisation" class="section level4">
<h4><span class="header-section-number">3.3.4.7</span> Bank card utilisation</h4>
<p></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" href="#cb52-1" data-line-number="1">resultBC &lt;-<span class="st"> </span><span class="kw">WoETable</span>(</a>
<a class="sourceLine" id="cb52-2" href="#cb52-2" data-line-number="2">  <span class="dt">df =</span> loansBinning,</a>
<a class="sourceLine" id="cb52-3" href="#cb52-3" data-line-number="3">  <span class="dt">x =</span> <span class="st">&quot;bc_util&quot;</span>,</a>
<a class="sourceLine" id="cb52-4" href="#cb52-4" data-line-number="4">  <span class="dt">y =</span> <span class="st">&quot;isGoodLoan&quot;</span>,</a>
<a class="sourceLine" id="cb52-5" href="#cb52-5" data-line-number="5">  <span class="dt">p =</span> <span class="fl">0.05</span></a>
<a class="sourceLine" id="cb52-6" href="#cb52-6" data-line-number="6">)</a></code></pre></div>
<div class="sourceCode" id="cb53"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb53-1" href="#cb53-1" data-line-number="1">## Number of missing/NA values:  10370</a></code></pre></div>
<div class="sourceCode" id="cb54"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" href="#cb54-1" data-line-number="1">resultBC</a></code></pre></div>
<div class="sourceCode" id="cb55"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb55-1" href="#cb55-1" data-line-number="1">## $IV</a>
<a class="sourceLine" id="cb55-2" href="#cb55-2" data-line-number="2">## [1] 0.02918858</a>
<a class="sourceLine" id="cb55-3" href="#cb55-3" data-line-number="3">## </a>
<a class="sourceLine" id="cb55-4" href="#cb55-4" data-line-number="4">## $type</a>
<a class="sourceLine" id="cb55-5" href="#cb55-5" data-line-number="5">## [1] &quot;numeric&quot;</a>
<a class="sourceLine" id="cb55-6" href="#cb55-6" data-line-number="6">## </a>
<a class="sourceLine" id="cb55-7" href="#cb55-7" data-line-number="7">## $table</a>
<a class="sourceLine" id="cb55-8" href="#cb55-8" data-line-number="8">## # A tibble: 7 x 23</a>
<a class="sourceLine" id="cb55-9" href="#cb55-9" data-line-number="9">##   CutNumber CutPoint name     Min   Max Count nGood  nBad cumCount cumGood cumBad pctCount pctGood pctBad OddsInBin LnOddsInBin</a>
<a class="sourceLine" id="cb55-10" href="#cb55-10" data-line-number="10">##       &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;</a>
<a class="sourceLine" id="cb55-11" href="#cb55-11" data-line-number="11">## 1         1     31.5 &quot;&quot;    -Inf    31.5 37880 31697  6183    37880   31697   6183   0.181   0.190  0.147       5.13        1.63</a>
<a class="sourceLine" id="cb55-12" href="#cb55-12" data-line-number="12">## 2         2     52.2 &quot;&quot;      31.5  52.2 38014 30989  7025    75894   62686  13208   0.182   0.186  0.167       4.41        1.48</a>
<a class="sourceLine" id="cb55-13" href="#cb55-13" data-line-number="13">## 3         3     76.1 &quot;&quot;      52.2  76.1 52106 41337 10769   128000  104023  23977   0.249   0.248  0.256       3.84        1.35</a>
<a class="sourceLine" id="cb55-14" href="#cb55-14" data-line-number="14">## 4         4     90.8 &quot;&quot;      76.1  90.8 36497 28541  7956   164497  132564  31933   0.175   0.171  0.189       3.59        1.28</a>
<a class="sourceLine" id="cb55-15" href="#cb55-15" data-line-number="15">## 5         5     95.4 &quot;&quot;      90.8  95.4 14346 10999  3347   178843  143563  35280   0.0686  0.0659 0.0796      3.29        1.19</a>
<a class="sourceLine" id="cb55-16" href="#cb55-16" data-line-number="16">## 6         6    203.  &quot;&quot;      95.4 203.  19803 14780  5023   198646  158343  40303   0.0947  0.0885 0.119       2.94        1.08</a>
<a class="sourceLine" id="cb55-17" href="#cb55-17" data-line-number="17">## 7         7     NA   &lt;NA&gt;    NA    NA   10370  8630  1740   209016  166973  42043   0.0496  0.0517 0.0414      4.96        1.60</a>
<a class="sourceLine" id="cb55-18" href="#cb55-18" data-line-number="18">## # … with 7 more variables: WoEInBin &lt;dbl&gt;, IVInBin &lt;dbl&gt;, WoE &lt;dbl&gt;, IV &lt;dbl&gt;, Name &lt;chr&gt;, pctGoodBin &lt;dbl&gt;, pctBadBin &lt;dbl&gt;</a></code></pre></div>
<div class="sourceCode" id="cb56"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" href="#cb56-1" data-line-number="1">resultBC<span class="op">$</span>IV</a></code></pre></div>
<div class="sourceCode" id="cb57"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb57-1" href="#cb57-1" data-line-number="1">## [1] 0.02918858</a></code></pre></div>
<p></p>
</div>
<div id="state" class="section level4">
<h4><span class="header-section-number">3.3.4.8</span> State</h4>
<p></p>
<div class="sourceCode" id="cb58"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" href="#cb58-1" data-line-number="1">resultState &lt;-<span class="st"> </span><span class="kw">WoETable</span>(</a>
<a class="sourceLine" id="cb58-2" href="#cb58-2" data-line-number="2">  <span class="dt">df =</span> loansBinning,</a>
<a class="sourceLine" id="cb58-3" href="#cb58-3" data-line-number="3">  <span class="dt">x =</span> <span class="st">&quot;addr_state&quot;</span>,</a>
<a class="sourceLine" id="cb58-4" href="#cb58-4" data-line-number="4">  <span class="dt">y =</span> <span class="st">&quot;isGoodLoan&quot;</span>,</a>
<a class="sourceLine" id="cb58-5" href="#cb58-5" data-line-number="5">  <span class="dt">maxCategories =</span> <span class="dv">100</span></a>
<a class="sourceLine" id="cb58-6" href="#cb58-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb58-7" href="#cb58-7" data-line-number="7"></a>
<a class="sourceLine" id="cb58-8" href="#cb58-8" data-line-number="8">resultState</a></code></pre></div>
<div class="sourceCode" id="cb59"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb59-1" href="#cb59-1" data-line-number="1">## $IV</a>
<a class="sourceLine" id="cb59-2" href="#cb59-2" data-line-number="2">## [1] 0.01744293</a>
<a class="sourceLine" id="cb59-3" href="#cb59-3" data-line-number="3">## </a>
<a class="sourceLine" id="cb59-4" href="#cb59-4" data-line-number="4">## $type</a>
<a class="sourceLine" id="cb59-5" href="#cb59-5" data-line-number="5">## [1] &quot;categorical&quot;</a>
<a class="sourceLine" id="cb59-6" href="#cb59-6" data-line-number="6">## </a>
<a class="sourceLine" id="cb59-7" href="#cb59-7" data-line-number="7">## $table</a>
<a class="sourceLine" id="cb59-8" href="#cb59-8" data-line-number="8">## # A tibble: 51 x 19</a>
<a class="sourceLine" id="cb59-9" href="#cb59-9" data-line-number="9">##    addr_state Name  Count nGood  nBad cumCount cumGood cumBad pctCount pctGood  pctBad OddsInBin LnOddsInBin WoEInBin IVInBin</a>
<a class="sourceLine" id="cb59-10" href="#cb59-10" data-line-number="10">##    &lt;chr&gt;      &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;</a>
<a class="sourceLine" id="cb59-11" href="#cb59-11" data-line-number="11">##  1 AK         AK      442   345    97      442     345     97  0.00211 0.00207 0.00231      3.56        1.27     1.27       0</a>
<a class="sourceLine" id="cb59-12" href="#cb59-12" data-line-number="12">##  2 AL         AL     2545  1973   572     2987    2318    669  0.0122  0.0118  0.0136       3.45        1.24     1.24       0</a>
<a class="sourceLine" id="cb59-13" href="#cb59-13" data-line-number="13">##  3 AR         AR     1543  1175   368     4530    3493   1037  0.00738 0.00704 0.00875      3.19        1.16     1.16       0</a>
<a class="sourceLine" id="cb59-14" href="#cb59-14" data-line-number="14">##  4 AZ         AZ     5214  4224   990     9744    7717   2027  0.0249  0.0253  0.0235       4.27        1.45     1.45       0</a>
<a class="sourceLine" id="cb59-15" href="#cb59-15" data-line-number="15">##  5 CA         CA    30732 24682  6050    40476   32399   8077  0.147   0.148   0.144        4.08        1.41     1.41       0</a>
<a class="sourceLine" id="cb59-16" href="#cb59-16" data-line-number="16">##  6 CO         CO     4633  3908   725    45109   36307   8802  0.0222  0.0234  0.0172       5.39        1.68     1.68       0</a>
<a class="sourceLine" id="cb59-17" href="#cb59-17" data-line-number="17">##  7 CT         CT     3024  2483   541    48133   38790   9343  0.0145  0.0149  0.0129       4.59        1.52     1.52       0</a>
<a class="sourceLine" id="cb59-18" href="#cb59-18" data-line-number="18">##  8 DC         DC      531   461    70    48664   39251   9413  0.00254 0.00276 0.00166      6.59        1.88     1.88       0</a>
<a class="sourceLine" id="cb59-19" href="#cb59-19" data-line-number="19">##  9 DE         DE      594   468   126    49258   39719   9539  0.00284 0.00280 0.00300      3.71        1.31     1.31       0</a>
<a class="sourceLine" id="cb59-20" href="#cb59-20" data-line-number="20">## 10 FL         FL    14906 11726  3180    64164   51445  12719  0.0713  0.0702  0.0756       3.69        1.30     1.30       0</a>
<a class="sourceLine" id="cb59-21" href="#cb59-21" data-line-number="21">## # … with 41 more rows, and 4 more variables: WoE &lt;dbl&gt;, IV &lt;dbl&gt;, pctGoodBin &lt;dbl&gt;, pctBadBin &lt;dbl&gt;</a></code></pre></div>
<div class="sourceCode" id="cb60"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" href="#cb60-1" data-line-number="1">resultState<span class="op">$</span>IV</a></code></pre></div>
<div class="sourceCode" id="cb61"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb61-1" href="#cb61-1" data-line-number="1">## [1] 0.01744293</a></code></pre></div>
<p></p>
</div>
<div id="annual-income" class="section level4">
<h4><span class="header-section-number">3.3.4.9</span> Annual income</h4>
<p></p>
<div class="sourceCode" id="cb62"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" href="#cb62-1" data-line-number="1"><span class="kw">which</span>(<span class="kw">names</span>(loansBinning) <span class="op">==</span><span class="st"> &quot;annual_inc_joint&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb63"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb63-1" href="#cb63-1" data-line-number="1">## [1] 25</a></code></pre></div>
<div class="sourceCode" id="cb64"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" href="#cb64-1" data-line-number="1">resultInc &lt;-<span class="st"> </span><span class="kw">WoETable</span>(</a>
<a class="sourceLine" id="cb64-2" href="#cb64-2" data-line-number="2">  <span class="dt">df =</span> loansBinning,</a>
<a class="sourceLine" id="cb64-3" href="#cb64-3" data-line-number="3">  <span class="dt">x =</span> <span class="st">&quot;annual_inc_joint&quot;</span>,</a>
<a class="sourceLine" id="cb64-4" href="#cb64-4" data-line-number="4">  <span class="dt">y =</span> <span class="st">&quot;isGoodLoan&quot;</span>,</a>
<a class="sourceLine" id="cb64-5" href="#cb64-5" data-line-number="5">  <span class="dt">p =</span> <span class="fl">0.05</span></a>
<a class="sourceLine" id="cb64-6" href="#cb64-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb64-7" href="#cb64-7" data-line-number="7"></a>
<a class="sourceLine" id="cb64-8" href="#cb64-8" data-line-number="8">resultHome</a></code></pre></div>
<div class="sourceCode" id="cb65"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb65-1" href="#cb65-1" data-line-number="1">## $IV</a>
<a class="sourceLine" id="cb65-2" href="#cb65-2" data-line-number="2">## [1] 0.01762216</a>
<a class="sourceLine" id="cb65-3" href="#cb65-3" data-line-number="3">## </a>
<a class="sourceLine" id="cb65-4" href="#cb65-4" data-line-number="4">## $type</a>
<a class="sourceLine" id="cb65-5" href="#cb65-5" data-line-number="5">## [1] &quot;categorical&quot;</a>
<a class="sourceLine" id="cb65-6" href="#cb65-6" data-line-number="6">## </a>
<a class="sourceLine" id="cb65-7" href="#cb65-7" data-line-number="7">## $table</a>
<a class="sourceLine" id="cb65-8" href="#cb65-8" data-line-number="8">## # A tibble: 14 x 19</a>
<a class="sourceLine" id="cb65-9" href="#cb65-9" data-line-number="9">##    purpose Name   Count nGood  nBad cumCount cumGood cumBad pctCount pctGood  pctBad OddsInBin LnOddsInBin WoEInBin IVInBin</a>
<a class="sourceLine" id="cb65-10" href="#cb65-10" data-line-number="10">##    &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;</a>
<a class="sourceLine" id="cb65-11" href="#cb65-11" data-line-number="11">##  1 car     car     2245  1917   328     2245    1917    328 0.0107   1.15e-2 7.80e-3      5.84       1.77     1.77        0</a>
<a class="sourceLine" id="cb65-12" href="#cb65-12" data-line-number="12">##  2 credit… cred…  45514 37704  7810    47759   39621   8138 0.218    2.26e-1 1.86e-1      4.83       1.57     1.57        0</a>
<a class="sourceLine" id="cb65-13" href="#cb65-13" data-line-number="13">##  3 debt_c… debt… 121629 95832 25797   169388  135453  33935 0.582    5.74e-1 6.14e-1      3.71       1.31     1.31        0</a>
<a class="sourceLine" id="cb65-14" href="#cb65-14" data-line-number="14">##  4 educat… educ…     71    57    14   169459  135510  33949 0.000340 3.41e-4 3.33e-4      4.07       1.40     1.40        0</a>
<a class="sourceLine" id="cb65-15" href="#cb65-15" data-line-number="15">##  5 home_i… home…  13711 11216  2495   183170  146726  36444 0.0656   6.72e-2 5.93e-2      4.50       1.50     1.50        0</a>
<a class="sourceLine" id="cb65-16" href="#cb65-16" data-line-number="16">##  6 house   house   1141   904   237   184311  147630  36681 0.00546  5.41e-3 5.64e-3      3.81       1.34     1.34        0</a>
<a class="sourceLine" id="cb65-17" href="#cb65-17" data-line-number="17">##  7 major_… majo…   4505  3664   841   188816  151294  37522 0.0216   2.19e-2 2.00e-2      4.36       1.47     1.47        0</a>
<a class="sourceLine" id="cb65-18" href="#cb65-18" data-line-number="18">##  8 medical medi…   2405  1872   533   191221  153166  38055 0.0115   1.12e-2 1.27e-2      3.51       1.26     1.26        0</a>
<a class="sourceLine" id="cb65-19" href="#cb65-19" data-line-number="19">##  9 moving  movi…   1505  1129   376   192726  154295  38431 0.00720  6.76e-3 8.94e-3      3.00       1.10     1.10        0</a>
<a class="sourceLine" id="cb65-20" href="#cb65-20" data-line-number="20">## 10 other   other  12001  9425  2576   204727  163720  41007 0.0574   5.64e-2 6.13e-2      3.66       1.30     1.30        0</a>
<a class="sourceLine" id="cb65-21" href="#cb65-21" data-line-number="21">## 11 renewa… rene…    134   107    27   204861  163827  41034 0.000641 6.41e-4 6.42e-4      3.96       1.38     1.38        0</a>
<a class="sourceLine" id="cb65-22" href="#cb65-22" data-line-number="22">## 12 small_… smal…   2374  1688   686   207235  165515  41720 0.0114   1.01e-2 1.63e-2      2.46       0.900    0.900       0</a>
<a class="sourceLine" id="cb65-23" href="#cb65-23" data-line-number="23">## 13 vacati… vaca…   1412  1137   275   208647  166652  41995 0.00676  6.81e-3 6.54e-3      4.13       1.42     1.42        0</a>
<a class="sourceLine" id="cb65-24" href="#cb65-24" data-line-number="24">## 14 wedding wedd…    369   321    48   209016  166973  42043 0.00177  1.92e-3 1.14e-3      6.69       1.90     1.90        0</a>
<a class="sourceLine" id="cb65-25" href="#cb65-25" data-line-number="25">## # … with 4 more variables: WoE &lt;dbl&gt;, IV &lt;dbl&gt;, pctGoodBin &lt;dbl&gt;, pctBadBin &lt;dbl&gt;</a></code></pre></div>
<div class="sourceCode" id="cb66"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" href="#cb66-1" data-line-number="1">resultHome<span class="op">$</span>iv</a></code></pre></div>
<div class="sourceCode" id="cb67"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb67-1" href="#cb67-1" data-line-number="1">## NULL</a></code></pre></div>
<p></p>
</div>
<div id="loan-amount" class="section level4">
<h4><span class="header-section-number">3.3.4.10</span> Loan amount</h4>
<p></p>
<div class="sourceCode" id="cb68"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" href="#cb68-1" data-line-number="1">resultAmnt &lt;-<span class="st"> </span><span class="kw">WoETable</span>(</a>
<a class="sourceLine" id="cb68-2" href="#cb68-2" data-line-number="2">  <span class="dt">df =</span> loansBinning,</a>
<a class="sourceLine" id="cb68-3" href="#cb68-3" data-line-number="3">  <span class="dt">x =</span> <span class="st">&quot;loan_amnt&quot;</span>,</a>
<a class="sourceLine" id="cb68-4" href="#cb68-4" data-line-number="4">  <span class="dt">y =</span> <span class="st">&quot;isGoodLoan&quot;</span>,</a>
<a class="sourceLine" id="cb68-5" href="#cb68-5" data-line-number="5">  <span class="dt">p =</span> <span class="fl">0.05</span></a>
<a class="sourceLine" id="cb68-6" href="#cb68-6" data-line-number="6">)</a></code></pre></div>
<div class="sourceCode" id="cb69"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb69-1" href="#cb69-1" data-line-number="1">## Number of missing/NA values:  0</a></code></pre></div>
<div class="sourceCode" id="cb70"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" href="#cb70-1" data-line-number="1">resultAmnt</a></code></pre></div>
<div class="sourceCode" id="cb71"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb71-1" href="#cb71-1" data-line-number="1">## $IV</a>
<a class="sourceLine" id="cb71-2" href="#cb71-2" data-line-number="2">## [1] 0.03442168</a>
<a class="sourceLine" id="cb71-3" href="#cb71-3" data-line-number="3">## </a>
<a class="sourceLine" id="cb71-4" href="#cb71-4" data-line-number="4">## $type</a>
<a class="sourceLine" id="cb71-5" href="#cb71-5" data-line-number="5">## [1] &quot;numeric&quot;</a>
<a class="sourceLine" id="cb71-6" href="#cb71-6" data-line-number="6">## </a>
<a class="sourceLine" id="cb71-7" href="#cb71-7" data-line-number="7">## $table</a>
<a class="sourceLine" id="cb71-8" href="#cb71-8" data-line-number="8">## # A tibble: 7 x 23</a>
<a class="sourceLine" id="cb71-9" href="#cb71-9" data-line-number="9">##   CutNumber CutPoint name    Min   Max Count nGood  nBad cumCount cumGood cumBad pctCount pctGood pctBad OddsInBin LnOddsInBin</a>
<a class="sourceLine" id="cb71-10" href="#cb71-10" data-line-number="10">##       &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;</a>
<a class="sourceLine" id="cb71-11" href="#cb71-11" data-line-number="11">## 1         1     3500 &quot;&quot;     -Inf  3500 12109 10325  1784    12109   10325   1784   0.0579  0.0618 0.0424      5.79        1.76</a>
<a class="sourceLine" id="cb71-12" href="#cb71-12" data-line-number="12">## 2         2     9000 &quot;&quot;     3500  9000 54266 45162  9104    66375   55487  10888   0.260   0.270  0.217       4.96        1.60</a>
<a class="sourceLine" id="cb71-13" href="#cb71-13" data-line-number="13">## 3         3    10000 &quot;&quot;     9000 10000 20022 16170  3852    86397   71657  14740   0.0958  0.0968 0.0916      4.20        1.43</a>
<a class="sourceLine" id="cb71-14" href="#cb71-14" data-line-number="14">## 4         4    14975 &quot;&quot;    10000 14975 33242 26250  6992   119639   97907  21732   0.159   0.157  0.166       3.75        1.32</a>
<a class="sourceLine" id="cb71-15" href="#cb71-15" data-line-number="15">## 5         5    15000 &quot;&quot;    14975 15000 10817  8743  2074   130456  106650  23806   0.0518  0.0524 0.0493      4.22        1.44</a>
<a class="sourceLine" id="cb71-16" href="#cb71-16" data-line-number="16">## 6         6    28000 &quot;&quot;    15000 28000 60284 46570 13714   190740  153220  37520   0.288   0.279  0.326       3.40        1.22</a>
<a class="sourceLine" id="cb71-17" href="#cb71-17" data-line-number="17">## 7         7    40000 &quot;&quot;    28000 40000 18276 13753  4523   209016  166973  42043   0.0874  0.0824 0.108       3.04        1.11</a>
<a class="sourceLine" id="cb71-18" href="#cb71-18" data-line-number="18">## # … with 7 more variables: WoEInBin &lt;dbl&gt;, IVInBin &lt;dbl&gt;, WoE &lt;dbl&gt;, IV &lt;dbl&gt;, Name &lt;chr&gt;, pctGoodBin &lt;dbl&gt;, pctBadBin &lt;dbl&gt;</a></code></pre></div>
<div class="sourceCode" id="cb72"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" href="#cb72-1" data-line-number="1">resultAmnt<span class="op">$</span>IV</a></code></pre></div>
<div class="sourceCode" id="cb73"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb73-1" href="#cb73-1" data-line-number="1">## [1] 0.03442168</a></code></pre></div>
<p></p>

</div>
</div>
</div>
<div id="logistic-regression-1" class="section level2">
<h2><span class="header-section-number">3.4</span> Logistic Regression</h2>
<div id="logistic-regression-using-the-speedglm-package" class="section level3">
<h3><span class="header-section-number">3.4.1</span> Logistic regression using the <code>SpeedGLM</code> package</h3>
<blockquote>
<p>NOTE: <code>speedglm</code> has a <code>select()</code> function which would shadow <code>dplyr::select()</code>, so it is only used fully qualified to avoid any collision.</p>
</blockquote>
<p></p>
<div class="sourceCode" id="cb74"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" href="#cb74-1" data-line-number="1"><span class="co"># Cleanup and reload</span></a>
<a class="sourceLine" id="cb74-2" href="#cb74-2" data-line-number="2"></a>
<a class="sourceLine" id="cb74-3" href="#cb74-3" data-line-number="3"><span class="co"># Training results to speed up analysis</span></a>
<a class="sourceLine" id="cb74-4" href="#cb74-4" data-line-number="4"><span class="co"># load(&quot;datasets/GLModelResults.rda&quot;)</span></a>
<a class="sourceLine" id="cb74-5" href="#cb74-5" data-line-number="5"></a>
<a class="sourceLine" id="cb74-6" href="#cb74-6" data-line-number="6"></a>
<a class="sourceLine" id="cb74-7" href="#cb74-7" data-line-number="7">loansTraining &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;datasets/LoansTraining.rds&quot;</span>)</a>
<a class="sourceLine" id="cb74-8" href="#cb74-8" data-line-number="8"></a>
<a class="sourceLine" id="cb74-9" href="#cb74-9" data-line-number="9"><span class="co"># Take the allBins dataset (without `loanID`)</span></a>
<a class="sourceLine" id="cb74-10" href="#cb74-10" data-line-number="10"><span class="co"># Add the desired response</span></a>
<a class="sourceLine" id="cb74-11" href="#cb74-11" data-line-number="11"></a>
<a class="sourceLine" id="cb74-12" href="#cb74-12" data-line-number="12">allFactorsAsCharacteristics &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;datasets/allCharacteristics100.rds&quot;</span>)</a>
<a class="sourceLine" id="cb74-13" href="#cb74-13" data-line-number="13">allFactorsAsBins &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;datasets/allBins100.rds&quot;</span>)</a>
<a class="sourceLine" id="cb74-14" href="#cb74-14" data-line-number="14"></a>
<a class="sourceLine" id="cb74-15" href="#cb74-15" data-line-number="15">loanSampleBins &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb74-16" href="#cb74-16" data-line-number="16"><span class="st">  </span>allFactorsAsBins <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb74-17" href="#cb74-17" data-line-number="17"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>loanID) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb74-18" href="#cb74-18" data-line-number="18"><span class="st">  </span><span class="kw">cbind</span>(loansTraining<span class="op">$</span>isGoodLoan) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb74-19" href="#cb74-19" data-line-number="19"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">isGoodLoan =</span> <span class="st">&quot;loansTraining$isGoodLoan&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb74-20" href="#cb74-20" data-line-number="20"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">isGoodLoan =</span> <span class="kw">if_else</span>(isGoodLoan, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb74-21" href="#cb74-21" data-line-number="21"><span class="st">  </span><span class="kw">as.data.frame</span>()</a>
<a class="sourceLine" id="cb74-22" href="#cb74-22" data-line-number="22"></a>
<a class="sourceLine" id="cb74-23" href="#cb74-23" data-line-number="23">loanSampleCharacteristics &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb74-24" href="#cb74-24" data-line-number="24"><span class="st">  </span>allFactorsAsCharacteristics <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb74-25" href="#cb74-25" data-line-number="25"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>loanID) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb74-26" href="#cb74-26" data-line-number="26"><span class="st">  </span><span class="kw">cbind</span>(loansTraining<span class="op">$</span>isGoodLoan) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb74-27" href="#cb74-27" data-line-number="27"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">isGoodLoan =</span> <span class="st">&quot;loansTraining$isGoodLoan&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb74-28" href="#cb74-28" data-line-number="28"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">isGoodLoan =</span> <span class="kw">if_else</span>(isGoodLoan, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb74-29" href="#cb74-29" data-line-number="29"><span class="st">  </span><span class="kw">as.data.frame</span>()</a>
<a class="sourceLine" id="cb74-30" href="#cb74-30" data-line-number="30"></a>
<a class="sourceLine" id="cb74-31" href="#cb74-31" data-line-number="31"><span class="kw">rm</span>(loansTraining)</a>
<a class="sourceLine" id="cb74-32" href="#cb74-32" data-line-number="32"></a>
<a class="sourceLine" id="cb74-33" href="#cb74-33" data-line-number="33"><span class="kw">gc</span>(<span class="dt">full =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb75"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb75-1" href="#cb75-1" data-line-number="1">##             used   (Mb) gc trigger   (Mb)   max used    (Mb)</a>
<a class="sourceLine" id="cb75-2" href="#cb75-2" data-line-number="2">## Ncells   2836124  151.5    6816128  364.1    6816128   364.1</a>
<a class="sourceLine" id="cb75-3" href="#cb75-3" data-line-number="3">## Vcells 453171745 3457.5 1151772154 8787.4 1826494161 13935.1</a></code></pre></div>
<div class="sourceCode" id="cb76"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" href="#cb76-1" data-line-number="1"><span class="kw">ncol</span>(loanSampleBins)</a></code></pre></div>
<div class="sourceCode" id="cb77"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb77-1" href="#cb77-1" data-line-number="1">## [1] 222</a></code></pre></div>
<div class="sourceCode" id="cb78"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" href="#cb78-1" data-line-number="1"><span class="kw">ncol</span>(loanSampleCharacteristics)</a></code></pre></div>
<div class="sourceCode" id="cb79"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb79-1" href="#cb79-1" data-line-number="1">## [1] 27</a></code></pre></div>
<p></p>
</div>
<div id="remove-identical-bins" class="section level3">
<h3><span class="header-section-number">3.4.2</span> Remove identical bins</h3>
<p></p>
<div class="sourceCode" id="cb80"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" href="#cb80-1" data-line-number="1">namesCharacteristics &lt;-<span class="st"> </span><span class="kw">names</span>(loanSampleCharacteristics)</a>
<a class="sourceLine" id="cb80-2" href="#cb80-2" data-line-number="2">namesBins &lt;-<span class="st"> </span><span class="kw">names</span>(loanSampleBins)</a>
<a class="sourceLine" id="cb80-3" href="#cb80-3" data-line-number="3"></a>
<a class="sourceLine" id="cb80-4" href="#cb80-4" data-line-number="4"></a>
<a class="sourceLine" id="cb80-5" href="#cb80-5" data-line-number="5"><span class="co"># Starting list of names</span></a>
<a class="sourceLine" id="cb80-6" href="#cb80-6" data-line-number="6"><span class="co"># &gt; The following two variables are only useful if all the bins have been given their own column (if a</span></a>
<a class="sourceLine" id="cb80-7" href="#cb80-7" data-line-number="7"><span class="co"># &gt; characteristic has 7 factors, that creates 7 bins and column).</span></a>
<a class="sourceLine" id="cb80-8" href="#cb80-8" data-line-number="8"></a>
<a class="sourceLine" id="cb80-9" href="#cb80-9" data-line-number="9"></a>
<a class="sourceLine" id="cb80-10" href="#cb80-10" data-line-number="10"><span class="co"># Running GLM would give a number of NAs if some columns are linearly dependant (in our case</span></a>
<a class="sourceLine" id="cb80-11" href="#cb80-11" data-line-number="11"><span class="co"># actually equal). A &quot;trick&quot; to identify them is to run a hash digest on each column and spot</span></a>
<a class="sourceLine" id="cb80-12" href="#cb80-12" data-line-number="12"><span class="co"># identical hashes The original variables were not identical, but when split into categories, they</span></a>
<a class="sourceLine" id="cb80-13" href="#cb80-13" data-line-number="13"><span class="co"># can become identical. For example, if no income is provided (income=NA category), no</span></a>
<a class="sourceLine" id="cb80-14" href="#cb80-14" data-line-number="14"><span class="co"># debt-to-income ratio can be calculated (dti=NA).</span></a>
<a class="sourceLine" id="cb80-15" href="#cb80-15" data-line-number="15">duplicateNames &lt;-<span class="st"> </span>loanSampleBins[<span class="kw">duplicated</span>(<span class="kw">lapply</span>(loanSampleBins, digest<span class="op">::</span>digest))] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">names</span>()</a>
<a class="sourceLine" id="cb80-16" href="#cb80-16" data-line-number="16">duplicateNames</a></code></pre></div>
<div class="sourceCode" id="cb81"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb81-1" href="#cb81-1" data-line-number="1">##  [1] &quot;(open_rv_24m) open_rv_24m=NA&quot;                     &quot;(max_bal_bc) max_bal_bc=NA&quot;                      </a>
<a class="sourceLine" id="cb81-2" href="#cb81-2" data-line-number="2">##  [3] &quot;(bc_util) -Inf&lt;bc_util&lt;=31.5&quot;                     &quot;(bc_util) 31.5&lt;bc_util&lt;=38.8&quot;                    </a>
<a class="sourceLine" id="cb81-3" href="#cb81-3" data-line-number="3">##  [5] &quot;(bc_util) 38.8&lt;bc_util&lt;=46.1&quot;                     &quot;(bc_util) 46.1&lt;bc_util&lt;=53.9&quot;                    </a>
<a class="sourceLine" id="cb81-4" href="#cb81-4" data-line-number="4">##  [7] &quot;(bc_util) 53.9&lt;bc_util&lt;=72.5&quot;                     &quot;(bc_util) 72.5&lt;bc_util&lt;=87.6&quot;                    </a>
<a class="sourceLine" id="cb81-5" href="#cb81-5" data-line-number="5">##  [9] &quot;(bc_util) 87.6&lt;bc_util&lt;=91.9&quot;                     &quot;(bc_util) 91.9&lt;bc_util&lt;=97.9&quot;                    </a>
<a class="sourceLine" id="cb81-6" href="#cb81-6" data-line-number="6">## [11] &quot;(bc_util) 97.9&lt;bc_util&lt;=339.6&quot;                    &quot;(bc_util) bc_util=NA&quot;                            </a>
<a class="sourceLine" id="cb81-7" href="#cb81-7" data-line-number="7">## [13] &quot;(mo_sin_rcnt_rev_tl_op) mo_sin_rcnt_rev_tl_op=NA&quot; &quot;(num_actv_rev_tl) num_actv_rev_tl=NA&quot;            </a>
<a class="sourceLine" id="cb81-8" href="#cb81-8" data-line-number="8">## [15] &quot;(num_rev_tl_bal_gt_0) num_rev_tl_bal_gt_0=NA&quot;     &quot;(num_tl_op_past_12m) num_tl_op_past_12m=NA&quot;      </a>
<a class="sourceLine" id="cb81-9" href="#cb81-9" data-line-number="9">## [17] &quot;(tot_hi_cred_lim) tot_hi_cred_lim=NA&quot;             &quot;(total_bc_limit) total_bc_limit=NA&quot;              </a>
<a class="sourceLine" id="cb81-10" href="#cb81-10" data-line-number="10">## [19] &quot;(issue_d2) 200.694&lt;issue_d2&lt;=215.111&quot;             &quot;(issue_d2) 215.111&lt;issue_d2&lt;=258.674&quot;            </a>
<a class="sourceLine" id="cb81-11" href="#cb81-11" data-line-number="11">## [21] &quot;(issue_d2) 258.674&lt;issue_d2&lt;=277.778&quot;             &quot;(issue_d2) 277.778&lt;issue_d2&lt;=315.062&quot;            </a>
<a class="sourceLine" id="cb81-12" href="#cb81-12" data-line-number="12">## [23] &quot;(issue_d2) 315.062&lt;issue_d2&lt;=357.84&quot;              &quot;(issue_d3) -Inf&lt;issue_d3&lt;=2599.609&quot;              </a>
<a class="sourceLine" id="cb81-13" href="#cb81-13" data-line-number="13">## [25] &quot;(issue_d3) 2599.609&lt;issue_d3&lt;=2843.171&quot;           &quot;(issue_d3) 2843.171&lt;issue_d3&lt;=3154.963&quot;          </a>
<a class="sourceLine" id="cb81-14" href="#cb81-14" data-line-number="14">## [27] &quot;(issue_d3) 3154.963&lt;issue_d3&lt;=4160.334&quot;           &quot;(issue_d3) 4160.334&lt;issue_d3&lt;=4629.63&quot;           </a>
<a class="sourceLine" id="cb81-15" href="#cb81-15" data-line-number="15">## [29] &quot;(issue_d3) 4629.63&lt;issue_d3&lt;=5592.359&quot;            &quot;(issue_d3) 5592.359&lt;issue_d3&lt;=6769.145&quot;</a></code></pre></div>
<div class="sourceCode" id="cb82"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" href="#cb82-1" data-line-number="1"><span class="co"># Remove any categories uniformaly constant (only 0)</span></a>
<a class="sourceLine" id="cb82-2" href="#cb82-2" data-line-number="2"><span class="co">#</span></a>
<a class="sourceLine" id="cb82-3" href="#cb82-3" data-line-number="3"><span class="co"># This is important when working on a small extract of the dataset for variables that are seldom</span></a>
<a class="sourceLine" id="cb82-4" href="#cb82-4" data-line-number="4"><span class="co"># used (e.g. customers from certain states).</span></a>
<a class="sourceLine" id="cb82-5" href="#cb82-5" data-line-number="5">zeroColumnsNames &lt;-<span class="st"> </span>loanSampleBins[, <span class="kw">colSums</span>(loanSampleBins) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">names</span>()</a></code></pre></div>
<p></p>
</div>
<div id="first-training-on-variables-previously-selected-on-their-information-value" class="section level3">
<h3><span class="header-section-number">3.4.3</span> First training on variables previously selected on their Information Value</h3>
<p>We use <code>speedglm</code> being quick. Note that alternatives were also tried: <code>glm</code> crashed on even small extracts of the dataset. <code>glmnet</code> returns errors that were not understandable or documented on the internet.</p>
<div id="glm-on-characteristics" class="section level4">
<h4><span class="header-section-number">3.4.3.1</span> GLM on characteristics</h4>
<p></p>
<div class="sourceCode" id="cb83"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" href="#cb83-1" data-line-number="1"><span class="kw">gc</span>(<span class="dt">full =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb84"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb84-1" href="#cb84-1" data-line-number="1">##             used   (Mb) gc trigger   (Mb)   max used    (Mb)</a>
<a class="sourceLine" id="cb84-2" href="#cb84-2" data-line-number="2">## Ncells   2836006  151.5    6816128  364.1    6816128   364.1</a>
<a class="sourceLine" id="cb84-3" href="#cb84-3" data-line-number="3">## Vcells 453172043 3457.5 1151772154 8787.4 1826494161 13935.1</a></code></pre></div>
<div class="sourceCode" id="cb85"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" href="#cb85-1" data-line-number="1"><span class="co"># About 700 sec wall-time to complete training dataset</span></a>
<a class="sourceLine" id="cb85-2" href="#cb85-2" data-line-number="2"><span class="co"># The dataset is the sample less duplicate, less zero-ed columns</span></a>
<a class="sourceLine" id="cb85-3" href="#cb85-3" data-line-number="3">{</a>
<a class="sourceLine" id="cb85-4" href="#cb85-4" data-line-number="4">  doMC<span class="op">::</span><span class="kw">registerDoMC</span>(<span class="dt">cores =</span> <span class="dv">1</span>) <span class="co"># Too many processes push over 32GB</span></a>
<a class="sourceLine" id="cb85-5" href="#cb85-5" data-line-number="5">  startTime &lt;-<span class="st"> </span><span class="kw">proc.time</span>()</a>
<a class="sourceLine" id="cb85-6" href="#cb85-6" data-line-number="6">  </a>
<a class="sourceLine" id="cb85-7" href="#cb85-7" data-line-number="7">  loansData &lt;-<span class="st"> </span>loanSampleCharacteristics <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb85-8" href="#cb85-8" data-line-number="8"><span class="st">    </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">one_of</span>( <span class="kw">c</span>(duplicateNames, </a>
<a class="sourceLine" id="cb85-9" href="#cb85-9" data-line-number="9">                      zeroColumnsNames)))</a>
<a class="sourceLine" id="cb85-10" href="#cb85-10" data-line-number="10">  </a>
<a class="sourceLine" id="cb85-11" href="#cb85-11" data-line-number="11">  SGLM_C_train &lt;-<span class="st"> </span>speedglm<span class="op">::</span><span class="kw">speedglm</span>(isGoodLoan <span class="op">~</span><span class="st"> </span>.,</a>
<a class="sourceLine" id="cb85-12" href="#cb85-12" data-line-number="12">                                  <span class="dt">data =</span> loansData,</a>
<a class="sourceLine" id="cb85-13" href="#cb85-13" data-line-number="13">                                  <span class="dt">family =</span> <span class="kw">binomial</span>())</a>
<a class="sourceLine" id="cb85-14" href="#cb85-14" data-line-number="14">  </a>
<a class="sourceLine" id="cb85-15" href="#cb85-15" data-line-number="15">  doMC<span class="op">::</span><span class="kw">registerDoMC</span>(<span class="dt">cores =</span> <span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb85-16" href="#cb85-16" data-line-number="16">  <span class="kw">cat</span>(<span class="kw">proc.time</span>() <span class="op">-</span><span class="st"> </span>startTime, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb85-17" href="#cb85-17" data-line-number="17">}</a></code></pre></div>
<div class="sourceCode" id="cb86"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb86-1" href="#cb86-1" data-line-number="1">## 152.174 8.799 173.566 0 0</a></code></pre></div>
<div class="sourceCode" id="cb87"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" href="#cb87-1" data-line-number="1"><span class="kw">summary</span>(SGLM_C_train)</a></code></pre></div>
<div class="sourceCode" id="cb88"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb88-1" href="#cb88-1" data-line-number="1">## Generalized Linear Model of class &#39;speedglm&#39;:</a>
<a class="sourceLine" id="cb88-2" href="#cb88-2" data-line-number="2">## </a>
<a class="sourceLine" id="cb88-3" href="#cb88-3" data-line-number="3">## Call:  speedglm::speedglm(formula = isGoodLoan ~ ., data = loansData,      family = binomial()) </a>
<a class="sourceLine" id="cb88-4" href="#cb88-4" data-line-number="4">## </a>
<a class="sourceLine" id="cb88-5" href="#cb88-5" data-line-number="5">## Coefficients:</a>
<a class="sourceLine" id="cb88-6" href="#cb88-6" data-line-number="6">##  ------------------------------------------------------------------ </a>
<a class="sourceLine" id="cb88-7" href="#cb88-7" data-line-number="7">##                                                     Estimate Std. Error  z value  Pr(&gt;|z|)    </a>
<a class="sourceLine" id="cb88-8" href="#cb88-8" data-line-number="8">## (Intercept)                                         1.654651   0.027022  61.2330  0.00e+00 ***</a>
<a class="sourceLine" id="cb88-9" href="#cb88-9" data-line-number="9">## loan_amnt14975&lt;loan_amnt&lt;=15000                    -0.611612   0.016493 -37.0834 5.20e-301 ***</a>
<a class="sourceLine" id="cb88-10" href="#cb88-10" data-line-number="10">## loan_amnt9000&lt;loan_amnt&lt;=10000                     -0.423648   0.014555 -29.1068 2.94e-186 ***</a>
<a class="sourceLine" id="cb88-11" href="#cb88-11" data-line-number="11">## loan_amnt12000&lt;loan_amnt&lt;=14975                    -0.657958   0.015413 -42.6873  0.00e+00 ***</a>
<a class="sourceLine" id="cb88-12" href="#cb88-12" data-line-number="12">## loan_amnt15000&lt;loan_amnt&lt;=17000                    -0.785494   0.015970 -49.1862  0.00e+00 ***</a>
<a class="sourceLine" id="cb88-13" href="#cb88-13" data-line-number="13">## loan_amnt3500&lt;loan_amnt&lt;=9000                      -0.176897   0.012956 -13.6540  1.91e-42 ***</a>
<a class="sourceLine" id="cb88-14" href="#cb88-14" data-line-number="14">## loan_amnt19950&lt;loan_amnt&lt;=28000                    -0.922807   0.013695 -67.3806  0.00e+00 ***</a>
<a class="sourceLine" id="cb88-15" href="#cb88-15" data-line-number="15">## loan_amnt28000&lt;loan_amnt&lt;=40000                    -1.161735   0.015222 -76.3171  0.00e+00 ***</a>
<a class="sourceLine" id="cb88-16" href="#cb88-16" data-line-number="16">## loan_amnt10000&lt;loan_amnt&lt;=12000                    -0.561516   0.014458 -38.8382  0.00e+00 ***</a>
<a class="sourceLine" id="cb88-17" href="#cb88-17" data-line-number="17">## loan_amnt17000&lt;loan_amnt&lt;=19950                    -0.883419   0.015922 -55.4846  0.00e+00 ***</a>
<a class="sourceLine" id="cb88-18" href="#cb88-18" data-line-number="18">## verification_statusSource Verified                 -0.212522   0.006704 -31.6993 1.59e-220 ***</a>
<a class="sourceLine" id="cb88-19" href="#cb88-19" data-line-number="19">## verification_statusVerified                        -0.284086   0.007080 -40.1275  0.00e+00 ***</a>
<a class="sourceLine" id="cb88-20" href="#cb88-20" data-line-number="20">## issue_d-Inf&lt;issue_d&lt;=14.167                         0.571031   0.017279  33.0479 1.67e-239 ***</a>
<a class="sourceLine" id="cb88-21" href="#cb88-21" data-line-number="21">## issue_d14.667&lt;issue_d&lt;=16.083                       0.304914   0.012108  25.1839 6.01e-140 ***</a>
<a class="sourceLine" id="cb88-22" href="#cb88-22" data-line-number="22">## issue_d16.083&lt;issue_d&lt;=16.667                      -0.056860   0.009120  -6.2344  4.53e-10 ***</a>
<a class="sourceLine" id="cb88-23" href="#cb88-23" data-line-number="23">## issue_d14.167&lt;issue_d&lt;=14.667                       0.375426   0.015807  23.7501 1.10e-124 ***</a>
<a class="sourceLine" id="cb88-24" href="#cb88-24" data-line-number="24">## issue_d17.75&lt;issue_d&lt;=18.917                        0.362928   0.013544  26.7952 3.67e-158 ***</a>
<a class="sourceLine" id="cb88-25" href="#cb88-25" data-line-number="25">## dti0.156&lt;dti&lt;=0.178                                -0.158876   0.010902 -14.5727  4.19e-48 ***</a>
<a class="sourceLine" id="cb88-26" href="#cb88-26" data-line-number="26">## dti0.122&lt;dti&lt;=0.143                                -0.059598   0.011283  -5.2821  1.28e-07 ***</a>
<a class="sourceLine" id="cb88-27" href="#cb88-27" data-line-number="27">## dti0.192&lt;dti&lt;=0.217                                -0.250862   0.010760 -23.3148 3.14e-120 ***</a>
<a class="sourceLine" id="cb88-28" href="#cb88-28" data-line-number="28">## dti0.254&lt;dti&lt;=0.272                                -0.434550   0.012870 -33.7648 6.48e-250 ***</a>
<a class="sourceLine" id="cb88-29" href="#cb88-29" data-line-number="29">## dti0.299&lt;dti&lt;=9.99                                 -0.657574   0.010587 -62.1126  0.00e+00 ***</a>
<a class="sourceLine" id="cb88-30" href="#cb88-30" data-line-number="30">## dti0.178&lt;dti&lt;=0.192                                -0.200020   0.012599 -15.8759  9.31e-57 ***</a>
<a class="sourceLine" id="cb88-31" href="#cb88-31" data-line-number="31">## dti0.272&lt;dti&lt;=0.299                                -0.491943   0.012061 -40.7896  0.00e+00 ***</a>
<a class="sourceLine" id="cb88-32" href="#cb88-32" data-line-number="32">## dti0.097&lt;dti&lt;=0.122                                -0.026908   0.011341  -2.3727  1.77e-02 *  </a>
<a class="sourceLine" id="cb88-33" href="#cb88-33" data-line-number="33">## dti0.236&lt;dti&lt;=0.254                                -0.372892   0.012484 -29.8692 4.95e-196 ***</a>
<a class="sourceLine" id="cb88-34" href="#cb88-34" data-line-number="34">## dti0.143&lt;dti&lt;=0.156                                -0.119758   0.013051  -9.1763  4.46e-20 ***</a>
<a class="sourceLine" id="cb88-35" href="#cb88-35" data-line-number="35">## dti0.217&lt;dti&lt;=0.236                                -0.330228   0.011854 -27.8574 8.77e-171 ***</a>
<a class="sourceLine" id="cb88-36" href="#cb88-36" data-line-number="36">## dtidti=NA                                          -0.257596   0.164234  -1.5685  1.17e-01    </a>
<a class="sourceLine" id="cb88-37" href="#cb88-37" data-line-number="37">## inq_last_6mths-Inf&lt;inq_last_6mths&lt;=0                0.202236   0.010651  18.9869  2.19e-80 ***</a>
<a class="sourceLine" id="cb88-38" href="#cb88-38" data-line-number="38">## inq_last_6mths0&lt;inq_last_6mths&lt;=1                   0.096644   0.008981  10.7611  5.25e-27 ***</a>
<a class="sourceLine" id="cb88-39" href="#cb88-39" data-line-number="39">## inq_last_6mths2&lt;inq_last_6mths&lt;=33                 -0.146377   0.012374 -11.8294  2.75e-32 ***</a>
<a class="sourceLine" id="cb88-40" href="#cb88-40" data-line-number="40">## inq_last_6mthsinq_last_6mths=NA                     0.357904   0.746709   0.4793  6.32e-01    </a>
<a class="sourceLine" id="cb88-41" href="#cb88-41" data-line-number="41">## revol_util0.217&lt;revol_util&lt;=0.316                   0.010713   0.014609   0.7333  4.63e-01    </a>
<a class="sourceLine" id="cb88-42" href="#cb88-42" data-line-number="42">## revol_util0.718&lt;revol_util&lt;=0.869                  -0.216150   0.017190 -12.5740  2.93e-36 ***</a>
<a class="sourceLine" id="cb88-43" href="#cb88-43" data-line-number="43">## revol_util0.869&lt;revol_util&lt;=3.666                  -0.309763   0.018638 -16.6196  5.03e-62 ***</a>
<a class="sourceLine" id="cb88-44" href="#cb88-44" data-line-number="44">## revol_util0.479&lt;revol_util&lt;=0.569                  -0.116696   0.016627  -7.0183  2.25e-12 ***</a>
<a class="sourceLine" id="cb88-45" href="#cb88-45" data-line-number="45">## revol_util0.569&lt;revol_util&lt;=0.718                  -0.148698   0.016462  -9.0327  1.68e-19 ***</a>
<a class="sourceLine" id="cb88-46" href="#cb88-46" data-line-number="46">## revol_util0.388&lt;revol_util&lt;=0.479                  -0.080468   0.016286  -4.9408  7.78e-07 ***</a>
<a class="sourceLine" id="cb88-47" href="#cb88-47" data-line-number="47">## revol_util0.147&lt;revol_util&lt;=0.217                   0.018170   0.016165   1.1240  2.61e-01    </a>
<a class="sourceLine" id="cb88-48" href="#cb88-48" data-line-number="48">## revol_util0.316&lt;revol_util&lt;=0.388                  -0.029066   0.016419  -1.7702  7.67e-02 .  </a>
<a class="sourceLine" id="cb88-49" href="#cb88-49" data-line-number="49">## revol_utilrevol_util=NA                            -0.325272   0.105784  -3.0749  2.11e-03 ** </a>
<a class="sourceLine" id="cb88-50" href="#cb88-50" data-line-number="50">## open_rv_12mopen_rv_12m=NA                          -0.052021   0.016200  -3.2111  1.32e-03 ** </a>
<a class="sourceLine" id="cb88-51" href="#cb88-51" data-line-number="51">## open_rv_12m-Inf&lt;open_rv_12m&lt;=0                     -0.072098   0.013569  -5.3134  1.08e-07 ***</a>
<a class="sourceLine" id="cb88-52" href="#cb88-52" data-line-number="52">## open_rv_12m2&lt;open_rv_12m&lt;=28                        0.168254   0.015514  10.8455  2.09e-27 ***</a>
<a class="sourceLine" id="cb88-53" href="#cb88-53" data-line-number="53">## open_rv_12m1&lt;open_rv_12m&lt;=2                         0.082332   0.012798   6.4331  1.25e-10 ***</a>
<a class="sourceLine" id="cb88-54" href="#cb88-54" data-line-number="54">## open_rv_24mopen_rv_24m=NA                                 NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-55" href="#cb88-55" data-line-number="55">## open_rv_24m1&lt;open_rv_24m&lt;=2                        -0.040201   0.013740  -2.9259  3.43e-03 ** </a>
<a class="sourceLine" id="cb88-56" href="#cb88-56" data-line-number="56">## open_rv_24m3&lt;open_rv_24m&lt;=5                        -0.171765   0.015503 -11.0797  1.57e-28 ***</a>
<a class="sourceLine" id="cb88-57" href="#cb88-57" data-line-number="57">## open_rv_24m2&lt;open_rv_24m&lt;=3                        -0.124506   0.015078  -8.2577  1.48e-16 ***</a>
<a class="sourceLine" id="cb88-58" href="#cb88-58" data-line-number="58">## open_rv_24m-Inf&lt;open_rv_24m&lt;=0                     -0.086165   0.018857  -4.5693  4.89e-06 ***</a>
<a class="sourceLine" id="cb88-59" href="#cb88-59" data-line-number="59">## open_rv_24m5&lt;open_rv_24m&lt;=53                       -0.264156   0.018018 -14.6610  1.15e-48 ***</a>
<a class="sourceLine" id="cb88-60" href="#cb88-60" data-line-number="60">## max_bal_bcmax_bal_bc=NA                                   NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-61" href="#cb88-61" data-line-number="61">## max_bal_bc7905&lt;max_bal_bc&lt;=776843                  -0.013343   0.011801  -1.1307  2.58e-01    </a>
<a class="sourceLine" id="cb88-62" href="#cb88-62" data-line-number="62">## max_bal_bc5122&lt;max_bal_bc&lt;=7905                     0.003012   0.011053   0.2725  7.85e-01    </a>
<a class="sourceLine" id="cb88-63" href="#cb88-63" data-line-number="63">## avg_cur_balavg_cur_bal=NA                          -0.949400   0.535525  -1.7728  7.63e-02 .  </a>
<a class="sourceLine" id="cb88-64" href="#cb88-64" data-line-number="64">## avg_cur_bal11363&lt;avg_cur_bal&lt;=14047                -0.031547   0.014191  -2.2231  2.62e-02 *  </a>
<a class="sourceLine" id="cb88-65" href="#cb88-65" data-line-number="65">## avg_cur_bal27395&lt;avg_cur_bal&lt;=41609                -0.088727   0.018088  -4.9052  9.33e-07 ***</a>
<a class="sourceLine" id="cb88-66" href="#cb88-66" data-line-number="66">## avg_cur_bal14047&lt;avg_cur_bal&lt;=21129                -0.068323   0.013534  -5.0484  4.46e-07 ***</a>
<a class="sourceLine" id="cb88-67" href="#cb88-67" data-line-number="67">## avg_cur_bal21129&lt;avg_cur_bal&lt;=27395                -0.090694   0.016671  -5.4403  5.32e-08 ***</a>
<a class="sourceLine" id="cb88-68" href="#cb88-68" data-line-number="68">## avg_cur_bal8012&lt;avg_cur_bal&lt;=11363                 -0.008267   0.011130  -0.7427  4.58e-01    </a>
<a class="sourceLine" id="cb88-69" href="#cb88-69" data-line-number="69">## avg_cur_bal41609&lt;avg_cur_bal&lt;=800008               -0.076770   0.022773  -3.3711  7.49e-04 ***</a>
<a class="sourceLine" id="cb88-70" href="#cb88-70" data-line-number="70">## bc_open_to_buy0.315&lt;bc_open_to_buy&lt;=0.388           0.027298   0.014245   1.9162  5.53e-02 .  </a>
<a class="sourceLine" id="cb88-71" href="#cb88-71" data-line-number="71">## bc_open_to_buy0.979&lt;bc_open_to_buy&lt;=3.396          -0.101314   0.021487  -4.7151  2.42e-06 ***</a>
<a class="sourceLine" id="cb88-72" href="#cb88-72" data-line-number="72">## bc_open_to_buy0.461&lt;bc_open_to_buy&lt;=0.539           0.087466   0.014658   5.9673  2.41e-09 ***</a>
<a class="sourceLine" id="cb88-73" href="#cb88-73" data-line-number="73">## bc_open_to_buy0.876&lt;bc_open_to_buy&lt;=0.919           0.200794   0.019174  10.4722  1.16e-25 ***</a>
<a class="sourceLine" id="cb88-74" href="#cb88-74" data-line-number="74">## bc_open_to_buy0.725&lt;bc_open_to_buy&lt;=0.876           0.225314   0.015733  14.3210  1.62e-46 ***</a>
<a class="sourceLine" id="cb88-75" href="#cb88-75" data-line-number="75">## bc_open_to_buy0.539&lt;bc_open_to_buy&lt;=0.725           0.142411   0.013729  10.3728  3.30e-25 ***</a>
<a class="sourceLine" id="cb88-76" href="#cb88-76" data-line-number="76">## bc_open_to_buybc_open_to_buy=NA                    -0.293741   0.089194  -3.2933  9.90e-04 ***</a>
<a class="sourceLine" id="cb88-77" href="#cb88-77" data-line-number="77">## bc_open_to_buy0.388&lt;bc_open_to_buy&lt;=0.461           0.062577   0.014531   4.3065  1.66e-05 ***</a>
<a class="sourceLine" id="cb88-78" href="#cb88-78" data-line-number="78">## bc_open_to_buy0.919&lt;bc_open_to_buy&lt;=0.979           0.081235   0.019246   4.2209  2.43e-05 ***</a>
<a class="sourceLine" id="cb88-79" href="#cb88-79" data-line-number="79">## bc_util31.5&lt;bc_util&lt;=38.8                                 NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-80" href="#cb88-80" data-line-number="80">## bc_util97.9&lt;bc_util&lt;=339.6                                NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-81" href="#cb88-81" data-line-number="81">## bc_util46.1&lt;bc_util&lt;=53.9                                 NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-82" href="#cb88-82" data-line-number="82">## bc_util87.6&lt;bc_util&lt;=91.9                                 NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-83" href="#cb88-83" data-line-number="83">## bc_util72.5&lt;bc_util&lt;=87.6                                 NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-84" href="#cb88-84" data-line-number="84">## bc_util53.9&lt;bc_util&lt;=72.5                                 NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-85" href="#cb88-85" data-line-number="85">## bc_utilbc_util=NA                                         NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-86" href="#cb88-86" data-line-number="86">## bc_util38.8&lt;bc_util&lt;=46.1                                 NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-87" href="#cb88-87" data-line-number="87">## bc_util91.9&lt;bc_util&lt;=97.9                                 NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-88" href="#cb88-88" data-line-number="88">## mo_sin_old_rev_tl_opmo_sin_old_rev_tl_op=NA        -8.640285  16.181331  -0.5340  5.93e-01    </a>
<a class="sourceLine" id="cb88-89" href="#cb88-89" data-line-number="89">## mo_sin_old_rev_tl_op212&lt;mo_sin_old_rev_tl_op&lt;=852   0.044524   0.007339   6.0664  1.31e-09 ***</a>
<a class="sourceLine" id="cb88-90" href="#cb88-90" data-line-number="90">## mo_sin_old_rev_tl_op82&lt;mo_sin_old_rev_tl_op&lt;=132   -0.088202   0.007738 -11.3983  4.27e-30 ***</a>
<a class="sourceLine" id="cb88-91" href="#cb88-91" data-line-number="91">## mo_sin_old_rev_tl_op132&lt;mo_sin_old_rev_tl_op&lt;=143  -0.049584   0.011767  -4.2139  2.51e-05 ***</a>
<a class="sourceLine" id="cb88-92" href="#cb88-92" data-line-number="92">## mo_sin_old_rev_tl_op-Inf&lt;mo_sin_old_rev_tl_op&lt;=58  -0.293715   0.011417 -25.7264 5.92e-146 ***</a>
<a class="sourceLine" id="cb88-93" href="#cb88-93" data-line-number="93">## mo_sin_old_rev_tl_op58&lt;mo_sin_old_rev_tl_op&lt;=82    -0.167112   0.011999 -13.9270  4.34e-44 ***</a>
<a class="sourceLine" id="cb88-94" href="#cb88-94" data-line-number="94">## mo_sin_old_rev_tl_op143&lt;mo_sin_old_rev_tl_op&lt;=154  -0.033960   0.012092  -2.8085  4.98e-03 ** </a>
<a class="sourceLine" id="cb88-95" href="#cb88-95" data-line-number="95">## mo_sin_rcnt_rev_tl_opmo_sin_rcnt_rev_tl_op=NA             NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-96" href="#cb88-96" data-line-number="96">## mo_sin_rcnt_rev_tl_op4&lt;mo_sin_rcnt_rev_tl_op&lt;=7    -0.088233   0.018420  -4.7902  1.67e-06 ***</a>
<a class="sourceLine" id="cb88-97" href="#cb88-97" data-line-number="97">## mo_sin_rcnt_rev_tl_op7&lt;mo_sin_rcnt_rev_tl_op&lt;=9    -0.153633   0.019716  -7.7923  6.58e-15 ***</a>
<a class="sourceLine" id="cb88-98" href="#cb88-98" data-line-number="98">## mo_sin_rcnt_rev_tl_op9&lt;mo_sin_rcnt_rev_tl_op&lt;=16   -0.196814   0.017880 -11.0077  3.51e-28 ***</a>
<a class="sourceLine" id="cb88-99" href="#cb88-99" data-line-number="99">## mo_sin_rcnt_rev_tl_op16&lt;mo_sin_rcnt_rev_tl_op&lt;=20  -0.198438   0.021067  -9.4195  4.53e-21 ***</a>
<a class="sourceLine" id="cb88-100" href="#cb88-100" data-line-number="100">## mo_sin_rcnt_rev_tl_op3&lt;mo_sin_rcnt_rev_tl_op&lt;=4    -0.043725   0.019807  -2.2075  2.73e-02 *  </a>
<a class="sourceLine" id="cb88-101" href="#cb88-101" data-line-number="101">## mo_sin_rcnt_rev_tl_op20&lt;mo_sin_rcnt_rev_tl_op&lt;=28  -0.144915   0.020829  -6.9574  3.46e-12 ***</a>
<a class="sourceLine" id="cb88-102" href="#cb88-102" data-line-number="102">## mo_sin_rcnt_rev_tl_op-Inf&lt;mo_sin_rcnt_rev_tl_op&lt;=1 -0.041782   0.024580  -1.6998  8.92e-02 .  </a>
<a class="sourceLine" id="cb88-103" href="#cb88-103" data-line-number="103">## mo_sin_rcnt_rev_tl_op28&lt;mo_sin_rcnt_rev_tl_op&lt;=438 -0.109213   0.021447  -5.0923  3.54e-07 ***</a>
<a class="sourceLine" id="cb88-104" href="#cb88-104" data-line-number="104">## mo_sin_rcnt_rev_tl_op1&lt;mo_sin_rcnt_rev_tl_op&lt;=2     0.050357   0.022129   2.2756  2.29e-02 *  </a>
<a class="sourceLine" id="cb88-105" href="#cb88-105" data-line-number="105">## mo_sin_rcnt_tlmo_sin_rcnt_tl=NA                     9.277562  16.190846   0.5730  5.67e-01    </a>
<a class="sourceLine" id="cb88-106" href="#cb88-106" data-line-number="106">## mo_sin_rcnt_tl5&lt;mo_sin_rcnt_tl&lt;=7                   0.104581   0.015179   6.8900  5.58e-12 ***</a>
<a class="sourceLine" id="cb88-107" href="#cb88-107" data-line-number="107">## mo_sin_rcnt_tl7&lt;mo_sin_rcnt_tl&lt;=9                   0.145049   0.016676   8.6980  3.38e-18 ***</a>
<a class="sourceLine" id="cb88-108" href="#cb88-108" data-line-number="108">## mo_sin_rcnt_tl3&lt;mo_sin_rcnt_tl&lt;=4                   0.064671   0.017181   3.7641  1.67e-04 ***</a>
<a class="sourceLine" id="cb88-109" href="#cb88-109" data-line-number="109">## mo_sin_rcnt_tl11&lt;mo_sin_rcnt_tl&lt;=14                 0.162630   0.021632   7.5178  5.57e-14 ***</a>
<a class="sourceLine" id="cb88-110" href="#cb88-110" data-line-number="110">## mo_sin_rcnt_tl-Inf&lt;mo_sin_rcnt_tl&lt;=1                0.031869   0.020662   1.5423  1.23e-01    </a>
<a class="sourceLine" id="cb88-111" href="#cb88-111" data-line-number="111">## mo_sin_rcnt_tl9&lt;mo_sin_rcnt_tl&lt;=11                  0.179566   0.017338  10.3570  3.89e-25 ***</a>
<a class="sourceLine" id="cb88-112" href="#cb88-112" data-line-number="112">## mo_sin_rcnt_tl1&lt;mo_sin_rcnt_tl&lt;=2                  -0.011416   0.017458  -0.6539  5.13e-01    </a>
<a class="sourceLine" id="cb88-113" href="#cb88-113" data-line-number="113">## mo_sin_rcnt_tl4&lt;mo_sin_rcnt_tl&lt;=5                   0.110631   0.016327   6.7760  1.24e-11 ***</a>
<a class="sourceLine" id="cb88-114" href="#cb88-114" data-line-number="114">## mo_sin_rcnt_tl21&lt;mo_sin_rcnt_tl&lt;=314                0.160153   0.029004   5.5217  3.36e-08 ***</a>
<a class="sourceLine" id="cb88-115" href="#cb88-115" data-line-number="115">## mo_sin_rcnt_tl14&lt;mo_sin_rcnt_tl&lt;=21                 0.209792   0.027451   7.6424  2.13e-14 ***</a>
<a class="sourceLine" id="cb88-116" href="#cb88-116" data-line-number="116">## mort_acc2&lt;mort_acc&lt;=3                               0.177831   0.010684  16.6438  3.36e-62 ***</a>
<a class="sourceLine" id="cb88-117" href="#cb88-117" data-line-number="117">## mort_acc1&lt;mort_acc&lt;=2                               0.145860   0.009290  15.7002  1.51e-55 ***</a>
<a class="sourceLine" id="cb88-118" href="#cb88-118" data-line-number="118">## mort_acc0&lt;mort_acc&lt;=1                               0.068731   0.008331   8.2497  1.59e-16 ***</a>
<a class="sourceLine" id="cb88-119" href="#cb88-119" data-line-number="119">## mort_accmort_acc=NA                                 0.190708   0.038050   5.0121  5.38e-07 ***</a>
<a class="sourceLine" id="cb88-120" href="#cb88-120" data-line-number="120">## mort_acc3&lt;mort_acc&lt;=5                               0.210186   0.010893  19.2958  5.83e-83 ***</a>
<a class="sourceLine" id="cb88-121" href="#cb88-121" data-line-number="121">## mort_acc5&lt;mort_acc&lt;=47                              0.259600   0.015064  17.2330  1.50e-66 ***</a>
<a class="sourceLine" id="cb88-122" href="#cb88-122" data-line-number="122">## mths_since_recent_bc35&lt;mths_since_recent_bc&lt;=56     0.274236   0.015404  17.8026  6.75e-71 ***</a>
<a class="sourceLine" id="cb88-123" href="#cb88-123" data-line-number="123">## mths_since_recent_bc56&lt;mths_since_recent_bc&lt;=639    0.367205   0.015573  23.5790 6.33e-123 ***</a>
<a class="sourceLine" id="cb88-124" href="#cb88-124" data-line-number="124">## mths_since_recent_bc7&lt;mths_since_recent_bc&lt;=15      0.099056   0.012802   7.7376  1.01e-14 ***</a>
<a class="sourceLine" id="cb88-125" href="#cb88-125" data-line-number="125">## mths_since_recent_bc15&lt;mths_since_recent_bc&lt;=21     0.147053   0.014378  10.2277  1.49e-24 ***</a>
<a class="sourceLine" id="cb88-126" href="#cb88-126" data-line-number="126">## mths_since_recent_bc4&lt;mths_since_recent_bc&lt;=7       0.052988   0.014330   3.6978  2.17e-04 ***</a>
<a class="sourceLine" id="cb88-127" href="#cb88-127" data-line-number="127">## mths_since_recent_bc21&lt;mths_since_recent_bc&lt;=28     0.188287   0.015366  12.2539  1.60e-34 ***</a>
<a class="sourceLine" id="cb88-128" href="#cb88-128" data-line-number="128">## mths_since_recent_bcmths_since_recent_bc=NA         0.537903   0.085140   6.3179  2.65e-10 ***</a>
<a class="sourceLine" id="cb88-129" href="#cb88-129" data-line-number="129">## mths_since_recent_bc-Inf&lt;mths_since_recent_bc&lt;=2   -0.071835   0.015680  -4.5814  4.62e-06 ***</a>
<a class="sourceLine" id="cb88-130" href="#cb88-130" data-line-number="130">## mths_since_recent_bc28&lt;mths_since_recent_bc&lt;=35     0.211629   0.016642  12.7168  4.77e-37 ***</a>
<a class="sourceLine" id="cb88-131" href="#cb88-131" data-line-number="131">## mths_since_recent_inq4&lt;mths_since_recent_inq&lt;=5     0.152236   0.013564  11.2239  3.11e-29 ***</a>
<a class="sourceLine" id="cb88-132" href="#cb88-132" data-line-number="132">## mths_since_recent_inq16&lt;mths_since_recent_inq&lt;=25   0.171868   0.014558  11.8056  3.65e-32 ***</a>
<a class="sourceLine" id="cb88-133" href="#cb88-133" data-line-number="133">## mths_since_recent_inq8&lt;mths_since_recent_inq&lt;=10    0.121769   0.014386   8.4647  2.57e-17 ***</a>
<a class="sourceLine" id="cb88-134" href="#cb88-134" data-line-number="134">## mths_since_recent_inq5&lt;mths_since_recent_inq&lt;=8     0.119398   0.011539  10.3470  4.32e-25 ***</a>
<a class="sourceLine" id="cb88-135" href="#cb88-135" data-line-number="135">## mths_since_recent_inq2&lt;mths_since_recent_inq&lt;=3     0.122257   0.012381   9.8749  5.35e-23 ***</a>
<a class="sourceLine" id="cb88-136" href="#cb88-136" data-line-number="136">## mths_since_recent_inq1&lt;mths_since_recent_inq&lt;=2     0.088954   0.011877   7.4896  6.91e-14 ***</a>
<a class="sourceLine" id="cb88-137" href="#cb88-137" data-line-number="137">## mths_since_recent_inqmths_since_recent_inq=NA       0.230252   0.014271  16.1338  1.48e-58 ***</a>
<a class="sourceLine" id="cb88-138" href="#cb88-138" data-line-number="138">## mths_since_recent_inq10&lt;mths_since_recent_inq&lt;=16   0.135504   0.012815  10.5737  3.95e-26 ***</a>
<a class="sourceLine" id="cb88-139" href="#cb88-139" data-line-number="139">## mths_since_recent_inq3&lt;mths_since_recent_inq&lt;=4     0.148106   0.012924  11.4601  2.09e-30 ***</a>
<a class="sourceLine" id="cb88-140" href="#cb88-140" data-line-number="140">## mths_since_recent_inq-Inf&lt;mths_since_recent_inq&lt;=0 -0.063732   0.011249  -5.6655  1.47e-08 ***</a>
<a class="sourceLine" id="cb88-141" href="#cb88-141" data-line-number="141">## num_actv_rev_tlnum_actv_rev_tl=NA                         NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-142" href="#cb88-142" data-line-number="142">## num_actv_rev_tl4&lt;num_actv_rev_tl&lt;=5                -0.072060   0.054707  -1.3172  1.88e-01    </a>
<a class="sourceLine" id="cb88-143" href="#cb88-143" data-line-number="143">## num_actv_rev_tl2&lt;num_actv_rev_tl&lt;=3                 0.031014   0.046970   0.6603  5.09e-01    </a>
<a class="sourceLine" id="cb88-144" href="#cb88-144" data-line-number="144">## num_actv_rev_tl7&lt;num_actv_rev_tl&lt;=8                -0.124795   0.060773  -2.0535  4.00e-02 *  </a>
<a class="sourceLine" id="cb88-145" href="#cb88-145" data-line-number="145">## num_actv_rev_tl10&lt;num_actv_rev_tl&lt;=63              -0.116954   0.063720  -1.8354  6.64e-02 .  </a>
<a class="sourceLine" id="cb88-146" href="#cb88-146" data-line-number="146">## num_actv_rev_tl6&lt;num_actv_rev_tl&lt;=7                -0.117490   0.058766  -1.9993  4.56e-02 *  </a>
<a class="sourceLine" id="cb88-147" href="#cb88-147" data-line-number="147">## num_actv_rev_tl5&lt;num_actv_rev_tl&lt;=6                -0.044321   0.056745  -0.7810  4.35e-01    </a>
<a class="sourceLine" id="cb88-148" href="#cb88-148" data-line-number="148">## num_actv_rev_tl3&lt;num_actv_rev_tl&lt;=4                -0.016133   0.051744  -0.3118  7.55e-01    </a>
<a class="sourceLine" id="cb88-149" href="#cb88-149" data-line-number="149">## num_actv_rev_tl8&lt;num_actv_rev_tl&lt;=10               -0.124593   0.061187  -2.0363  4.17e-02 *  </a>
<a class="sourceLine" id="cb88-150" href="#cb88-150" data-line-number="150">## num_rev_tl_bal_gt_0num_rev_tl_bal_gt_0=NA                 NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-151" href="#cb88-151" data-line-number="151">## num_rev_tl_bal_gt_04&lt;num_rev_tl_bal_gt_0&lt;=5        -0.069984   0.054597  -1.2818  2.00e-01    </a>
<a class="sourceLine" id="cb88-152" href="#cb88-152" data-line-number="152">## num_rev_tl_bal_gt_02&lt;num_rev_tl_bal_gt_0&lt;=3        -0.069306   0.046793  -1.4811  1.39e-01    </a>
<a class="sourceLine" id="cb88-153" href="#cb88-153" data-line-number="153">## num_rev_tl_bal_gt_07&lt;num_rev_tl_bal_gt_0&lt;=8        -0.160233   0.060799  -2.6355  8.40e-03 ** </a>
<a class="sourceLine" id="cb88-154" href="#cb88-154" data-line-number="154">## num_rev_tl_bal_gt_010&lt;num_rev_tl_bal_gt_0&lt;=45      -0.333749   0.064018  -5.2134  1.85e-07 ***</a>
<a class="sourceLine" id="cb88-155" href="#cb88-155" data-line-number="155">## num_rev_tl_bal_gt_06&lt;num_rev_tl_bal_gt_0&lt;=7        -0.118130   0.058731  -2.0114  4.43e-02 *  </a>
<a class="sourceLine" id="cb88-156" href="#cb88-156" data-line-number="156">## num_rev_tl_bal_gt_05&lt;num_rev_tl_bal_gt_0&lt;=6        -0.153250   0.056654  -2.7050  6.83e-03 ** </a>
<a class="sourceLine" id="cb88-157" href="#cb88-157" data-line-number="157">## num_rev_tl_bal_gt_03&lt;num_rev_tl_bal_gt_0&lt;=4        -0.083148   0.051615  -1.6109  1.07e-01    </a>
<a class="sourceLine" id="cb88-158" href="#cb88-158" data-line-number="158">## num_rev_tl_bal_gt_08&lt;num_rev_tl_bal_gt_0&lt;=10       -0.205465   0.061274  -3.3532  7.99e-04 ***</a>
<a class="sourceLine" id="cb88-159" href="#cb88-159" data-line-number="159">## num_tl_op_past_12mnum_tl_op_past_12m=NA                   NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-160" href="#cb88-160" data-line-number="160">## num_tl_op_past_12m1&lt;num_tl_op_past_12m&lt;=2          -0.095229   0.008319 -11.4468  2.44e-30 ***</a>
<a class="sourceLine" id="cb88-161" href="#cb88-161" data-line-number="161">## num_tl_op_past_12m2&lt;num_tl_op_past_12m&lt;=3          -0.204745   0.009423 -21.7286 1.10e-104 ***</a>
<a class="sourceLine" id="cb88-162" href="#cb88-162" data-line-number="162">## num_tl_op_past_12m-Inf&lt;num_tl_op_past_12m&lt;=0        0.023845   0.021102   1.1300  2.58e-01    </a>
<a class="sourceLine" id="cb88-163" href="#cb88-163" data-line-number="163">## num_tl_op_past_12m4&lt;num_tl_op_past_12m&lt;=30         -0.346750   0.012180 -28.4698 2.77e-178 ***</a>
<a class="sourceLine" id="cb88-164" href="#cb88-164" data-line-number="164">## num_tl_op_past_12m3&lt;num_tl_op_past_12m&lt;=4          -0.289847   0.011108 -26.0928 4.40e-150 ***</a>
<a class="sourceLine" id="cb88-165" href="#cb88-165" data-line-number="165">## percent_bc_gt_750.958&lt;percent_bc_gt_75&lt;=1          -0.237377   0.015067 -15.7553  6.32e-56 ***</a>
<a class="sourceLine" id="cb88-166" href="#cb88-166" data-line-number="166">## percent_bc_gt_750.346&lt;percent_bc_gt_75&lt;=0.522      -0.245893   0.010829 -22.7070 3.82e-114 ***</a>
<a class="sourceLine" id="cb88-167" href="#cb88-167" data-line-number="167">## percent_bc_gt_750.682&lt;percent_bc_gt_75&lt;=0.958      -0.381802   0.014143 -26.9951 1.69e-160 ***</a>
<a class="sourceLine" id="cb88-168" href="#cb88-168" data-line-number="168">## percent_bc_gt_750.522&lt;percent_bc_gt_75&lt;=0.682      -0.314362   0.012726 -24.7025 1.00e-134 ***</a>
<a class="sourceLine" id="cb88-169" href="#cb88-169" data-line-number="169">## percent_bc_gt_750.034&lt;percent_bc_gt_75&lt;=0.259      -0.128643   0.010266 -12.5314  5.03e-36 ***</a>
<a class="sourceLine" id="cb88-170" href="#cb88-170" data-line-number="170">## percent_bc_gt_75percent_bc_gt_75=NA                -0.036402   0.105889  -0.3438  7.31e-01    </a>
<a class="sourceLine" id="cb88-171" href="#cb88-171" data-line-number="171">## percent_bc_gt_750.259&lt;percent_bc_gt_75&lt;=0.346      -0.178834   0.011988 -14.9175  2.54e-50 ***</a>
<a class="sourceLine" id="cb88-172" href="#cb88-172" data-line-number="172">## tot_hi_cred_limtot_hi_cred_lim=NA                         NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-173" href="#cb88-173" data-line-number="173">## tot_hi_cred_lim131793&lt;tot_hi_cred_lim&lt;=179071       0.236126   0.012159  19.4205  5.18e-84 ***</a>
<a class="sourceLine" id="cb88-174" href="#cb88-174" data-line-number="174">## tot_hi_cred_lim242055&lt;tot_hi_cred_lim&lt;=298516       0.486773   0.016293  29.8765 3.97e-196 ***</a>
<a class="sourceLine" id="cb88-175" href="#cb88-175" data-line-number="175">## tot_hi_cred_lim179071&lt;tot_hi_cred_lim&lt;=208761       0.343525   0.015691  21.8937 2.98e-106 ***</a>
<a class="sourceLine" id="cb88-176" href="#cb88-176" data-line-number="176">## tot_hi_cred_lim102535&lt;tot_hi_cred_lim&lt;=131793       0.194877   0.011558  16.8601  8.84e-64 ***</a>
<a class="sourceLine" id="cb88-177" href="#cb88-177" data-line-number="177">## tot_hi_cred_lim208761&lt;tot_hi_cred_lim&lt;=242055       0.404383   0.016448  24.5849 1.83e-133 ***</a>
<a class="sourceLine" id="cb88-178" href="#cb88-178" data-line-number="178">## tot_hi_cred_lim298516&lt;tot_hi_cred_lim&lt;=383997       0.563844   0.017600  32.0358 3.46e-225 ***</a>
<a class="sourceLine" id="cb88-179" href="#cb88-179" data-line-number="179">## tot_hi_cred_lim487388&lt;tot_hi_cred_lim&lt;=9999999      0.775532   0.023321  33.2549 1.73e-242 ***</a>
<a class="sourceLine" id="cb88-180" href="#cb88-180" data-line-number="180">## tot_hi_cred_lim383997&lt;tot_hi_cred_lim&lt;=487388       0.625857   0.020511  30.5134 1.73e-204 ***</a>
<a class="sourceLine" id="cb88-181" href="#cb88-181" data-line-number="181">## total_bc_limit20950&lt;total_bc_limit&lt;=24806           0.619885   0.013616  45.5268  0.00e+00 ***</a>
<a class="sourceLine" id="cb88-182" href="#cb88-182" data-line-number="182">## total_bc_limit4478&lt;total_bc_limit&lt;=9405             0.233076   0.009441  24.6882 1.43e-134 ***</a>
<a class="sourceLine" id="cb88-183" href="#cb88-183" data-line-number="183">## total_bc_limit34756&lt;total_bc_limit&lt;=47175           0.821077   0.014337  57.2692  0.00e+00 ***</a>
<a class="sourceLine" id="cb88-184" href="#cb88-184" data-line-number="184">## total_bc_limit13970&lt;total_bc_limit&lt;=18174           0.506909   0.011480  44.1556  0.00e+00 ***</a>
<a class="sourceLine" id="cb88-185" href="#cb88-185" data-line-number="185">## total_bc_limit9405&lt;total_bc_limit&lt;=11360            0.354744   0.012379  28.6562 1.34e-180 ***</a>
<a class="sourceLine" id="cb88-186" href="#cb88-186" data-line-number="186">## total_bc_limittotal_bc_limit=NA                           NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-187" href="#cb88-187" data-line-number="187">## total_bc_limit29471&lt;total_bc_limit&lt;=34756           0.733224   0.015208  48.2117  0.00e+00 ***</a>
<a class="sourceLine" id="cb88-188" href="#cb88-188" data-line-number="188">## total_bc_limit47175&lt;total_bc_limit&lt;=1105500         0.993462   0.015229  65.2335  0.00e+00 ***</a>
<a class="sourceLine" id="cb88-189" href="#cb88-189" data-line-number="189">## total_bc_limit11360&lt;total_bc_limit&lt;=13970           0.430396   0.012023  35.7971 1.23e-280 ***</a>
<a class="sourceLine" id="cb88-190" href="#cb88-190" data-line-number="190">## total_bc_limit24806&lt;total_bc_limit&lt;=29471           0.683273   0.014328  47.6872  0.00e+00 ***</a>
<a class="sourceLine" id="cb88-191" href="#cb88-191" data-line-number="191">## total_bc_limit18174&lt;total_bc_limit&lt;=20950           0.570324   0.013874  41.1086  0.00e+00 ***</a>
<a class="sourceLine" id="cb88-192" href="#cb88-192" data-line-number="192">## issue_d2-Inf&lt;issue_d2&lt;=189.062                      0.015175   0.014364   1.0565  2.91e-01    </a>
<a class="sourceLine" id="cb88-193" href="#cb88-193" data-line-number="193">## issue_d2215.111&lt;issue_d2&lt;=258.674                         NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-194" href="#cb88-194" data-line-number="194">## issue_d2258.674&lt;issue_d2&lt;=277.778                         NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-195" href="#cb88-195" data-line-number="195">## issue_d2200.694&lt;issue_d2&lt;=215.111                         NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-196" href="#cb88-196" data-line-number="196">## issue_d2315.062&lt;issue_d2&lt;=357.84                          NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-197" href="#cb88-197" data-line-number="197">## issue_d2189.062&lt;issue_d2&lt;=200.694                         NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-198" href="#cb88-198" data-line-number="198">## issue_d3-Inf&lt;issue_d3&lt;=2599.609                           NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-199" href="#cb88-199" data-line-number="199">## issue_d33154.963&lt;issue_d3&lt;=4160.334                       NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-200" href="#cb88-200" data-line-number="200">## issue_d34160.334&lt;issue_d3&lt;=4629.63                        NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-201" href="#cb88-201" data-line-number="201">## issue_d32843.171&lt;issue_d3&lt;=3154.963                       NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-202" href="#cb88-202" data-line-number="202">## issue_d35592.359&lt;issue_d3&lt;=6769.145                       NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-203" href="#cb88-203" data-line-number="203">## issue_d32599.609&lt;issue_d3&lt;=2843.171                       NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb88-204" href="#cb88-204" data-line-number="204">## </a>
<a class="sourceLine" id="cb88-205" href="#cb88-205" data-line-number="205">## ------------------------------------------------------------------- </a>
<a class="sourceLine" id="cb88-206" href="#cb88-206" data-line-number="206">## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1 </a>
<a class="sourceLine" id="cb88-207" href="#cb88-207" data-line-number="207">## </a>
<a class="sourceLine" id="cb88-208" href="#cb88-208" data-line-number="208">## ---</a>
<a class="sourceLine" id="cb88-209" href="#cb88-209" data-line-number="209">## null df: 1045083; null deviance: 1048231;</a>
<a class="sourceLine" id="cb88-210" href="#cb88-210" data-line-number="210">## residuals df: 1044916; residuals deviance: 976701.2;</a>
<a class="sourceLine" id="cb88-211" href="#cb88-211" data-line-number="211">## # obs.: 1045084; # non-zero weighted obs.: 1045084;</a>
<a class="sourceLine" id="cb88-212" href="#cb88-212" data-line-number="212">## AIC: 977037.2; log Likelihood: -488350.6;</a>
<a class="sourceLine" id="cb88-213" href="#cb88-213" data-line-number="213">## RSS: 1043064; dispersion: 1; iterations: 5;</a>
<a class="sourceLine" id="cb88-214" href="#cb88-214" data-line-number="214">## rank: 168; max tolerance: 4.98e-09; convergence: TRUE.</a></code></pre></div>
<div class="sourceCode" id="cb89"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" href="#cb89-1" data-line-number="1"><span class="co"># There are a number of NA estimates that need to be removed by removing indivual bins</span></a>
<a class="sourceLine" id="cb89-2" href="#cb89-2" data-line-number="2"><span class="kw">length</span>( <span class="kw">which</span>(<span class="kw">is.na</span>(<span class="kw">summary</span>(SGLM_C_train)<span class="op">$</span>coefficient<span class="op">$</span>Estimate)) )</a></code></pre></div>
<div class="sourceCode" id="cb90"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb90-1" href="#cb90-1" data-line-number="1">## [1] 28</a></code></pre></div>
<div class="sourceCode" id="cb91"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" href="#cb91-1" data-line-number="1"><span class="kw">saveRDS</span>(SGLM_C_train, <span class="st">&quot;datasets/SGLM_C_train.rds&quot;</span>)</a></code></pre></div>
<p></p>
</div>
<div id="glm-on-bins" class="section level4">
<h4><span class="header-section-number">3.4.3.2</span> GLM on bins</h4>
<p></p>
<div class="sourceCode" id="cb92"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" href="#cb92-1" data-line-number="1"><span class="kw">gc</span>(<span class="dt">full =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb93"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb93-1" href="#cb93-1" data-line-number="1">##             used   (Mb) gc trigger    (Mb)   max used    (Mb)</a>
<a class="sourceLine" id="cb93-2" href="#cb93-2" data-line-number="2">## Ncells   2836626  151.5    6816128   364.1    6816128   364.1</a>
<a class="sourceLine" id="cb93-3" href="#cb93-3" data-line-number="3">## Vcells 453205208 3457.7 1382206584 10545.4 1826494161 13935.1</a></code></pre></div>
<div class="sourceCode" id="cb94"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" href="#cb94-1" data-line-number="1"><span class="co"># About 700 sec wall-time to complete training dataset</span></a>
<a class="sourceLine" id="cb94-2" href="#cb94-2" data-line-number="2"><span class="co"># The dataset is the sample less duplicate, less zero-ed columns</span></a>
<a class="sourceLine" id="cb94-3" href="#cb94-3" data-line-number="3">{</a>
<a class="sourceLine" id="cb94-4" href="#cb94-4" data-line-number="4">  doMC<span class="op">::</span><span class="kw">registerDoMC</span>(<span class="dt">cores =</span> <span class="dv">1</span>) <span class="co"># Too many processes push over 32GB</span></a>
<a class="sourceLine" id="cb94-5" href="#cb94-5" data-line-number="5">  startTime &lt;-<span class="st"> </span><span class="kw">proc.time</span>()</a>
<a class="sourceLine" id="cb94-6" href="#cb94-6" data-line-number="6">  </a>
<a class="sourceLine" id="cb94-7" href="#cb94-7" data-line-number="7">  loansData &lt;-<span class="st"> </span>loanSampleBins</a>
<a class="sourceLine" id="cb94-8" href="#cb94-8" data-line-number="8">  </a>
<a class="sourceLine" id="cb94-9" href="#cb94-9" data-line-number="9">  SGLM_B_train &lt;-<span class="st"> </span>speedglm<span class="op">::</span><span class="kw">speedglm</span>(isGoodLoan <span class="op">~</span><span class="st"> </span>.,</a>
<a class="sourceLine" id="cb94-10" href="#cb94-10" data-line-number="10">                                     <span class="dt">data =</span> loansData,</a>
<a class="sourceLine" id="cb94-11" href="#cb94-11" data-line-number="11">                                     <span class="dt">family =</span> <span class="kw">binomial</span>())</a>
<a class="sourceLine" id="cb94-12" href="#cb94-12" data-line-number="12">  </a>
<a class="sourceLine" id="cb94-13" href="#cb94-13" data-line-number="13">  doMC<span class="op">::</span><span class="kw">registerDoMC</span>(<span class="dt">cores =</span> <span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb94-14" href="#cb94-14" data-line-number="14">  <span class="kw">cat</span>(<span class="kw">proc.time</span>() <span class="op">-</span><span class="st"> </span>startTime, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb94-15" href="#cb94-15" data-line-number="15">}</a></code></pre></div>
<div class="sourceCode" id="cb95"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb95-1" href="#cb95-1" data-line-number="1">## 168.02 13.458 226.813 0 0</a></code></pre></div>
<div class="sourceCode" id="cb96"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" href="#cb96-1" data-line-number="1"><span class="kw">saveRDS</span>(SGLM_B_train, <span class="st">&quot;datasets/SGLM_B_train.rds&quot;</span>)</a>
<a class="sourceLine" id="cb96-2" href="#cb96-2" data-line-number="2"></a>
<a class="sourceLine" id="cb96-3" href="#cb96-3" data-line-number="3"><span class="co"># There are a number of NA estimates that need to be removed by removing indivual bins</span></a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb97"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" href="#cb97-1" data-line-number="1">speedglm<span class="op">:::</span><span class="kw">summary.speedglm</span>(SGLM_B_train)<span class="op">$</span>coefficients <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb97-2" href="#cb97-2" data-line-number="2"><span class="st">  </span><span class="kw">as.data.frame</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb97-3" href="#cb97-3" data-line-number="3"><span class="st">  </span><span class="kw">rownames_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;binName&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb97-4" href="#cb97-4" data-line-number="4"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(Estimate)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb97-5" href="#cb97-5" data-line-number="5"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a></code></pre></div>
<div class="sourceCode" id="cb98"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb98-1" href="#cb98-1" data-line-number="1">##                                                 binName Estimate Std. Error z value  Pr(&gt;|z|)</a>
<a class="sourceLine" id="cb98-2" href="#cb98-2" data-line-number="2">## 1                  `(loan_amnt) 28000&lt;loan_amnt&lt;=40000`       NA         NA      NA        NA</a>
<a class="sourceLine" id="cb98-3" href="#cb98-3" data-line-number="3">## 2  `(verification_status) verification_status=Verified`       NA         NA      NA        NA</a>
<a class="sourceLine" id="cb98-4" href="#cb98-4" data-line-number="4">## 3                     `(issue_d) 17.75&lt;issue_d&lt;=18.917`       NA         NA      NA        NA</a>
<a class="sourceLine" id="cb98-5" href="#cb98-5" data-line-number="5">## 4                                        `(dti) dti=NA`       NA         NA      NA        NA</a>
<a class="sourceLine" id="cb98-6" href="#cb98-6" data-line-number="6">## 5                  `(inq_last_6mths) inq_last_6mths=NA`       NA         NA      NA        NA</a>
<a class="sourceLine" id="cb98-7" href="#cb98-7" data-line-number="7">## 6                          `(revol_util) revol_util=NA`       NA         NA      NA        NA</a>
<a class="sourceLine" id="cb98-8" href="#cb98-8" data-line-number="8">## 7                        `(open_rv_12m) open_rv_12m=NA`       NA         NA      NA        NA</a>
<a class="sourceLine" id="cb98-9" href="#cb98-9" data-line-number="9">## 8                     `(open_rv_24m) 5&lt;open_rv_24m&lt;=53`       NA         NA      NA        NA</a>
<a class="sourceLine" id="cb98-10" href="#cb98-10" data-line-number="10">## 9                        `(open_rv_24m) open_rv_24m=NA`       NA         NA      NA        NA</a>
<a class="sourceLine" id="cb98-11" href="#cb98-11" data-line-number="11">## 10               `(max_bal_bc) 7905&lt;max_bal_bc&lt;=776843`       NA         NA      NA        NA</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb99"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" href="#cb99-1" data-line-number="1">speedglm<span class="op">:::</span><span class="kw">summary.speedglm</span>(SGLM_B_train)<span class="op">$</span>coefficients <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb99-2" href="#cb99-2" data-line-number="2"><span class="st">  </span><span class="kw">as.data.frame</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb99-3" href="#cb99-3" data-line-number="3"><span class="st">  </span><span class="kw">rownames_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;binName&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb99-4" href="#cb99-4" data-line-number="4"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">p =</span> <span class="st">&quot;Pr(&gt;|z|)&quot;</span>, </a>
<a class="sourceLine" id="cb99-5" href="#cb99-5" data-line-number="5">         <span class="dt">z =</span> <span class="st">&quot;z value&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb99-6" href="#cb99-6" data-line-number="6"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(z)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb99-7" href="#cb99-7" data-line-number="7"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a></code></pre></div>
<div class="sourceCode" id="cb100"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb100-1" href="#cb100-1" data-line-number="1">##                                                     binName  Estimate Std. Error       z         p</a>
<a class="sourceLine" id="cb100-2" href="#cb100-2" data-line-number="2">## 1                        `(loan_amnt) 3500&lt;loan_amnt&lt;=9000` 0.9848386  0.0108316 90.9228  0.00e+00</a>
<a class="sourceLine" id="cb100-3" href="#cb100-3" data-line-number="3">## 2                        `(loan_amnt) -Inf&lt;loan_amnt&lt;=3500` 1.1617352  0.0152225 76.3171  0.00e+00</a>
<a class="sourceLine" id="cb100-4" href="#cb100-4" data-line-number="4">## 3                       `(loan_amnt) 9000&lt;loan_amnt&lt;=10000` 0.7380869  0.0124309 59.3751  0.00e+00</a>
<a class="sourceLine" id="cb100-5" href="#cb100-5" data-line-number="5">## 4                      `(loan_amnt) 10000&lt;loan_amnt&lt;=12000` 0.6002188  0.0121587 49.3652  0.00e+00</a>
<a class="sourceLine" id="cb100-6" href="#cb100-6" data-line-number="6">## 5  `(verification_status) verification_status=Not Verified` 0.2840857  0.0070796 40.1275  0.00e+00</a>
<a class="sourceLine" id="cb100-7" href="#cb100-7" data-line-number="7">## 6                      `(loan_amnt) 14975&lt;loan_amnt&lt;=15000` 0.5501235  0.0142603 38.5774  0.00e+00</a>
<a class="sourceLine" id="cb100-8" href="#cb100-8" data-line-number="8">## 7                      `(loan_amnt) 12000&lt;loan_amnt&lt;=14975` 0.5037774  0.0131783 38.2277  0.00e+00</a>
<a class="sourceLine" id="cb100-9" href="#cb100-9" data-line-number="9">## 8            `(num_tl_op_past_12m) 0&lt;num_tl_op_past_12m&lt;=1` 0.3467503  0.0121796 28.4698 2.77e-178</a>
<a class="sourceLine" id="cb100-10" href="#cb100-10" data-line-number="10">## 9                      `(loan_amnt) 15000&lt;loan_amnt&lt;=17000` 0.3762410  0.0135998 27.6652 1.83e-168</a>
<a class="sourceLine" id="cb100-11" href="#cb100-11" data-line-number="11">## 10                              `(mort_acc) 5&lt;mort_acc&lt;=47` 1.0623545  0.0423491 25.0856 7.14e-139</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb101"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" href="#cb101-1" data-line-number="1"><span class="co"># Does the model throw NAs? They are produced not only for identical variables, but also co-linear</span></a>
<a class="sourceLine" id="cb101-2" href="#cb101-2" data-line-number="2"><span class="co"># combinations. Let us select those variables:</span></a>
<a class="sourceLine" id="cb101-3" href="#cb101-3" data-line-number="3"></a>
<a class="sourceLine" id="cb101-4" href="#cb101-4" data-line-number="4">NAsFirstTraining &lt;-</a>
<a class="sourceLine" id="cb101-5" href="#cb101-5" data-line-number="5"><span class="st">  </span></a>
<a class="sourceLine" id="cb101-6" href="#cb101-6" data-line-number="6"><span class="st">  </span><span class="co"># Take the results (just the estimated coefficients) from the model</span></a>
<a class="sourceLine" id="cb101-7" href="#cb101-7" data-line-number="7"><span class="st">  </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb101-8" href="#cb101-8" data-line-number="8">    <span class="dt">name =</span> <span class="kw">rownames</span>(<span class="kw">summary</span>(SGLM_B_train)<span class="op">$</span>coefficient),</a>
<a class="sourceLine" id="cb101-9" href="#cb101-9" data-line-number="9">    <span class="dt">estimate =</span> <span class="kw">summary</span>(SGLM_B_train)<span class="op">$</span>coefficient<span class="op">$</span>Estimate</a>
<a class="sourceLine" id="cb101-10" href="#cb101-10" data-line-number="10">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb101-11" href="#cb101-11" data-line-number="11"><span class="st">  </span></a>
<a class="sourceLine" id="cb101-12" href="#cb101-12" data-line-number="12"><span class="st">  </span><span class="co"># Reformat the names to be the same as in the bins</span></a>
<a class="sourceLine" id="cb101-13" href="#cb101-13" data-line-number="13"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">name =</span> stringr<span class="op">::</span><span class="kw">str_remove_all</span>(name, <span class="st">&quot;\`&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb101-14" href="#cb101-14" data-line-number="14"><span class="st">  </span></a>
<a class="sourceLine" id="cb101-15" href="#cb101-15" data-line-number="15"><span class="st">  </span><span class="co"># Make sure that repsonse is not deleted by mistake and list all NAs</span></a>
<a class="sourceLine" id="cb101-16" href="#cb101-16" data-line-number="16"><span class="st">  </span><span class="kw">filter</span>(name <span class="op">!=</span><span class="st"> &quot;isGoodLoan&quot;</span> <span class="op">&amp;</span><span class="st"> </span><span class="kw">is.na</span>(estimate)) </a>
<a class="sourceLine" id="cb101-17" href="#cb101-17" data-line-number="17"></a>
<a class="sourceLine" id="cb101-18" href="#cb101-18" data-line-number="18">NAsFirstTraining &lt;-<span class="st"> </span>NAsFirstTraining<span class="op">$</span>name</a></code></pre></div>
<p></p>
</div>
</div>
<div id="second-training" class="section level3">
<h3><span class="header-section-number">3.4.4</span> Second training</h3>
<p></p>
<div class="sourceCode" id="cb102"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" href="#cb102-1" data-line-number="1"><span class="kw">gc</span>(<span class="dt">full =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb103"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb103-1" href="#cb103-1" data-line-number="1">##             used   (Mb) gc trigger    (Mb)   max used    (Mb)</a>
<a class="sourceLine" id="cb103-2" href="#cb103-2" data-line-number="2">## Ncells   2838703  151.7    6816128   364.1    6816128   364.1</a>
<a class="sourceLine" id="cb103-3" href="#cb103-3" data-line-number="3">## Vcells 453263099 3458.2 1326982320 10124.1 1826494161 13935.1</a></code></pre></div>
<div class="sourceCode" id="cb104"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" href="#cb104-1" data-line-number="1"><span class="co"># Start the model training again</span></a>
<a class="sourceLine" id="cb104-2" href="#cb104-2" data-line-number="2">{</a>
<a class="sourceLine" id="cb104-3" href="#cb104-3" data-line-number="3">  startTime &lt;-<span class="st"> </span><span class="kw">proc.time</span>()</a>
<a class="sourceLine" id="cb104-4" href="#cb104-4" data-line-number="4">  doMC<span class="op">::</span><span class="kw">registerDoMC</span>(<span class="dt">cores =</span> <span class="dv">2</span>) <span class="co"># Too many processes push over 32GB if more than 2</span></a>
<a class="sourceLine" id="cb104-5" href="#cb104-5" data-line-number="5">  </a>
<a class="sourceLine" id="cb104-6" href="#cb104-6" data-line-number="6">  loansData &lt;-<span class="st"> </span>loanSampleBins <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb104-7" href="#cb104-7" data-line-number="7"><span class="st">    </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">one_of</span>( <span class="kw">c</span>(duplicateNames, </a>
<a class="sourceLine" id="cb104-8" href="#cb104-8" data-line-number="8">                      zeroColumnsNames, </a>
<a class="sourceLine" id="cb104-9" href="#cb104-9" data-line-number="9">                      NAsFirstTraining)))</a>
<a class="sourceLine" id="cb104-10" href="#cb104-10" data-line-number="10">  </a>
<a class="sourceLine" id="cb104-11" href="#cb104-11" data-line-number="11">  SGLM_B_retrain &lt;-<span class="st"> </span>speedglm<span class="op">::</span><span class="kw">speedglm</span>(isGoodLoan <span class="op">~</span><span class="st"> </span>.,</a>
<a class="sourceLine" id="cb104-12" href="#cb104-12" data-line-number="12">                                       <span class="dt">data =</span> loansData,</a>
<a class="sourceLine" id="cb104-13" href="#cb104-13" data-line-number="13">                                       <span class="dt">family =</span> <span class="kw">binomial</span>())</a>
<a class="sourceLine" id="cb104-14" href="#cb104-14" data-line-number="14">  </a>
<a class="sourceLine" id="cb104-15" href="#cb104-15" data-line-number="15">  doMC<span class="op">::</span><span class="kw">registerDoMC</span>(<span class="dt">cores =</span> <span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb104-16" href="#cb104-16" data-line-number="16">  <span class="kw">cat</span>(<span class="kw">proc.time</span>() <span class="op">-</span><span class="st"> </span>startTime)</a>
<a class="sourceLine" id="cb104-17" href="#cb104-17" data-line-number="17">}</a></code></pre></div>
<div class="sourceCode" id="cb105"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb105-1" href="#cb105-1" data-line-number="1">## 146.937 15.37 217.314 0 0</a></code></pre></div>
<div class="sourceCode" id="cb106"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" href="#cb106-1" data-line-number="1"><span class="kw">saveRDS</span>(SGLM_B_retrain, <span class="st">&quot;datasets/SGLM_B_retrain.rds&quot;</span>)</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb107"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" href="#cb107-1" data-line-number="1">speedglm<span class="op">:::</span><span class="kw">summary.speedglm</span>(SGLM_B_retrain)<span class="op">$</span>coefficients <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb107-2" href="#cb107-2" data-line-number="2"><span class="st">  </span><span class="kw">as.data.frame</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb107-3" href="#cb107-3" data-line-number="3"><span class="st">  </span><span class="kw">rownames_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;binName&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb107-4" href="#cb107-4" data-line-number="4"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">p =</span> <span class="st">&quot;Pr(&gt;|z|)&quot;</span>, </a>
<a class="sourceLine" id="cb107-5" href="#cb107-5" data-line-number="5">         <span class="dt">z =</span> <span class="st">&quot;z value&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb107-6" href="#cb107-6" data-line-number="6"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(z)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb107-7" href="#cb107-7" data-line-number="7"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a></code></pre></div>
<div class="sourceCode" id="cb108"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb108-1" href="#cb108-1" data-line-number="1">##                                                     binName  Estimate Std. Error       z         p</a>
<a class="sourceLine" id="cb108-2" href="#cb108-2" data-line-number="2">## 1                        `(loan_amnt) 3500&lt;loan_amnt&lt;=9000` 0.9848386  0.0108316 90.9228  0.00e+00</a>
<a class="sourceLine" id="cb108-3" href="#cb108-3" data-line-number="3">## 2                        `(loan_amnt) -Inf&lt;loan_amnt&lt;=3500` 1.1617352  0.0152225 76.3171  0.00e+00</a>
<a class="sourceLine" id="cb108-4" href="#cb108-4" data-line-number="4">## 3                       `(loan_amnt) 9000&lt;loan_amnt&lt;=10000` 0.7380869  0.0124309 59.3751  0.00e+00</a>
<a class="sourceLine" id="cb108-5" href="#cb108-5" data-line-number="5">## 4                      `(loan_amnt) 10000&lt;loan_amnt&lt;=12000` 0.6002188  0.0121587 49.3652  0.00e+00</a>
<a class="sourceLine" id="cb108-6" href="#cb108-6" data-line-number="6">## 5  `(verification_status) verification_status=Not Verified` 0.2840857  0.0070796 40.1275  0.00e+00</a>
<a class="sourceLine" id="cb108-7" href="#cb108-7" data-line-number="7">## 6                      `(loan_amnt) 14975&lt;loan_amnt&lt;=15000` 0.5501235  0.0142603 38.5774  0.00e+00</a>
<a class="sourceLine" id="cb108-8" href="#cb108-8" data-line-number="8">## 7                      `(loan_amnt) 12000&lt;loan_amnt&lt;=14975` 0.5037774  0.0131783 38.2277  0.00e+00</a>
<a class="sourceLine" id="cb108-9" href="#cb108-9" data-line-number="9">## 8            `(num_tl_op_past_12m) 0&lt;num_tl_op_past_12m&lt;=1` 0.3467503  0.0121796 28.4698 2.77e-178</a>
<a class="sourceLine" id="cb108-10" href="#cb108-10" data-line-number="10">## 9                      `(loan_amnt) 15000&lt;loan_amnt&lt;=17000` 0.3762410  0.0135998 27.6652 1.83e-168</a>
<a class="sourceLine" id="cb108-11" href="#cb108-11" data-line-number="11">## 10                              `(mort_acc) 5&lt;mort_acc&lt;=47` 1.0623545  0.0423491 25.0856 7.14e-139</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb109"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" href="#cb109-1" data-line-number="1"><span class="co"># Just in case, new NAs popped up. Then select variables whose significance value is under 2 sigmas.</span></a>
<a class="sourceLine" id="cb109-2" href="#cb109-2" data-line-number="2"></a>
<a class="sourceLine" id="cb109-3" href="#cb109-3" data-line-number="3">NAsSecondTraining &lt;-</a>
<a class="sourceLine" id="cb109-4" href="#cb109-4" data-line-number="4"><span class="st">  </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb109-5" href="#cb109-5" data-line-number="5">    <span class="dt">name =</span> <span class="kw">rownames</span>(<span class="kw">summary</span>(SGLM_B_retrain)<span class="op">$</span>coefficient),</a>
<a class="sourceLine" id="cb109-6" href="#cb109-6" data-line-number="6">    <span class="dt">estimate =</span> <span class="kw">summary</span>(SGLM_B_retrain)<span class="op">$</span>coefficient<span class="op">$</span>Estimate, </a>
<a class="sourceLine" id="cb109-7" href="#cb109-7" data-line-number="7">    <span class="dt">zValue =</span> <span class="kw">abs</span>(<span class="kw">summary</span>(SGLM_B_retrain)<span class="op">$</span>coefficient<span class="op">$</span><span class="st">&quot;z value&quot;</span>)</a>
<a class="sourceLine" id="cb109-8" href="#cb109-8" data-line-number="8">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb109-9" href="#cb109-9" data-line-number="9"><span class="st">  </span></a>
<a class="sourceLine" id="cb109-10" href="#cb109-10" data-line-number="10"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">name =</span> stringr<span class="op">::</span><span class="kw">str_remove_all</span>(name, <span class="st">&quot;\`&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb109-11" href="#cb109-11" data-line-number="11"><span class="st">  </span><span class="kw">filter</span>(name <span class="op">!=</span><span class="st"> &quot;isGoodLoan&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb109-12" href="#cb109-12" data-line-number="12"><span class="st">  </span></a>
<a class="sourceLine" id="cb109-13" href="#cb109-13" data-line-number="13"><span class="st">  </span><span class="co"># Remove stray NAs or anything less than 2 sigmas</span></a>
<a class="sourceLine" id="cb109-14" href="#cb109-14" data-line-number="14"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(estimate) <span class="op">|</span><span class="st"> </span>zValue <span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb109-15" href="#cb109-15" data-line-number="15"></a>
<a class="sourceLine" id="cb109-16" href="#cb109-16" data-line-number="16">NAsSecondTraining &lt;-<span class="st"> </span>NAsSecondTraining<span class="op">$</span>name</a></code></pre></div>
<p></p>
</div>
<div id="third-training" class="section level3">
<h3><span class="header-section-number">3.4.5</span> Third training</h3>
<p></p>
<div class="sourceCode" id="cb110"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" href="#cb110-1" data-line-number="1"><span class="kw">gc</span>(<span class="dt">full =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb111"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb111-1" href="#cb111-1" data-line-number="1">##             used   (Mb) gc trigger   (Mb)   max used    (Mb)</a>
<a class="sourceLine" id="cb111-2" href="#cb111-2" data-line-number="2">## Ncells   2839877  151.7    6816128  364.1    6816128   364.1</a>
<a class="sourceLine" id="cb111-3" href="#cb111-3" data-line-number="3">## Vcells 453307703 3458.5 1273967028 9719.6 1826494161 13935.1</a></code></pre></div>
<div class="sourceCode" id="cb112"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" href="#cb112-1" data-line-number="1"><span class="co"># Start the model training again. About 350 sec.</span></a>
<a class="sourceLine" id="cb112-2" href="#cb112-2" data-line-number="2">{</a>
<a class="sourceLine" id="cb112-3" href="#cb112-3" data-line-number="3">  </a>
<a class="sourceLine" id="cb112-4" href="#cb112-4" data-line-number="4">  startTime &lt;-<span class="st"> </span><span class="kw">proc.time</span>()</a>
<a class="sourceLine" id="cb112-5" href="#cb112-5" data-line-number="5">  doMC<span class="op">::</span><span class="kw">registerDoMC</span>(<span class="dt">cores =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb112-6" href="#cb112-6" data-line-number="6">  </a>
<a class="sourceLine" id="cb112-7" href="#cb112-7" data-line-number="7">  loansData &lt;-<span class="st"> </span>loanSampleBins <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb112-8" href="#cb112-8" data-line-number="8"><span class="st">    </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">one_of</span>( <span class="kw">c</span>(</a>
<a class="sourceLine" id="cb112-9" href="#cb112-9" data-line-number="9">      duplicateNames,</a>
<a class="sourceLine" id="cb112-10" href="#cb112-10" data-line-number="10">      zeroColumnsNames,</a>
<a class="sourceLine" id="cb112-11" href="#cb112-11" data-line-number="11">      NAsFirstTraining,</a>
<a class="sourceLine" id="cb112-12" href="#cb112-12" data-line-number="12">      NAsSecondTraining</a>
<a class="sourceLine" id="cb112-13" href="#cb112-13" data-line-number="13">    )))</a>
<a class="sourceLine" id="cb112-14" href="#cb112-14" data-line-number="14">  </a>
<a class="sourceLine" id="cb112-15" href="#cb112-15" data-line-number="15">  SGLM_B_reretrain &lt;-<span class="st"> </span>speedglm<span class="op">::</span><span class="kw">speedglm</span>(isGoodLoan <span class="op">~</span><span class="st"> </span>.,</a>
<a class="sourceLine" id="cb112-16" href="#cb112-16" data-line-number="16">                                         <span class="dt">data =</span> loansData,</a>
<a class="sourceLine" id="cb112-17" href="#cb112-17" data-line-number="17">                                         <span class="dt">family =</span> <span class="kw">binomial</span>())</a>
<a class="sourceLine" id="cb112-18" href="#cb112-18" data-line-number="18">  </a>
<a class="sourceLine" id="cb112-19" href="#cb112-19" data-line-number="19">  doMC<span class="op">::</span><span class="kw">registerDoMC</span>(<span class="dt">cores =</span> <span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb112-20" href="#cb112-20" data-line-number="20">  <span class="kw">cat</span>(<span class="kw">proc.time</span>() <span class="op">-</span><span class="st"> </span>startTime)</a>
<a class="sourceLine" id="cb112-21" href="#cb112-21" data-line-number="21">}</a></code></pre></div>
<div class="sourceCode" id="cb113"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb113-1" href="#cb113-1" data-line-number="1">## 51.353 4.384 72.893 0 0</a></code></pre></div>
<div class="sourceCode" id="cb114"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" href="#cb114-1" data-line-number="1"><span class="kw">saveRDS</span>(SGLM_B_reretrain, <span class="st">&quot;datasets/SGLM_B_reretrain.rds&quot;</span>)</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb115"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" href="#cb115-1" data-line-number="1">speedglm<span class="op">:::</span><span class="kw">summary.speedglm</span>(SGLM_B_reretrain)<span class="op">$</span>coefficients <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb115-2" href="#cb115-2" data-line-number="2"><span class="st">  </span><span class="kw">as.data.frame</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb115-3" href="#cb115-3" data-line-number="3"><span class="st">  </span><span class="kw">rownames_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;binName&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb115-4" href="#cb115-4" data-line-number="4"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">p =</span> <span class="st">&quot;Pr(&gt;|z|)&quot;</span>, </a>
<a class="sourceLine" id="cb115-5" href="#cb115-5" data-line-number="5">         <span class="dt">z =</span> <span class="st">&quot;z value&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb115-6" href="#cb115-6" data-line-number="6"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(z)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb115-7" href="#cb115-7" data-line-number="7"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a></code></pre></div>
<div class="sourceCode" id="cb116"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb116-1" href="#cb116-1" data-line-number="1">##                                                     binName  Estimate Std. Error       z         p</a>
<a class="sourceLine" id="cb116-2" href="#cb116-2" data-line-number="2">## 1                        `(loan_amnt) 3500&lt;loan_amnt&lt;=9000` 0.9383885  0.0107265 87.4833  0.00e+00</a>
<a class="sourceLine" id="cb116-3" href="#cb116-3" data-line-number="3">## 2                        `(loan_amnt) -Inf&lt;loan_amnt&lt;=3500` 1.1079606  0.0151211 73.2723  0.00e+00</a>
<a class="sourceLine" id="cb116-4" href="#cb116-4" data-line-number="4">## 3                       `(loan_amnt) 9000&lt;loan_amnt&lt;=10000` 0.7026804  0.0123379 56.9531  0.00e+00</a>
<a class="sourceLine" id="cb116-5" href="#cb116-5" data-line-number="5">## 4                      `(loan_amnt) 10000&lt;loan_amnt&lt;=12000` 0.5616891  0.0120636 46.5606  0.00e+00</a>
<a class="sourceLine" id="cb116-6" href="#cb116-6" data-line-number="6">## 5  `(verification_status) verification_status=Not Verified` 0.3225105  0.0070171 45.9606  0.00e+00</a>
<a class="sourceLine" id="cb116-7" href="#cb116-7" data-line-number="7">## 6         `(num_tl_op_past_12m) -Inf&lt;num_tl_op_past_12m&lt;=0` 0.5700935  0.0133125 42.8238  0.00e+00</a>
<a class="sourceLine" id="cb116-8" href="#cb116-8" data-line-number="8">## 7            `(num_tl_op_past_12m) 0&lt;num_tl_op_past_12m&lt;=1` 0.4623390  0.0112317 41.1636  0.00e+00</a>
<a class="sourceLine" id="cb116-9" href="#cb116-9" data-line-number="9">## 8                      `(loan_amnt) 14975&lt;loan_amnt&lt;=15000` 0.5296854  0.0141852 37.3408 3.57e-305</a>
<a class="sourceLine" id="cb116-10" href="#cb116-10" data-line-number="10">## 9       `(num_rev_tl_bal_gt_0) -Inf&lt;num_rev_tl_bal_gt_0&lt;=2` 0.4810422  0.0129686 37.0927 3.68e-301</a>
<a class="sourceLine" id="cb116-11" href="#cb116-11" data-line-number="11">## 10                     `(loan_amnt) 12000&lt;loan_amnt&lt;=14975` 0.4583936  0.0130818 35.0405 5.44e-269</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb117"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" href="#cb117-1" data-line-number="1">NAsThirdTraining &lt;-</a>
<a class="sourceLine" id="cb117-2" href="#cb117-2" data-line-number="2"><span class="st">  </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb117-3" href="#cb117-3" data-line-number="3">    <span class="dt">name     =</span> <span class="kw">rownames</span>(<span class="kw">summary</span>(SGLM_B_reretrain)<span class="op">$</span>coefficient),</a>
<a class="sourceLine" id="cb117-4" href="#cb117-4" data-line-number="4">    <span class="dt">estimate =</span> <span class="kw">summary</span>(SGLM_B_reretrain)<span class="op">$</span>coefficient<span class="op">$</span>Estimate, </a>
<a class="sourceLine" id="cb117-5" href="#cb117-5" data-line-number="5">    <span class="dt">zValue   =</span> <span class="kw">abs</span>(<span class="kw">summary</span>(SGLM_B_reretrain)<span class="op">$</span>coefficient<span class="op">$</span><span class="st">&quot;z value&quot;</span>)</a>
<a class="sourceLine" id="cb117-6" href="#cb117-6" data-line-number="6">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb117-7" href="#cb117-7" data-line-number="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">name =</span> stringr<span class="op">::</span><span class="kw">str_remove_all</span>(name, <span class="st">&quot;\`&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb117-8" href="#cb117-8" data-line-number="8"><span class="st">  </span><span class="kw">filter</span>(name <span class="op">!=</span><span class="st"> &quot;isGoodLoan&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb117-9" href="#cb117-9" data-line-number="9"><span class="st">  </span></a>
<a class="sourceLine" id="cb117-10" href="#cb117-10" data-line-number="10"><span class="st">  </span><span class="co"># Remove stray NAs (Shouldn&#39;t be any) or less than 2 sigmas</span></a>
<a class="sourceLine" id="cb117-11" href="#cb117-11" data-line-number="11"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(estimate) <span class="op">|</span><span class="st"> </span>zValue <span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb117-12" href="#cb117-12" data-line-number="12"></a>
<a class="sourceLine" id="cb117-13" href="#cb117-13" data-line-number="13">NAsThirdTraining &lt;-<span class="st"> </span>NAsThirdTraining<span class="op">$</span>name</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb118"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" href="#cb118-1" data-line-number="1">speedglm<span class="op">:::</span><span class="kw">summary.speedglm</span>(SGLM_B_train)</a></code></pre></div>
<div class="sourceCode" id="cb119"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb119-1" href="#cb119-1" data-line-number="1">## Generalized Linear Model of class &#39;speedglm&#39;:</a>
<a class="sourceLine" id="cb119-2" href="#cb119-2" data-line-number="2">## </a>
<a class="sourceLine" id="cb119-3" href="#cb119-3" data-line-number="3">## Call:  speedglm::speedglm(formula = isGoodLoan ~ ., data = loansData,      family = binomial()) </a>
<a class="sourceLine" id="cb119-4" href="#cb119-4" data-line-number="4">## </a>
<a class="sourceLine" id="cb119-5" href="#cb119-5" data-line-number="5">## Coefficients:</a>
<a class="sourceLine" id="cb119-6" href="#cb119-6" data-line-number="6">##  ------------------------------------------------------------------ </a>
<a class="sourceLine" id="cb119-7" href="#cb119-7" data-line-number="7">##                                                              Estimate Std. Error  z value  Pr(&gt;|z|)    </a>
<a class="sourceLine" id="cb119-8" href="#cb119-8" data-line-number="8">## (Intercept)                                                  0.611369   0.757976   0.8066  4.20e-01    </a>
<a class="sourceLine" id="cb119-9" href="#cb119-9" data-line-number="9">## `(loan_amnt) -Inf&lt;loan_amnt&lt;=3500`                           1.161735   0.015222  76.3171  0.00e+00 ***</a>
<a class="sourceLine" id="cb119-10" href="#cb119-10" data-line-number="10">## `(loan_amnt) 3500&lt;loan_amnt&lt;=9000`                           0.984839   0.010832  90.9228  0.00e+00 ***</a>
<a class="sourceLine" id="cb119-11" href="#cb119-11" data-line-number="11">## `(loan_amnt) 9000&lt;loan_amnt&lt;=10000`                          0.738087   0.012431  59.3751  0.00e+00 ***</a>
<a class="sourceLine" id="cb119-12" href="#cb119-12" data-line-number="12">## `(loan_amnt) 10000&lt;loan_amnt&lt;=12000`                         0.600219   0.012159  49.3652  0.00e+00 ***</a>
<a class="sourceLine" id="cb119-13" href="#cb119-13" data-line-number="13">## `(loan_amnt) 12000&lt;loan_amnt&lt;=14975`                         0.503777   0.013178  38.2277  0.00e+00 ***</a>
<a class="sourceLine" id="cb119-14" href="#cb119-14" data-line-number="14">## `(loan_amnt) 14975&lt;loan_amnt&lt;=15000`                         0.550123   0.014260  38.5774  0.00e+00 ***</a>
<a class="sourceLine" id="cb119-15" href="#cb119-15" data-line-number="15">## `(loan_amnt) 15000&lt;loan_amnt&lt;=17000`                         0.376241   0.013600  27.6652 1.83e-168 ***</a>
<a class="sourceLine" id="cb119-16" href="#cb119-16" data-line-number="16">## `(loan_amnt) 17000&lt;loan_amnt&lt;=19950`                         0.278316   0.013441  20.7065  3.03e-95 ***</a>
<a class="sourceLine" id="cb119-17" href="#cb119-17" data-line-number="17">## `(loan_amnt) 19950&lt;loan_amnt&lt;=28000`                         0.238928   0.010063  23.7424 1.32e-124 ***</a>
<a class="sourceLine" id="cb119-18" href="#cb119-18" data-line-number="18">## `(loan_amnt) 28000&lt;loan_amnt&lt;=40000`                               NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-19" href="#cb119-19" data-line-number="19">## `(verification_status) verification_status=Not Verified`     0.284086   0.007080  40.1275  0.00e+00 ***</a>
<a class="sourceLine" id="cb119-20" href="#cb119-20" data-line-number="20">## `(verification_status) verification_status=Source Verified`  0.071564   0.006072  11.7861  4.60e-32 ***</a>
<a class="sourceLine" id="cb119-21" href="#cb119-21" data-line-number="21">## `(verification_status) verification_status=Verified`               NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-22" href="#cb119-22" data-line-number="22">## `(issue_d) -Inf&lt;issue_d&lt;=14.167`                             0.208104   0.020191  10.3070  6.55e-25 ***</a>
<a class="sourceLine" id="cb119-23" href="#cb119-23" data-line-number="23">## `(issue_d) 14.167&lt;issue_d&lt;=14.667`                           0.012499   0.018921   0.6606  5.09e-01    </a>
<a class="sourceLine" id="cb119-24" href="#cb119-24" data-line-number="24">## `(issue_d) 14.667&lt;issue_d&lt;=16.083`                          -0.058014   0.015928  -3.6423  2.70e-04 ***</a>
<a class="sourceLine" id="cb119-25" href="#cb119-25" data-line-number="25">## `(issue_d) 16.083&lt;issue_d&lt;=16.667`                          -0.419787   0.013772 -30.4804 4.74e-204 ***</a>
<a class="sourceLine" id="cb119-26" href="#cb119-26" data-line-number="26">## `(issue_d) 16.667&lt;issue_d&lt;=17.75`                           -0.362928   0.013544 -26.7952 3.67e-158 ***</a>
<a class="sourceLine" id="cb119-27" href="#cb119-27" data-line-number="27">## `(issue_d) 17.75&lt;issue_d&lt;=18.917`                                  NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-28" href="#cb119-28" data-line-number="28">## `(dti) -Inf&lt;dti&lt;=0.097`                                      0.257596   0.164234   1.5685  1.17e-01    </a>
<a class="sourceLine" id="cb119-29" href="#cb119-29" data-line-number="29">## `(dti) 0.097&lt;dti&lt;=0.122`                                     0.230688   0.164341   1.4037  1.60e-01    </a>
<a class="sourceLine" id="cb119-30" href="#cb119-30" data-line-number="30">## `(dti) 0.122&lt;dti&lt;=0.143`                                     0.197998   0.164336   1.2048  2.28e-01    </a>
<a class="sourceLine" id="cb119-31" href="#cb119-31" data-line-number="31">## `(dti) 0.143&lt;dti&lt;=0.156`                                     0.137838   0.164463   0.8381  4.02e-01    </a>
<a class="sourceLine" id="cb119-32" href="#cb119-32" data-line-number="32">## `(dti) 0.156&lt;dti&lt;=0.178`                                     0.098720   0.164307   0.6008  5.48e-01    </a>
<a class="sourceLine" id="cb119-33" href="#cb119-33" data-line-number="33">## `(dti) 0.178&lt;dti&lt;=0.192`                                     0.057576   0.164427   0.3502  7.26e-01    </a>
<a class="sourceLine" id="cb119-34" href="#cb119-34" data-line-number="34">## `(dti) 0.192&lt;dti&lt;=0.217`                                     0.006734   0.164296   0.0410  9.67e-01    </a>
<a class="sourceLine" id="cb119-35" href="#cb119-35" data-line-number="35">## `(dti) 0.217&lt;dti&lt;=0.236`                                    -0.072632   0.164370  -0.4419  6.59e-01    </a>
<a class="sourceLine" id="cb119-36" href="#cb119-36" data-line-number="36">## `(dti) 0.236&lt;dti&lt;=0.254`                                    -0.115296   0.164416  -0.7012  4.83e-01    </a>
<a class="sourceLine" id="cb119-37" href="#cb119-37" data-line-number="37">## `(dti) 0.254&lt;dti&lt;=0.272`                                    -0.176954   0.164443  -1.0761  2.82e-01    </a>
<a class="sourceLine" id="cb119-38" href="#cb119-38" data-line-number="38">## `(dti) 0.272&lt;dti&lt;=0.299`                                    -0.234347   0.164382  -1.4256  1.54e-01    </a>
<a class="sourceLine" id="cb119-39" href="#cb119-39" data-line-number="39">## `(dti) 0.299&lt;dti&lt;=9.99`                                     -0.399978   0.164280  -2.4347  1.49e-02 *  </a>
<a class="sourceLine" id="cb119-40" href="#cb119-40" data-line-number="40">## `(dti) dti=NA`                                                     NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-41" href="#cb119-41" data-line-number="41">## `(inq_last_6mths) -Inf&lt;inq_last_6mths&lt;=0`                   -0.155668   0.746685  -0.2085  8.35e-01    </a>
<a class="sourceLine" id="cb119-42" href="#cb119-42" data-line-number="42">## `(inq_last_6mths) 0&lt;inq_last_6mths&lt;=1`                      -0.261259   0.746688  -0.3499  7.26e-01    </a>
<a class="sourceLine" id="cb119-43" href="#cb119-43" data-line-number="43">## `(inq_last_6mths) 1&lt;inq_last_6mths&lt;=2`                      -0.357904   0.746709  -0.4793  6.32e-01    </a>
<a class="sourceLine" id="cb119-44" href="#cb119-44" data-line-number="44">## `(inq_last_6mths) 2&lt;inq_last_6mths&lt;=33`                     -0.504281   0.746733  -0.6753  4.99e-01    </a>
<a class="sourceLine" id="cb119-45" href="#cb119-45" data-line-number="45">## `(inq_last_6mths) inq_last_6mths=NA`                               NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-46" href="#cb119-46" data-line-number="46">## `(revol_util) -Inf&lt;revol_util&lt;=0.147`                        0.325272   0.105784   3.0749  2.11e-03 ** </a>
<a class="sourceLine" id="cb119-47" href="#cb119-47" data-line-number="47">## `(revol_util) 0.147&lt;revol_util&lt;=0.217`                       0.343442   0.106003   3.2399  1.20e-03 ** </a>
<a class="sourceLine" id="cb119-48" href="#cb119-48" data-line-number="48">## `(revol_util) 0.217&lt;revol_util&lt;=0.316`                       0.335985   0.105556   3.1830  1.46e-03 ** </a>
<a class="sourceLine" id="cb119-49" href="#cb119-49" data-line-number="49">## `(revol_util) 0.316&lt;revol_util&lt;=0.388`                       0.296206   0.105563   2.8060  5.02e-03 ** </a>
<a class="sourceLine" id="cb119-50" href="#cb119-50" data-line-number="50">## `(revol_util) 0.388&lt;revol_util&lt;=0.479`                       0.244804   0.105419   2.3222  2.02e-02 *  </a>
<a class="sourceLine" id="cb119-51" href="#cb119-51" data-line-number="51">## `(revol_util) 0.479&lt;revol_util&lt;=0.569`                       0.208576   0.105384   1.9792  4.78e-02 *  </a>
<a class="sourceLine" id="cb119-52" href="#cb119-52" data-line-number="52">## `(revol_util) 0.569&lt;revol_util&lt;=0.718`                       0.176574   0.105285   1.6771  9.35e-02 .  </a>
<a class="sourceLine" id="cb119-53" href="#cb119-53" data-line-number="53">## `(revol_util) 0.718&lt;revol_util&lt;=0.869`                       0.109122   0.105317   1.0361  3.00e-01    </a>
<a class="sourceLine" id="cb119-54" href="#cb119-54" data-line-number="54">## `(revol_util) 0.869&lt;revol_util&lt;=3.666`                       0.015509   0.105422   0.1471  8.83e-01    </a>
<a class="sourceLine" id="cb119-55" href="#cb119-55" data-line-number="55">## `(revol_util) revol_util=NA`                                       NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-56" href="#cb119-56" data-line-number="56">## `(open_rv_12m) -Inf&lt;open_rv_12m&lt;=0`                         -0.297576   0.022644 -13.1415  1.91e-39 ***</a>
<a class="sourceLine" id="cb119-57" href="#cb119-57" data-line-number="57">## `(open_rv_12m) 0&lt;open_rv_12m&lt;=1`                            -0.225478   0.020716 -10.8841  1.37e-27 ***</a>
<a class="sourceLine" id="cb119-58" href="#cb119-58" data-line-number="58">## `(open_rv_12m) 1&lt;open_rv_12m&lt;=2`                            -0.143146   0.020217  -7.0805  1.44e-12 ***</a>
<a class="sourceLine" id="cb119-59" href="#cb119-59" data-line-number="59">## `(open_rv_12m) 2&lt;open_rv_12m&lt;=28`                           -0.057224   0.018371  -3.1149  1.84e-03 ** </a>
<a class="sourceLine" id="cb119-60" href="#cb119-60" data-line-number="60">## `(open_rv_12m) open_rv_12m=NA`                                     NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-61" href="#cb119-61" data-line-number="61">## `(open_rv_24m) -Inf&lt;open_rv_24m&lt;=0`                          0.177991   0.023177   7.6795  1.60e-14 ***</a>
<a class="sourceLine" id="cb119-62" href="#cb119-62" data-line-number="62">## `(open_rv_24m) 0&lt;open_rv_24m&lt;=1`                             0.264156   0.018018  14.6610  1.15e-48 ***</a>
<a class="sourceLine" id="cb119-63" href="#cb119-63" data-line-number="63">## `(open_rv_24m) 1&lt;open_rv_24m&lt;=2`                             0.223955   0.016594  13.4963  1.64e-41 ***</a>
<a class="sourceLine" id="cb119-64" href="#cb119-64" data-line-number="64">## `(open_rv_24m) 2&lt;open_rv_24m&lt;=3`                             0.139651   0.015792   8.8432  9.30e-19 ***</a>
<a class="sourceLine" id="cb119-65" href="#cb119-65" data-line-number="65">## `(open_rv_24m) 3&lt;open_rv_24m&lt;=5`                             0.092391   0.013802   6.6942  2.17e-11 ***</a>
<a class="sourceLine" id="cb119-66" href="#cb119-66" data-line-number="66">## `(open_rv_24m) 5&lt;open_rv_24m&lt;=53`                                  NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-67" href="#cb119-67" data-line-number="67">## `(open_rv_24m) open_rv_24m=NA`                                     NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-68" href="#cb119-68" data-line-number="68">## `(max_bal_bc) -Inf&lt;max_bal_bc&lt;=5122`                         0.013343   0.011801   1.1307  2.58e-01    </a>
<a class="sourceLine" id="cb119-69" href="#cb119-69" data-line-number="69">## `(max_bal_bc) 5122&lt;max_bal_bc&lt;=7905`                         0.016355   0.013234   1.2358  2.17e-01    </a>
<a class="sourceLine" id="cb119-70" href="#cb119-70" data-line-number="70">## `(max_bal_bc) 7905&lt;max_bal_bc&lt;=776843`                             NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-71" href="#cb119-71" data-line-number="71">## `(max_bal_bc) max_bal_bc=NA`                                       NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-72" href="#cb119-72" data-line-number="72">## `(avg_cur_bal) -Inf&lt;avg_cur_bal&lt;=8012`                       0.949400   0.535525   1.7728  7.63e-02 .  </a>
<a class="sourceLine" id="cb119-73" href="#cb119-73" data-line-number="73">## `(avg_cur_bal) 8012&lt;avg_cur_bal&lt;=11363`                      0.941134   0.535580   1.7572  7.89e-02 .  </a>
<a class="sourceLine" id="cb119-74" href="#cb119-74" data-line-number="74">## `(avg_cur_bal) 11363&lt;avg_cur_bal&lt;=14047`                     0.917853   0.535633   1.7136  8.66e-02 .  </a>
<a class="sourceLine" id="cb119-75" href="#cb119-75" data-line-number="75">## `(avg_cur_bal) 14047&lt;avg_cur_bal&lt;=21129`                     0.881077   0.535589   1.6451  1.00e-01    </a>
<a class="sourceLine" id="cb119-76" href="#cb119-76" data-line-number="76">## `(avg_cur_bal) 21129&lt;avg_cur_bal&lt;=27395`                     0.858706   0.535650   1.6031  1.09e-01    </a>
<a class="sourceLine" id="cb119-77" href="#cb119-77" data-line-number="77">## `(avg_cur_bal) 27395&lt;avg_cur_bal&lt;=41609`                     0.860674   0.535660   1.6068  1.08e-01    </a>
<a class="sourceLine" id="cb119-78" href="#cb119-78" data-line-number="78">## `(avg_cur_bal) 41609&lt;avg_cur_bal&lt;=800008`                    0.872631   0.535693   1.6290  1.03e-01    </a>
<a class="sourceLine" id="cb119-79" href="#cb119-79" data-line-number="79">## `(avg_cur_bal) avg_cur_bal=NA`                                     NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-80" href="#cb119-80" data-line-number="80">## `(bc_open_to_buy) -Inf&lt;bc_open_to_buy&lt;=0.315`                0.293741   0.089194   3.2933  9.90e-04 ***</a>
<a class="sourceLine" id="cb119-81" href="#cb119-81" data-line-number="81">## `(bc_open_to_buy) 0.315&lt;bc_open_to_buy&lt;=0.388`               0.321039   0.089784   3.5757  3.49e-04 ***</a>
<a class="sourceLine" id="cb119-82" href="#cb119-82" data-line-number="82">## `(bc_open_to_buy) 0.388&lt;bc_open_to_buy&lt;=0.461`               0.356318   0.089700   3.9723  7.12e-05 ***</a>
<a class="sourceLine" id="cb119-83" href="#cb119-83" data-line-number="83">## `(bc_open_to_buy) 0.461&lt;bc_open_to_buy&lt;=0.539`               0.381208   0.089608   4.2542  2.10e-05 ***</a>
<a class="sourceLine" id="cb119-84" href="#cb119-84" data-line-number="84">## `(bc_open_to_buy) 0.539&lt;bc_open_to_buy&lt;=0.725`               0.436152   0.089276   4.8855  1.03e-06 ***</a>
<a class="sourceLine" id="cb119-85" href="#cb119-85" data-line-number="85">## `(bc_open_to_buy) 0.725&lt;bc_open_to_buy&lt;=0.876`               0.519055   0.089279   5.8139  6.11e-09 ***</a>
<a class="sourceLine" id="cb119-86" href="#cb119-86" data-line-number="86">## `(bc_open_to_buy) 0.876&lt;bc_open_to_buy&lt;=0.919`               0.494536   0.089687   5.5140  3.51e-08 ***</a>
<a class="sourceLine" id="cb119-87" href="#cb119-87" data-line-number="87">## `(bc_open_to_buy) 0.919&lt;bc_open_to_buy&lt;=0.979`               0.374976   0.089520   4.1888  2.80e-05 ***</a>
<a class="sourceLine" id="cb119-88" href="#cb119-88" data-line-number="88">## `(bc_open_to_buy) 0.979&lt;bc_open_to_buy&lt;=3.396`               0.192427   0.089901   2.1404  3.23e-02 *  </a>
<a class="sourceLine" id="cb119-89" href="#cb119-89" data-line-number="89">## `(bc_open_to_buy) bc_open_to_buy=NA`                               NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-90" href="#cb119-90" data-line-number="90">## `(bc_util) -Inf&lt;bc_util&lt;=31.5`                                     NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-91" href="#cb119-91" data-line-number="91">## `(bc_util) 31.5&lt;bc_util&lt;=38.8`                                     NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-92" href="#cb119-92" data-line-number="92">## `(bc_util) 38.8&lt;bc_util&lt;=46.1`                                     NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-93" href="#cb119-93" data-line-number="93">## `(bc_util) 46.1&lt;bc_util&lt;=53.9`                                     NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-94" href="#cb119-94" data-line-number="94">## `(bc_util) 53.9&lt;bc_util&lt;=72.5`                                     NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-95" href="#cb119-95" data-line-number="95">## `(bc_util) 72.5&lt;bc_util&lt;=87.6`                                     NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-96" href="#cb119-96" data-line-number="96">## `(bc_util) 87.6&lt;bc_util&lt;=91.9`                                     NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-97" href="#cb119-97" data-line-number="97">## `(bc_util) 91.9&lt;bc_util&lt;=97.9`                                     NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-98" href="#cb119-98" data-line-number="98">## `(bc_util) 97.9&lt;bc_util&lt;=339.6`                                    NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-99" href="#cb119-99" data-line-number="99">## `(bc_util) bc_util=NA`                                             NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-100" href="#cb119-100" data-line-number="100">## `(mo_sin_old_rev_tl_op) -Inf&lt;mo_sin_old_rev_tl_op&lt;=58`       8.237357  16.181311   0.5091  6.11e-01    </a>
<a class="sourceLine" id="cb119-101" href="#cb119-101" data-line-number="101">## `(mo_sin_old_rev_tl_op) 58&lt;mo_sin_old_rev_tl_op&lt;=82`         8.363960  16.181312   0.5169  6.05e-01    </a>
<a class="sourceLine" id="cb119-102" href="#cb119-102" data-line-number="102">## `(mo_sin_old_rev_tl_op) 82&lt;mo_sin_old_rev_tl_op&lt;=132`        8.442870  16.181309   0.5218  6.02e-01    </a>
<a class="sourceLine" id="cb119-103" href="#cb119-103" data-line-number="103">## `(mo_sin_old_rev_tl_op) 132&lt;mo_sin_old_rev_tl_op&lt;=143`       8.481488  16.181312   0.5242  6.00e-01    </a>
<a class="sourceLine" id="cb119-104" href="#cb119-104" data-line-number="104">## `(mo_sin_old_rev_tl_op) 143&lt;mo_sin_old_rev_tl_op&lt;=154`       8.497112  16.181312   0.5251  6.00e-01    </a>
<a class="sourceLine" id="cb119-105" href="#cb119-105" data-line-number="105">## `(mo_sin_old_rev_tl_op) 154&lt;mo_sin_old_rev_tl_op&lt;=212`       8.531072  16.181309   0.5272  5.98e-01    </a>
<a class="sourceLine" id="cb119-106" href="#cb119-106" data-line-number="106">## `(mo_sin_old_rev_tl_op) 212&lt;mo_sin_old_rev_tl_op&lt;=852`       8.575596  16.181309   0.5300  5.96e-01    </a>
<a class="sourceLine" id="cb119-107" href="#cb119-107" data-line-number="107">## `(mo_sin_old_rev_tl_op) mo_sin_old_rev_tl_op=NA`                   NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-108" href="#cb119-108" data-line-number="108">## `(mo_sin_rcnt_rev_tl_op) -Inf&lt;mo_sin_rcnt_rev_tl_op&lt;=1`      0.067431   0.024585   2.7427  6.09e-03 ** </a>
<a class="sourceLine" id="cb119-109" href="#cb119-109" data-line-number="109">## `(mo_sin_rcnt_rev_tl_op) 1&lt;mo_sin_rcnt_rev_tl_op&lt;=2`         0.159570   0.022099   7.2206  5.18e-13 ***</a>
<a class="sourceLine" id="cb119-110" href="#cb119-110" data-line-number="110">## `(mo_sin_rcnt_rev_tl_op) 2&lt;mo_sin_rcnt_rev_tl_op&lt;=3`         0.109213   0.021447   5.0923  3.54e-07 ***</a>
<a class="sourceLine" id="cb119-111" href="#cb119-111" data-line-number="111">## `(mo_sin_rcnt_rev_tl_op) 3&lt;mo_sin_rcnt_rev_tl_op&lt;=4`         0.065488   0.021375   3.0638  2.19e-03 ** </a>
<a class="sourceLine" id="cb119-112" href="#cb119-112" data-line-number="112">## `(mo_sin_rcnt_rev_tl_op) 4&lt;mo_sin_rcnt_rev_tl_op&lt;=7`         0.020980   0.017764   1.1810  2.38e-01    </a>
<a class="sourceLine" id="cb119-113" href="#cb119-113" data-line-number="113">## `(mo_sin_rcnt_rev_tl_op) 7&lt;mo_sin_rcnt_rev_tl_op&lt;=9`        -0.044420   0.018650  -2.3817  1.72e-02 *  </a>
<a class="sourceLine" id="cb119-114" href="#cb119-114" data-line-number="114">## `(mo_sin_rcnt_rev_tl_op) 9&lt;mo_sin_rcnt_rev_tl_op&lt;=16`       -0.087601   0.015866  -5.5213  3.36e-08 ***</a>
<a class="sourceLine" id="cb119-115" href="#cb119-115" data-line-number="115">## `(mo_sin_rcnt_rev_tl_op) 16&lt;mo_sin_rcnt_rev_tl_op&lt;=20`      -0.089226   0.018602  -4.7966  1.61e-06 ***</a>
<a class="sourceLine" id="cb119-116" href="#cb119-116" data-line-number="116">## `(mo_sin_rcnt_rev_tl_op) 20&lt;mo_sin_rcnt_rev_tl_op&lt;=28`      -0.035702   0.016195  -2.2046  2.75e-02 *  </a>
<a class="sourceLine" id="cb119-117" href="#cb119-117" data-line-number="117">## `(mo_sin_rcnt_rev_tl_op) 28&lt;mo_sin_rcnt_rev_tl_op&lt;=438`            NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-118" href="#cb119-118" data-line-number="118">## `(mo_sin_rcnt_rev_tl_op) mo_sin_rcnt_rev_tl_op=NA`                 NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-119" href="#cb119-119" data-line-number="119">## `(mo_sin_rcnt_tl) -Inf&lt;mo_sin_rcnt_tl&lt;=1`                   -9.267616  16.190843  -0.5724  5.67e-01    </a>
<a class="sourceLine" id="cb119-120" href="#cb119-120" data-line-number="120">## `(mo_sin_rcnt_tl) 1&lt;mo_sin_rcnt_tl&lt;=2`                      -9.310900  16.190839  -0.5751  5.65e-01    </a>
<a class="sourceLine" id="cb119-121" href="#cb119-121" data-line-number="121">## `(mo_sin_rcnt_tl) 2&lt;mo_sin_rcnt_tl&lt;=3`                      -9.299484  16.190839  -0.5744  5.66e-01    </a>
<a class="sourceLine" id="cb119-122" href="#cb119-122" data-line-number="122">## `(mo_sin_rcnt_tl) 3&lt;mo_sin_rcnt_tl&lt;=4`                      -9.234814  16.190839  -0.5704  5.68e-01    </a>
<a class="sourceLine" id="cb119-123" href="#cb119-123" data-line-number="123">## `(mo_sin_rcnt_tl) 4&lt;mo_sin_rcnt_tl&lt;=5`                      -9.188853  16.190838  -0.5675  5.70e-01    </a>
<a class="sourceLine" id="cb119-124" href="#cb119-124" data-line-number="124">## `(mo_sin_rcnt_tl) 5&lt;mo_sin_rcnt_tl&lt;=7`                      -9.194903  16.190837  -0.5679  5.70e-01    </a>
<a class="sourceLine" id="cb119-125" href="#cb119-125" data-line-number="125">## `(mo_sin_rcnt_tl) 7&lt;mo_sin_rcnt_tl&lt;=9`                      -9.154435  16.190838  -0.5654  5.72e-01    </a>
<a class="sourceLine" id="cb119-126" href="#cb119-126" data-line-number="126">## `(mo_sin_rcnt_tl) 9&lt;mo_sin_rcnt_tl&lt;=11`                     -9.119918  16.190837  -0.5633  5.73e-01    </a>
<a class="sourceLine" id="cb119-127" href="#cb119-127" data-line-number="127">## `(mo_sin_rcnt_tl) 11&lt;mo_sin_rcnt_tl&lt;=14`                    -9.136855  16.190842  -0.5643  5.73e-01    </a>
<a class="sourceLine" id="cb119-128" href="#cb119-128" data-line-number="128">## `(mo_sin_rcnt_tl) 14&lt;mo_sin_rcnt_tl&lt;=21`                    -9.089693  16.190844  -0.5614  5.75e-01    </a>
<a class="sourceLine" id="cb119-129" href="#cb119-129" data-line-number="129">## `(mo_sin_rcnt_tl) 21&lt;mo_sin_rcnt_tl&lt;=314`                   -9.139331  16.190850  -0.5645  5.72e-01    </a>
<a class="sourceLine" id="cb119-130" href="#cb119-130" data-line-number="130">## `(mo_sin_rcnt_tl) mo_sin_rcnt_tl=NA`                               NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-131" href="#cb119-131" data-line-number="131">## `(mort_acc) -Inf&lt;mort_acc&lt;=0`                                0.802754   0.040241  19.9489  1.53e-88 ***</a>
<a class="sourceLine" id="cb119-132" href="#cb119-132" data-line-number="132">## `(mort_acc) 0&lt;mort_acc&lt;=1`                                   0.871485   0.040707  21.4087 1.11e-101 ***</a>
<a class="sourceLine" id="cb119-133" href="#cb119-133" data-line-number="133">## `(mort_acc) 1&lt;mort_acc&lt;=2`                                   0.948614   0.040890  23.1989 4.67e-119 ***</a>
<a class="sourceLine" id="cb119-134" href="#cb119-134" data-line-number="134">## `(mort_acc) 2&lt;mort_acc&lt;=3`                                   0.980585   0.041179  23.8127 2.47e-125 ***</a>
<a class="sourceLine" id="cb119-135" href="#cb119-135" data-line-number="135">## `(mort_acc) 3&lt;mort_acc&lt;=5`                                   1.012940   0.041149  24.6162 8.48e-134 ***</a>
<a class="sourceLine" id="cb119-136" href="#cb119-136" data-line-number="136">## `(mort_acc) 5&lt;mort_acc&lt;=47`                                  1.062355   0.042349  25.0856 7.14e-139 ***</a>
<a class="sourceLine" id="cb119-137" href="#cb119-137" data-line-number="137">## `(mort_acc) mort_acc=NA`                                           NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-138" href="#cb119-138" data-line-number="138">## `(mths_since_recent_bc) -Inf&lt;mths_since_recent_bc&lt;=2`       -0.609738   0.085215  -7.1553  8.35e-13 ***</a>
<a class="sourceLine" id="cb119-139" href="#cb119-139" data-line-number="139">## `(mths_since_recent_bc) 2&lt;mths_since_recent_bc&lt;=4`          -0.537903   0.085140  -6.3179  2.65e-10 ***</a>
<a class="sourceLine" id="cb119-140" href="#cb119-140" data-line-number="140">## `(mths_since_recent_bc) 4&lt;mths_since_recent_bc&lt;=7`          -0.484915   0.084918  -5.7104  1.13e-08 ***</a>
<a class="sourceLine" id="cb119-141" href="#cb119-141" data-line-number="141">## `(mths_since_recent_bc) 7&lt;mths_since_recent_bc&lt;=15`         -0.438846   0.084588  -5.1880  2.13e-07 ***</a>
<a class="sourceLine" id="cb119-142" href="#cb119-142" data-line-number="142">## `(mths_since_recent_bc) 15&lt;mths_since_recent_bc&lt;=21`        -0.390850   0.084748  -4.6119  3.99e-06 ***</a>
<a class="sourceLine" id="cb119-143" href="#cb119-143" data-line-number="143">## `(mths_since_recent_bc) 21&lt;mths_since_recent_bc&lt;=28`        -0.349616   0.084838  -4.1210  3.77e-05 ***</a>
<a class="sourceLine" id="cb119-144" href="#cb119-144" data-line-number="144">## `(mths_since_recent_bc) 28&lt;mths_since_recent_bc&lt;=35`        -0.326274   0.084880  -3.8439  1.21e-04 ***</a>
<a class="sourceLine" id="cb119-145" href="#cb119-145" data-line-number="145">## `(mths_since_recent_bc) 35&lt;mths_since_recent_bc&lt;=56`        -0.263667   0.084531  -3.1192  1.81e-03 ** </a>
<a class="sourceLine" id="cb119-146" href="#cb119-146" data-line-number="146">## `(mths_since_recent_bc) 56&lt;mths_since_recent_bc&lt;=639`       -0.170697   0.083773  -2.0376  4.16e-02 *  </a>
<a class="sourceLine" id="cb119-147" href="#cb119-147" data-line-number="147">## `(mths_since_recent_bc) mths_since_recent_bc=NA`                   NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-148" href="#cb119-148" data-line-number="148">## `(mths_since_recent_inq) -Inf&lt;mths_since_recent_inq&lt;=0`     -0.293984   0.014706 -19.9906  6.65e-89 ***</a>
<a class="sourceLine" id="cb119-149" href="#cb119-149" data-line-number="149">## `(mths_since_recent_inq) 0&lt;mths_since_recent_inq&lt;=1`        -0.230252   0.014271 -16.1338  1.48e-58 ***</a>
<a class="sourceLine" id="cb119-150" href="#cb119-150" data-line-number="150">## `(mths_since_recent_inq) 1&lt;mths_since_recent_inq&lt;=2`        -0.141297   0.014900  -9.4831  2.47e-21 ***</a>
<a class="sourceLine" id="cb119-151" href="#cb119-151" data-line-number="151">## `(mths_since_recent_inq) 2&lt;mths_since_recent_inq&lt;=3`        -0.107995   0.015177  -7.1155  1.12e-12 ***</a>
<a class="sourceLine" id="cb119-152" href="#cb119-152" data-line-number="152">## `(mths_since_recent_inq) 3&lt;mths_since_recent_inq&lt;=4`        -0.082146   0.015504  -5.2983  1.17e-07 ***</a>
<a class="sourceLine" id="cb119-153" href="#cb119-153" data-line-number="153">## `(mths_since_recent_inq) 4&lt;mths_since_recent_inq&lt;=5`        -0.078016   0.015939  -4.8947  9.84e-07 ***</a>
<a class="sourceLine" id="cb119-154" href="#cb119-154" data-line-number="154">## `(mths_since_recent_inq) 5&lt;mths_since_recent_inq&lt;=8`        -0.110854   0.012278  -9.0289  1.73e-19 ***</a>
<a class="sourceLine" id="cb119-155" href="#cb119-155" data-line-number="155">## `(mths_since_recent_inq) 8&lt;mths_since_recent_inq&lt;=10`       -0.108483   0.013954  -7.7746  7.57e-15 ***</a>
<a class="sourceLine" id="cb119-156" href="#cb119-156" data-line-number="156">## `(mths_since_recent_inq) 10&lt;mths_since_recent_inq&lt;=16`      -0.094748   0.012128  -7.8122  5.62e-15 ***</a>
<a class="sourceLine" id="cb119-157" href="#cb119-157" data-line-number="157">## `(mths_since_recent_inq) 16&lt;mths_since_recent_inq&lt;=25`      -0.058384   0.013707  -4.2595  2.05e-05 ***</a>
<a class="sourceLine" id="cb119-158" href="#cb119-158" data-line-number="158">## `(mths_since_recent_inq) mths_since_recent_inq=NA`                 NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-159" href="#cb119-159" data-line-number="159">## `(num_actv_rev_tl) -Inf&lt;num_actv_rev_tl&lt;=2`                  0.116954   0.063720   1.8354  6.64e-02 .  </a>
<a class="sourceLine" id="cb119-160" href="#cb119-160" data-line-number="160">## `(num_actv_rev_tl) 2&lt;num_actv_rev_tl&lt;=3`                     0.147969   0.052555   2.8155  4.87e-03 ** </a>
<a class="sourceLine" id="cb119-161" href="#cb119-161" data-line-number="161">## `(num_actv_rev_tl) 3&lt;num_actv_rev_tl&lt;=4`                     0.100821   0.046787   2.1549  3.12e-02 *  </a>
<a class="sourceLine" id="cb119-162" href="#cb119-162" data-line-number="162">## `(num_actv_rev_tl) 4&lt;num_actv_rev_tl&lt;=5`                     0.044894   0.043170   1.0399  2.98e-01    </a>
<a class="sourceLine" id="cb119-163" href="#cb119-163" data-line-number="163">## `(num_actv_rev_tl) 5&lt;num_actv_rev_tl&lt;=6`                     0.072634   0.040943   1.7740  7.61e-02 .  </a>
<a class="sourceLine" id="cb119-164" href="#cb119-164" data-line-number="164">## `(num_actv_rev_tl) 6&lt;num_actv_rev_tl&lt;=7`                    -0.000536   0.039420  -0.0136  9.89e-01    </a>
<a class="sourceLine" id="cb119-165" href="#cb119-165" data-line-number="165">## `(num_actv_rev_tl) 7&lt;num_actv_rev_tl&lt;=8`                    -0.007841   0.038113  -0.2057  8.37e-01    </a>
<a class="sourceLine" id="cb119-166" href="#cb119-166" data-line-number="166">## `(num_actv_rev_tl) 8&lt;num_actv_rev_tl&lt;=10`                   -0.007639   0.032398  -0.2358  8.14e-01    </a>
<a class="sourceLine" id="cb119-167" href="#cb119-167" data-line-number="167">## `(num_actv_rev_tl) 10&lt;num_actv_rev_tl&lt;=63`                         NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-168" href="#cb119-168" data-line-number="168">## `(num_actv_rev_tl) num_actv_rev_tl=NA`                             NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-169" href="#cb119-169" data-line-number="169">## `(num_rev_tl_bal_gt_0) -Inf&lt;num_rev_tl_bal_gt_0&lt;=2`          0.333749   0.064018   5.2134  1.85e-07 ***</a>
<a class="sourceLine" id="cb119-170" href="#cb119-170" data-line-number="170">## `(num_rev_tl_bal_gt_0) 2&lt;num_rev_tl_bal_gt_0&lt;=3`             0.264443   0.052877   5.0011  5.70e-07 ***</a>
<a class="sourceLine" id="cb119-171" href="#cb119-171" data-line-number="171">## `(num_rev_tl_bal_gt_0) 3&lt;num_rev_tl_bal_gt_0&lt;=4`             0.250602   0.047162   5.3137  1.07e-07 ***</a>
<a class="sourceLine" id="cb119-172" href="#cb119-172" data-line-number="172">## `(num_rev_tl_bal_gt_0) 4&lt;num_rev_tl_bal_gt_0&lt;=5`             0.263765   0.043580   6.0524  1.43e-09 ***</a>
<a class="sourceLine" id="cb119-173" href="#cb119-173" data-line-number="173">## `(num_rev_tl_bal_gt_0) 5&lt;num_rev_tl_bal_gt_0&lt;=6`             0.180500   0.041356   4.3645  1.27e-05 ***</a>
<a class="sourceLine" id="cb119-174" href="#cb119-174" data-line-number="174">## `(num_rev_tl_bal_gt_0) 6&lt;num_rev_tl_bal_gt_0&lt;=7`             0.215620   0.039877   5.4072  6.40e-08 ***</a>
<a class="sourceLine" id="cb119-175" href="#cb119-175" data-line-number="175">## `(num_rev_tl_bal_gt_0) 7&lt;num_rev_tl_bal_gt_0&lt;=8`             0.173516   0.038619   4.4930  7.02e-06 ***</a>
<a class="sourceLine" id="cb119-176" href="#cb119-176" data-line-number="176">## `(num_rev_tl_bal_gt_0) 8&lt;num_rev_tl_bal_gt_0&lt;=10`            0.128285   0.032900   3.8992  9.65e-05 ***</a>
<a class="sourceLine" id="cb119-177" href="#cb119-177" data-line-number="177">## `(num_rev_tl_bal_gt_0) 10&lt;num_rev_tl_bal_gt_0&lt;=45`                 NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-178" href="#cb119-178" data-line-number="178">## `(num_rev_tl_bal_gt_0) num_rev_tl_bal_gt_0=NA`                     NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-179" href="#cb119-179" data-line-number="179">## `(num_tl_op_past_12m) -Inf&lt;num_tl_op_past_12m&lt;=0`            0.370595   0.024070  15.3966  1.72e-53 ***</a>
<a class="sourceLine" id="cb119-180" href="#cb119-180" data-line-number="180">## `(num_tl_op_past_12m) 0&lt;num_tl_op_past_12m&lt;=1`               0.346750   0.012180  28.4698 2.77e-178 ***</a>
<a class="sourceLine" id="cb119-181" href="#cb119-181" data-line-number="181">## `(num_tl_op_past_12m) 1&lt;num_tl_op_past_12m&lt;=2`               0.251521   0.011189  22.4796 6.57e-112 ***</a>
<a class="sourceLine" id="cb119-182" href="#cb119-182" data-line-number="182">## `(num_tl_op_past_12m) 2&lt;num_tl_op_past_12m&lt;=3`               0.142006   0.010785  13.1664  1.37e-39 ***</a>
<a class="sourceLine" id="cb119-183" href="#cb119-183" data-line-number="183">## `(num_tl_op_past_12m) 3&lt;num_tl_op_past_12m&lt;=4`               0.056903   0.011245   5.0604  4.18e-07 ***</a>
<a class="sourceLine" id="cb119-184" href="#cb119-184" data-line-number="184">## `(num_tl_op_past_12m) 4&lt;num_tl_op_past_12m&lt;=30`                    NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-185" href="#cb119-185" data-line-number="185">## `(num_tl_op_past_12m) num_tl_op_past_12m=NA`                       NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-186" href="#cb119-186" data-line-number="186">## `(percent_bc_gt_75) -Inf&lt;percent_bc_gt_75&lt;=0.034`            0.036402   0.105889   0.3438  7.31e-01    </a>
<a class="sourceLine" id="cb119-187" href="#cb119-187" data-line-number="187">## `(percent_bc_gt_75) 0.034&lt;percent_bc_gt_75&lt;=0.259`          -0.092241   0.106188  -0.8687  3.85e-01    </a>
<a class="sourceLine" id="cb119-188" href="#cb119-188" data-line-number="188">## `(percent_bc_gt_75) 0.259&lt;percent_bc_gt_75&lt;=0.346`          -0.142432   0.106288  -1.3401  1.80e-01    </a>
<a class="sourceLine" id="cb119-189" href="#cb119-189" data-line-number="189">## `(percent_bc_gt_75) 0.346&lt;percent_bc_gt_75&lt;=0.522`          -0.209492   0.106061  -1.9752  4.82e-02 *  </a>
<a class="sourceLine" id="cb119-190" href="#cb119-190" data-line-number="190">## `(percent_bc_gt_75) 0.522&lt;percent_bc_gt_75&lt;=0.682`          -0.277961   0.106214  -2.6170  8.87e-03 ** </a>
<a class="sourceLine" id="cb119-191" href="#cb119-191" data-line-number="191">## `(percent_bc_gt_75) 0.682&lt;percent_bc_gt_75&lt;=0.958`          -0.345400   0.106306  -3.2491  1.16e-03 ** </a>
<a class="sourceLine" id="cb119-192" href="#cb119-192" data-line-number="192">## `(percent_bc_gt_75) 0.958&lt;percent_bc_gt_75&lt;=1`              -0.200975   0.106012  -1.8958  5.80e-02 .  </a>
<a class="sourceLine" id="cb119-193" href="#cb119-193" data-line-number="193">## `(percent_bc_gt_75) percent_bc_gt_75=NA`                           NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-194" href="#cb119-194" data-line-number="194">## `(tot_hi_cred_lim) -Inf&lt;tot_hi_cred_lim&lt;=102535`            -0.775532   0.023321 -33.2549 1.73e-242 ***</a>
<a class="sourceLine" id="cb119-195" href="#cb119-195" data-line-number="195">## `(tot_hi_cred_lim) 102535&lt;tot_hi_cred_lim&lt;=131793`          -0.580656   0.022895 -25.3621 6.62e-142 ***</a>
<a class="sourceLine" id="cb119-196" href="#cb119-196" data-line-number="196">## `(tot_hi_cred_lim) 131793&lt;tot_hi_cred_lim&lt;=179071`          -0.539407   0.021021 -25.6606 3.22e-145 ***</a>
<a class="sourceLine" id="cb119-197" href="#cb119-197" data-line-number="197">## `(tot_hi_cred_lim) 179071&lt;tot_hi_cred_lim&lt;=208761`          -0.432007   0.021429 -20.1595  2.22e-90 ***</a>
<a class="sourceLine" id="cb119-198" href="#cb119-198" data-line-number="198">## `(tot_hi_cred_lim) 208761&lt;tot_hi_cred_lim&lt;=242055`          -0.371150   0.020816 -17.8298  4.15e-71 ***</a>
<a class="sourceLine" id="cb119-199" href="#cb119-199" data-line-number="199">## `(tot_hi_cred_lim) 242055&lt;tot_hi_cred_lim&lt;=298516`          -0.288759   0.019181 -15.0543  3.23e-51 ***</a>
<a class="sourceLine" id="cb119-200" href="#cb119-200" data-line-number="200">## `(tot_hi_cred_lim) 298516&lt;tot_hi_cred_lim&lt;=383997`          -0.211688   0.018212 -11.6238  3.12e-31 ***</a>
<a class="sourceLine" id="cb119-201" href="#cb119-201" data-line-number="201">## `(tot_hi_cred_lim) 383997&lt;tot_hi_cred_lim&lt;=487388`          -0.149676   0.018865  -7.9342  2.12e-15 ***</a>
<a class="sourceLine" id="cb119-202" href="#cb119-202" data-line-number="202">## `(tot_hi_cred_lim) 487388&lt;tot_hi_cred_lim&lt;=9999999`                NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-203" href="#cb119-203" data-line-number="203">## `(tot_hi_cred_lim) tot_hi_cred_lim=NA`                             NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-204" href="#cb119-204" data-line-number="204">## `(total_bc_limit) -Inf&lt;total_bc_limit&lt;=4478`                -0.993462   0.015229 -65.2335  0.00e+00 ***</a>
<a class="sourceLine" id="cb119-205" href="#cb119-205" data-line-number="205">## `(total_bc_limit) 4478&lt;total_bc_limit&lt;=9405`                -0.760385   0.013700 -55.5004  0.00e+00 ***</a>
<a class="sourceLine" id="cb119-206" href="#cb119-206" data-line-number="206">## `(total_bc_limit) 9405&lt;total_bc_limit&lt;=11360`               -0.638718   0.015271 -41.8247  0.00e+00 ***</a>
<a class="sourceLine" id="cb119-207" href="#cb119-207" data-line-number="207">## `(total_bc_limit) 11360&lt;total_bc_limit&lt;=13970`              -0.563065   0.014606 -38.5497  0.00e+00 ***</a>
<a class="sourceLine" id="cb119-208" href="#cb119-208" data-line-number="208">## `(total_bc_limit) 13970&lt;total_bc_limit&lt;=18174`              -0.486552   0.013650 -35.6459 2.73e-278 ***</a>
<a class="sourceLine" id="cb119-209" href="#cb119-209" data-line-number="209">## `(total_bc_limit) 18174&lt;total_bc_limit&lt;=20950`              -0.423138   0.015281 -27.6909 8.98e-169 ***</a>
<a class="sourceLine" id="cb119-210" href="#cb119-210" data-line-number="210">## `(total_bc_limit) 20950&lt;total_bc_limit&lt;=24806`              -0.373576   0.014667 -25.4697 4.27e-143 ***</a>
<a class="sourceLine" id="cb119-211" href="#cb119-211" data-line-number="211">## `(total_bc_limit) 24806&lt;total_bc_limit&lt;=29471`              -0.310188   0.014937 -20.7666  8.67e-96 ***</a>
<a class="sourceLine" id="cb119-212" href="#cb119-212" data-line-number="212">## `(total_bc_limit) 29471&lt;total_bc_limit&lt;=34756`              -0.260238   0.015397 -16.9016  4.38e-64 ***</a>
<a class="sourceLine" id="cb119-213" href="#cb119-213" data-line-number="213">## `(total_bc_limit) 34756&lt;total_bc_limit&lt;=47175`              -0.172385   0.013941 -12.3657  4.01e-35 ***</a>
<a class="sourceLine" id="cb119-214" href="#cb119-214" data-line-number="214">## `(total_bc_limit) 47175&lt;total_bc_limit&lt;=1105500`                   NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-215" href="#cb119-215" data-line-number="215">## `(total_bc_limit) total_bc_limit=NA`                               NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-216" href="#cb119-216" data-line-number="216">## `(issue_d2) -Inf&lt;issue_d2&lt;=189.062`                          0.015175   0.014364   1.0565  2.91e-01    </a>
<a class="sourceLine" id="cb119-217" href="#cb119-217" data-line-number="217">## `(issue_d2) 189.062&lt;issue_d2&lt;=200.694`                             NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-218" href="#cb119-218" data-line-number="218">## `(issue_d2) 200.694&lt;issue_d2&lt;=215.111`                             NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-219" href="#cb119-219" data-line-number="219">## `(issue_d2) 215.111&lt;issue_d2&lt;=258.674`                             NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-220" href="#cb119-220" data-line-number="220">## `(issue_d2) 258.674&lt;issue_d2&lt;=277.778`                             NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-221" href="#cb119-221" data-line-number="221">## `(issue_d2) 277.778&lt;issue_d2&lt;=315.062`                             NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-222" href="#cb119-222" data-line-number="222">## `(issue_d2) 315.062&lt;issue_d2&lt;=357.84`                              NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-223" href="#cb119-223" data-line-number="223">## `(issue_d3) -Inf&lt;issue_d3&lt;=2599.609`                               NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-224" href="#cb119-224" data-line-number="224">## `(issue_d3) 2599.609&lt;issue_d3&lt;=2843.171`                           NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-225" href="#cb119-225" data-line-number="225">## `(issue_d3) 2843.171&lt;issue_d3&lt;=3154.963`                           NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-226" href="#cb119-226" data-line-number="226">## `(issue_d3) 3154.963&lt;issue_d3&lt;=4160.334`                           NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-227" href="#cb119-227" data-line-number="227">## `(issue_d3) 4160.334&lt;issue_d3&lt;=4629.63`                            NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-228" href="#cb119-228" data-line-number="228">## `(issue_d3) 4629.63&lt;issue_d3&lt;=5592.359`                            NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-229" href="#cb119-229" data-line-number="229">## `(issue_d3) 5592.359&lt;issue_d3&lt;=6769.145`                           NA         NA       NA        NA    </a>
<a class="sourceLine" id="cb119-230" href="#cb119-230" data-line-number="230">## </a>
<a class="sourceLine" id="cb119-231" href="#cb119-231" data-line-number="231">## ------------------------------------------------------------------- </a>
<a class="sourceLine" id="cb119-232" href="#cb119-232" data-line-number="232">## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1 </a>
<a class="sourceLine" id="cb119-233" href="#cb119-233" data-line-number="233">## </a>
<a class="sourceLine" id="cb119-234" href="#cb119-234" data-line-number="234">## ---</a>
<a class="sourceLine" id="cb119-235" href="#cb119-235" data-line-number="235">## null df: 1045083; null deviance: 1048231;</a>
<a class="sourceLine" id="cb119-236" href="#cb119-236" data-line-number="236">## residuals df: 1044916; residuals deviance: 976701.2;</a>
<a class="sourceLine" id="cb119-237" href="#cb119-237" data-line-number="237">## # obs.: 1045084; # non-zero weighted obs.: 1045084;</a>
<a class="sourceLine" id="cb119-238" href="#cb119-238" data-line-number="238">## AIC: 977037.2; log Likelihood: -488350.6;</a>
<a class="sourceLine" id="cb119-239" href="#cb119-239" data-line-number="239">## RSS: 1043064; dispersion: 1; iterations: 5;</a>
<a class="sourceLine" id="cb119-240" href="#cb119-240" data-line-number="240">## rank: 168; max tolerance: 4.98e-09; convergence: TRUE.</a></code></pre></div>
<div class="sourceCode" id="cb120"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" href="#cb120-1" data-line-number="1"><span class="co"># AIC = 977037.2</span></a>
<a class="sourceLine" id="cb120-2" href="#cb120-2" data-line-number="2"><span class="co"># Log likelihood = -488350.6</span></a>
<a class="sourceLine" id="cb120-3" href="#cb120-3" data-line-number="3"></a>
<a class="sourceLine" id="cb120-4" href="#cb120-4" data-line-number="4">speedglm<span class="op">:::</span><span class="kw">summary.speedglm</span>(SGLM_B_reretrain)</a></code></pre></div>
<div class="sourceCode" id="cb121"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb121-1" href="#cb121-1" data-line-number="1">## Generalized Linear Model of class &#39;speedglm&#39;:</a>
<a class="sourceLine" id="cb121-2" href="#cb121-2" data-line-number="2">## </a>
<a class="sourceLine" id="cb121-3" href="#cb121-3" data-line-number="3">## Call:  speedglm::speedglm(formula = isGoodLoan ~ ., data = loansData,      family = binomial()) </a>
<a class="sourceLine" id="cb121-4" href="#cb121-4" data-line-number="4">## </a>
<a class="sourceLine" id="cb121-5" href="#cb121-5" data-line-number="5">## Coefficients:</a>
<a class="sourceLine" id="cb121-6" href="#cb121-6" data-line-number="6">##  ------------------------------------------------------------------ </a>
<a class="sourceLine" id="cb121-7" href="#cb121-7" data-line-number="7">##                                                             Estimate Std. Error  z value  Pr(&gt;|z|)    </a>
<a class="sourceLine" id="cb121-8" href="#cb121-8" data-line-number="8">## (Intercept)                                                  0.64039   0.019861  32.2431 4.40e-228 ***</a>
<a class="sourceLine" id="cb121-9" href="#cb121-9" data-line-number="9">## `(loan_amnt) -Inf&lt;loan_amnt&lt;=3500`                           1.10796   0.015121  73.2723  0.00e+00 ***</a>
<a class="sourceLine" id="cb121-10" href="#cb121-10" data-line-number="10">## `(loan_amnt) 3500&lt;loan_amnt&lt;=9000`                           0.93839   0.010726  87.4833  0.00e+00 ***</a>
<a class="sourceLine" id="cb121-11" href="#cb121-11" data-line-number="11">## `(loan_amnt) 9000&lt;loan_amnt&lt;=10000`                          0.70268   0.012338  56.9531  0.00e+00 ***</a>
<a class="sourceLine" id="cb121-12" href="#cb121-12" data-line-number="12">## `(loan_amnt) 10000&lt;loan_amnt&lt;=12000`                         0.56169   0.012064  46.5606  0.00e+00 ***</a>
<a class="sourceLine" id="cb121-13" href="#cb121-13" data-line-number="13">## `(loan_amnt) 12000&lt;loan_amnt&lt;=14975`                         0.45839   0.013082  35.0405 5.44e-269 ***</a>
<a class="sourceLine" id="cb121-14" href="#cb121-14" data-line-number="14">## `(loan_amnt) 14975&lt;loan_amnt&lt;=15000`                         0.52969   0.014185  37.3408 3.57e-305 ***</a>
<a class="sourceLine" id="cb121-15" href="#cb121-15" data-line-number="15">## `(loan_amnt) 15000&lt;loan_amnt&lt;=17000`                         0.34043   0.013520  25.1786 6.87e-140 ***</a>
<a class="sourceLine" id="cb121-16" href="#cb121-16" data-line-number="16">## `(loan_amnt) 17000&lt;loan_amnt&lt;=19950`                         0.24032   0.013357  17.9918  2.26e-72 ***</a>
<a class="sourceLine" id="cb121-17" href="#cb121-17" data-line-number="17">## `(loan_amnt) 19950&lt;loan_amnt&lt;=28000`                         0.22283   0.010012  22.2567 9.71e-110 ***</a>
<a class="sourceLine" id="cb121-18" href="#cb121-18" data-line-number="18">## `(verification_status) verification_status=Not Verified`     0.32251   0.007017  45.9606  0.00e+00 ***</a>
<a class="sourceLine" id="cb121-19" href="#cb121-19" data-line-number="19">## `(verification_status) verification_status=Source Verified`  0.10753   0.005988  17.9583  4.13e-72 ***</a>
<a class="sourceLine" id="cb121-20" href="#cb121-20" data-line-number="20">## `(issue_d) -Inf&lt;issue_d&lt;=14.167`                             0.19954   0.010447  19.1010  2.48e-81 ***</a>
<a class="sourceLine" id="cb121-21" href="#cb121-21" data-line-number="21">## `(issue_d) 14.667&lt;issue_d&lt;=16.083`                          -0.05187   0.008491  -6.1085  1.01e-09 ***</a>
<a class="sourceLine" id="cb121-22" href="#cb121-22" data-line-number="22">## `(issue_d) 16.083&lt;issue_d&lt;=16.667`                          -0.41059   0.011328 -36.2468 1.12e-287 ***</a>
<a class="sourceLine" id="cb121-23" href="#cb121-23" data-line-number="23">## `(issue_d) 16.667&lt;issue_d&lt;=17.75`                           -0.36143   0.011081 -32.6172 2.34e-233 ***</a>
<a class="sourceLine" id="cb121-24" href="#cb121-24" data-line-number="24">## `(dti) 0.299&lt;dti&lt;=9.99`                                     -0.42326   0.007897 -53.6008  0.00e+00 ***</a>
<a class="sourceLine" id="cb121-25" href="#cb121-25" data-line-number="25">## `(revol_util) -Inf&lt;revol_util&lt;=0.147`                        0.26612   0.015380  17.3028  4.48e-67 ***</a>
<a class="sourceLine" id="cb121-26" href="#cb121-26" data-line-number="26">## `(revol_util) 0.147&lt;revol_util&lt;=0.217`                       0.23979   0.015891  15.0894  1.90e-51 ***</a>
<a class="sourceLine" id="cb121-27" href="#cb121-27" data-line-number="27">## `(revol_util) 0.217&lt;revol_util&lt;=0.316`                       0.20448   0.011942  17.1221  1.01e-65 ***</a>
<a class="sourceLine" id="cb121-28" href="#cb121-28" data-line-number="28">## `(revol_util) 0.316&lt;revol_util&lt;=0.388`                       0.15118   0.011109  13.6087  3.56e-42 ***</a>
<a class="sourceLine" id="cb121-29" href="#cb121-29" data-line-number="29">## `(revol_util) 0.388&lt;revol_util&lt;=0.479`                       0.08991   0.008988  10.0032  1.48e-23 ***</a>
<a class="sourceLine" id="cb121-30" href="#cb121-30" data-line-number="30">## `(open_rv_12m) -Inf&lt;open_rv_12m&lt;=0`                         -0.33627   0.019429 -17.3078  4.11e-67 ***</a>
<a class="sourceLine" id="cb121-31" href="#cb121-31" data-line-number="31">## `(open_rv_12m) 0&lt;open_rv_12m&lt;=1`                            -0.24267   0.017149 -14.1505  1.85e-45 ***</a>
<a class="sourceLine" id="cb121-32" href="#cb121-32" data-line-number="32">## `(open_rv_12m) 1&lt;open_rv_12m&lt;=2`                            -0.13405   0.016511  -8.1188  4.71e-16 ***</a>
<a class="sourceLine" id="cb121-33" href="#cb121-33" data-line-number="33">## `(open_rv_12m) 2&lt;open_rv_12m&lt;=28`                           -0.02477   0.014092  -1.7578  7.88e-02 .  </a>
<a class="sourceLine" id="cb121-34" href="#cb121-34" data-line-number="34">## `(open_rv_24m) -Inf&lt;open_rv_24m&lt;=0`                          0.21090   0.022340   9.4402  3.72e-21 ***</a>
<a class="sourceLine" id="cb121-35" href="#cb121-35" data-line-number="35">## `(open_rv_24m) 0&lt;open_rv_24m&lt;=1`                             0.29822   0.017808  16.7471  5.94e-63 ***</a>
<a class="sourceLine" id="cb121-36" href="#cb121-36" data-line-number="36">## `(open_rv_24m) 1&lt;open_rv_24m&lt;=2`                             0.24708   0.016441  15.0279  4.82e-51 ***</a>
<a class="sourceLine" id="cb121-37" href="#cb121-37" data-line-number="37">## `(open_rv_24m) 2&lt;open_rv_24m&lt;=3`                             0.15733   0.015669  10.0413  1.00e-23 ***</a>
<a class="sourceLine" id="cb121-38" href="#cb121-38" data-line-number="38">## `(open_rv_24m) 3&lt;open_rv_24m&lt;=5`                             0.10573   0.013710   7.7121  1.24e-14 ***</a>
<a class="sourceLine" id="cb121-39" href="#cb121-39" data-line-number="39">## `(bc_open_to_buy) -Inf&lt;bc_open_to_buy&lt;=0.315`                0.35942   0.066245   5.4256  5.77e-08 ***</a>
<a class="sourceLine" id="cb121-40" href="#cb121-40" data-line-number="40">## `(bc_open_to_buy) 0.315&lt;bc_open_to_buy&lt;=0.388`               0.35527   0.066826   5.3164  1.06e-07 ***</a>
<a class="sourceLine" id="cb121-41" href="#cb121-41" data-line-number="41">## `(bc_open_to_buy) 0.388&lt;bc_open_to_buy&lt;=0.461`               0.37089   0.066665   5.5636  2.64e-08 ***</a>
<a class="sourceLine" id="cb121-42" href="#cb121-42" data-line-number="42">## `(bc_open_to_buy) 0.461&lt;bc_open_to_buy&lt;=0.539`               0.38326   0.066482   5.7649  8.17e-09 ***</a>
<a class="sourceLine" id="cb121-43" href="#cb121-43" data-line-number="43">## `(bc_open_to_buy) 0.539&lt;bc_open_to_buy&lt;=0.725`               0.39699   0.066009   6.0141  1.81e-09 ***</a>
<a class="sourceLine" id="cb121-44" href="#cb121-44" data-line-number="44">## `(bc_open_to_buy) 0.725&lt;bc_open_to_buy&lt;=0.876`               0.40323   0.066050   6.1050  1.03e-09 ***</a>
<a class="sourceLine" id="cb121-45" href="#cb121-45" data-line-number="45">## `(bc_open_to_buy) 0.876&lt;bc_open_to_buy&lt;=0.919`               0.33279   0.066538   5.0015  5.69e-07 ***</a>
<a class="sourceLine" id="cb121-46" href="#cb121-46" data-line-number="46">## `(bc_open_to_buy) 0.919&lt;bc_open_to_buy&lt;=0.979`               0.18281   0.066118   2.7649  5.69e-03 ** </a>
<a class="sourceLine" id="cb121-47" href="#cb121-47" data-line-number="47">## `(bc_open_to_buy) 0.979&lt;bc_open_to_buy&lt;=3.396`              -0.02193   0.066441  -0.3301  7.41e-01    </a>
<a class="sourceLine" id="cb121-48" href="#cb121-48" data-line-number="48">## `(mo_sin_rcnt_rev_tl_op) -Inf&lt;mo_sin_rcnt_rev_tl_op&lt;=1`      0.02121   0.012625   1.6796  9.30e-02 .  </a>
<a class="sourceLine" id="cb121-49" href="#cb121-49" data-line-number="49">## `(mo_sin_rcnt_rev_tl_op) 1&lt;mo_sin_rcnt_rev_tl_op&lt;=2`         0.07100   0.013128   5.4085  6.36e-08 ***</a>
<a class="sourceLine" id="cb121-50" href="#cb121-50" data-line-number="50">## `(mo_sin_rcnt_rev_tl_op) 2&lt;mo_sin_rcnt_rev_tl_op&lt;=3`         0.02405   0.013232   1.8174  6.92e-02 .  </a>
<a class="sourceLine" id="cb121-51" href="#cb121-51" data-line-number="51">## `(mo_sin_rcnt_rev_tl_op) 3&lt;mo_sin_rcnt_rev_tl_op&lt;=4`         0.02963   0.013417   2.2087  2.72e-02 *  </a>
<a class="sourceLine" id="cb121-52" href="#cb121-52" data-line-number="52">## `(mo_sin_rcnt_rev_tl_op) 7&lt;mo_sin_rcnt_rev_tl_op&lt;=9`        -0.01695   0.011849  -1.4302  1.53e-01    </a>
<a class="sourceLine" id="cb121-53" href="#cb121-53" data-line-number="53">## `(mo_sin_rcnt_rev_tl_op) 9&lt;mo_sin_rcnt_rev_tl_op&lt;=16`       -0.07866   0.009868  -7.9714  1.57e-15 ***</a>
<a class="sourceLine" id="cb121-54" href="#cb121-54" data-line-number="54">## `(mo_sin_rcnt_rev_tl_op) 16&lt;mo_sin_rcnt_rev_tl_op&lt;=20`      -0.09308   0.014689  -6.3371  2.34e-10 ***</a>
<a class="sourceLine" id="cb121-55" href="#cb121-55" data-line-number="55">## `(mo_sin_rcnt_rev_tl_op) 20&lt;mo_sin_rcnt_rev_tl_op&lt;=28`      -0.05295   0.013644  -3.8808  1.04e-04 ***</a>
<a class="sourceLine" id="cb121-56" href="#cb121-56" data-line-number="56">## `(mort_acc) -Inf&lt;mort_acc&lt;=0`                                0.80077   0.036082  22.1932 4.00e-109 ***</a>
<a class="sourceLine" id="cb121-57" href="#cb121-57" data-line-number="57">## `(mort_acc) 0&lt;mort_acc&lt;=1`                                   0.92056   0.036353  25.3225 1.81e-141 ***</a>
<a class="sourceLine" id="cb121-58" href="#cb121-58" data-line-number="58">## `(mort_acc) 1&lt;mort_acc&lt;=2`                                   1.01742   0.036415  27.9399 8.74e-172 ***</a>
<a class="sourceLine" id="cb121-59" href="#cb121-59" data-line-number="59">## `(mort_acc) 2&lt;mort_acc&lt;=3`                                   1.06480   0.036620  29.0769 7.03e-186 ***</a>
<a class="sourceLine" id="cb121-60" href="#cb121-60" data-line-number="60">## `(mort_acc) 3&lt;mort_acc&lt;=5`                                   1.10583   0.036453  30.3356 3.89e-202 ***</a>
<a class="sourceLine" id="cb121-61" href="#cb121-61" data-line-number="61">## `(mort_acc) 5&lt;mort_acc&lt;=47`                                  1.16868   0.037536  31.1351 8.06e-213 ***</a>
<a class="sourceLine" id="cb121-62" href="#cb121-62" data-line-number="62">## `(mths_since_recent_bc) -Inf&lt;mths_since_recent_bc&lt;=2`       -0.64469   0.070952  -9.0863  1.02e-19 ***</a>
<a class="sourceLine" id="cb121-63" href="#cb121-63" data-line-number="63">## `(mths_since_recent_bc) 2&lt;mths_since_recent_bc&lt;=4`          -0.56402   0.070864  -7.9591  1.73e-15 ***</a>
<a class="sourceLine" id="cb121-64" href="#cb121-64" data-line-number="64">## `(mths_since_recent_bc) 4&lt;mths_since_recent_bc&lt;=7`          -0.49657   0.070424  -7.0511  1.77e-12 ***</a>
<a class="sourceLine" id="cb121-65" href="#cb121-65" data-line-number="65">## `(mths_since_recent_bc) 7&lt;mths_since_recent_bc&lt;=15`         -0.45193   0.070215  -6.4363  1.22e-10 ***</a>
<a class="sourceLine" id="cb121-66" href="#cb121-66" data-line-number="66">## `(mths_since_recent_bc) 15&lt;mths_since_recent_bc&lt;=21`        -0.41463   0.070419  -5.8880  3.91e-09 ***</a>
<a class="sourceLine" id="cb121-67" href="#cb121-67" data-line-number="67">## `(mths_since_recent_bc) 21&lt;mths_since_recent_bc&lt;=28`        -0.37287   0.070541  -5.2859  1.25e-07 ***</a>
<a class="sourceLine" id="cb121-68" href="#cb121-68" data-line-number="68">## `(mths_since_recent_bc) 28&lt;mths_since_recent_bc&lt;=35`        -0.35380   0.070697  -5.0044  5.60e-07 ***</a>
<a class="sourceLine" id="cb121-69" href="#cb121-69" data-line-number="69">## `(mths_since_recent_bc) 35&lt;mths_since_recent_bc&lt;=56`        -0.28475   0.070276  -4.0519  5.08e-05 ***</a>
<a class="sourceLine" id="cb121-70" href="#cb121-70" data-line-number="70">## `(mths_since_recent_bc) 56&lt;mths_since_recent_bc&lt;=639`       -0.17252   0.069578  -2.4796  1.32e-02 *  </a>
<a class="sourceLine" id="cb121-71" href="#cb121-71" data-line-number="71">## `(mths_since_recent_inq) -Inf&lt;mths_since_recent_inq&lt;=0`     -0.45972   0.012796 -35.9263 1.19e-282 ***</a>
<a class="sourceLine" id="cb121-72" href="#cb121-72" data-line-number="72">## `(mths_since_recent_inq) 0&lt;mths_since_recent_inq&lt;=1`        -0.38775   0.012420 -31.2198 5.75e-214 ***</a>
<a class="sourceLine" id="cb121-73" href="#cb121-73" data-line-number="73">## `(mths_since_recent_inq) 1&lt;mths_since_recent_inq&lt;=2`        -0.29301   0.013200 -22.1981 3.58e-109 ***</a>
<a class="sourceLine" id="cb121-74" href="#cb121-74" data-line-number="74">## `(mths_since_recent_inq) 2&lt;mths_since_recent_inq&lt;=3`        -0.25035   0.013564 -18.4570  4.58e-76 ***</a>
<a class="sourceLine" id="cb121-75" href="#cb121-75" data-line-number="75">## `(mths_since_recent_inq) 3&lt;mths_since_recent_inq&lt;=4`        -0.20422   0.013977 -14.6112  2.38e-48 ***</a>
<a class="sourceLine" id="cb121-76" href="#cb121-76" data-line-number="76">## `(mths_since_recent_inq) 4&lt;mths_since_recent_inq&lt;=5`        -0.18047   0.014343 -12.5831  2.62e-36 ***</a>
<a class="sourceLine" id="cb121-77" href="#cb121-77" data-line-number="77">## `(mths_since_recent_inq) 5&lt;mths_since_recent_inq&lt;=8`        -0.14669   0.011848 -12.3804  3.34e-35 ***</a>
<a class="sourceLine" id="cb121-78" href="#cb121-78" data-line-number="78">## `(mths_since_recent_inq) 8&lt;mths_since_recent_inq&lt;=10`       -0.10755   0.013784  -7.8026  6.07e-15 ***</a>
<a class="sourceLine" id="cb121-79" href="#cb121-79" data-line-number="79">## `(mths_since_recent_inq) 10&lt;mths_since_recent_inq&lt;=16`      -0.10442   0.011941  -8.7446  2.24e-18 ***</a>
<a class="sourceLine" id="cb121-80" href="#cb121-80" data-line-number="80">## `(mths_since_recent_inq) 16&lt;mths_since_recent_inq&lt;=25`      -0.06943   0.013577  -5.1141  3.15e-07 ***</a>
<a class="sourceLine" id="cb121-81" href="#cb121-81" data-line-number="81">## `(num_actv_rev_tl) 2&lt;num_actv_rev_tl&lt;=3`                     0.09152   0.033155   2.7604  5.77e-03 ** </a>
<a class="sourceLine" id="cb121-82" href="#cb121-82" data-line-number="82">## `(num_actv_rev_tl) 3&lt;num_actv_rev_tl&lt;=4`                     0.06114   0.028129   2.1737  2.97e-02 *  </a>
<a class="sourceLine" id="cb121-83" href="#cb121-83" data-line-number="83">## `(num_rev_tl_bal_gt_0) -Inf&lt;num_rev_tl_bal_gt_0&lt;=2`          0.48104   0.012969  37.0927 3.68e-301 ***</a>
<a class="sourceLine" id="cb121-84" href="#cb121-84" data-line-number="84">## `(num_rev_tl_bal_gt_0) 2&lt;num_rev_tl_bal_gt_0&lt;=3`             0.34749   0.034237  10.1496  3.33e-24 ***</a>
<a class="sourceLine" id="cb121-85" href="#cb121-85" data-line-number="85">## `(num_rev_tl_bal_gt_0) 3&lt;num_rev_tl_bal_gt_0&lt;=4`             0.31390   0.029416  10.6713  1.39e-26 ***</a>
<a class="sourceLine" id="cb121-86" href="#cb121-86" data-line-number="86">## `(num_rev_tl_bal_gt_0) 4&lt;num_rev_tl_bal_gt_0&lt;=5`             0.32824   0.011256  29.1626 5.78e-187 ***</a>
<a class="sourceLine" id="cb121-87" href="#cb121-87" data-line-number="87">## `(num_rev_tl_bal_gt_0) 5&lt;num_rev_tl_bal_gt_0&lt;=6`             0.26724   0.011439  23.3616 1.05e-120 ***</a>
<a class="sourceLine" id="cb121-88" href="#cb121-88" data-line-number="88">## `(num_rev_tl_bal_gt_0) 6&lt;num_rev_tl_bal_gt_0&lt;=7`             0.23323   0.011982  19.4651  2.17e-84 ***</a>
<a class="sourceLine" id="cb121-89" href="#cb121-89" data-line-number="89">## `(num_rev_tl_bal_gt_0) 7&lt;num_rev_tl_bal_gt_0&lt;=8`             0.18045   0.012817  14.0786  5.14e-45 ***</a>
<a class="sourceLine" id="cb121-90" href="#cb121-90" data-line-number="90">## `(num_rev_tl_bal_gt_0) 8&lt;num_rev_tl_bal_gt_0&lt;=10`            0.13086   0.012003  10.9023  1.12e-27 ***</a>
<a class="sourceLine" id="cb121-91" href="#cb121-91" data-line-number="91">## `(num_tl_op_past_12m) -Inf&lt;num_tl_op_past_12m&lt;=0`            0.57009   0.013312  42.8238  0.00e+00 ***</a>
<a class="sourceLine" id="cb121-92" href="#cb121-92" data-line-number="92">## `(num_tl_op_past_12m) 0&lt;num_tl_op_past_12m&lt;=1`               0.46234   0.011232  41.1636  0.00e+00 ***</a>
<a class="sourceLine" id="cb121-93" href="#cb121-93" data-line-number="93">## `(num_tl_op_past_12m) 1&lt;num_tl_op_past_12m&lt;=2`               0.32881   0.010578  31.0833 4.05e-212 ***</a>
<a class="sourceLine" id="cb121-94" href="#cb121-94" data-line-number="94">## `(num_tl_op_past_12m) 2&lt;num_tl_op_past_12m&lt;=3`               0.19327   0.010336  18.6991  5.03e-78 ***</a>
<a class="sourceLine" id="cb121-95" href="#cb121-95" data-line-number="95">## `(num_tl_op_past_12m) 3&lt;num_tl_op_past_12m&lt;=4`               0.08567   0.010927   7.8403  4.49e-15 ***</a>
<a class="sourceLine" id="cb121-96" href="#cb121-96" data-line-number="96">## `(percent_bc_gt_75) 0.522&lt;percent_bc_gt_75&lt;=0.682`          -0.11542   0.008918 -12.9429  2.58e-38 ***</a>
<a class="sourceLine" id="cb121-97" href="#cb121-97" data-line-number="97">## `(percent_bc_gt_75) 0.682&lt;percent_bc_gt_75&lt;=0.958`          -0.17389   0.009611 -18.0935  3.58e-73 ***</a>
<a class="sourceLine" id="cb121-98" href="#cb121-98" data-line-number="98">## `(tot_hi_cred_lim) -Inf&lt;tot_hi_cred_lim&lt;=102535`            -0.67056   0.013971 -47.9982  0.00e+00 ***</a>
<a class="sourceLine" id="cb121-99" href="#cb121-99" data-line-number="99">## `(tot_hi_cred_lim) 102535&lt;tot_hi_cred_lim&lt;=131793`          -0.53327   0.016095 -33.1323 1.02e-240 ***</a>
<a class="sourceLine" id="cb121-100" href="#cb121-100" data-line-number="100">## `(tot_hi_cred_lim) 131793&lt;tot_hi_cred_lim&lt;=179071`          -0.50812   0.015210 -33.4079 1.05e-244 ***</a>
<a class="sourceLine" id="cb121-101" href="#cb121-101" data-line-number="101">## `(tot_hi_cred_lim) 179071&lt;tot_hi_cred_lim&lt;=208761`          -0.41743   0.016960 -24.6125 9.28e-134 ***</a>
<a class="sourceLine" id="cb121-102" href="#cb121-102" data-line-number="102">## `(tot_hi_cred_lim) 208761&lt;tot_hi_cred_lim&lt;=242055`          -0.36953   0.016854 -21.9249 1.50e-106 ***</a>
<a class="sourceLine" id="cb121-103" href="#cb121-103" data-line-number="103">## `(tot_hi_cred_lim) 242055&lt;tot_hi_cred_lim&lt;=298516`          -0.29341   0.015680 -18.7128  3.90e-78 ***</a>
<a class="sourceLine" id="cb121-104" href="#cb121-104" data-line-number="104">## `(tot_hi_cred_lim) 298516&lt;tot_hi_cred_lim&lt;=383997`          -0.21795   0.015550 -14.0163  1.24e-44 ***</a>
<a class="sourceLine" id="cb121-105" href="#cb121-105" data-line-number="105">## `(tot_hi_cred_lim) 383997&lt;tot_hi_cred_lim&lt;=487388`          -0.15086   0.017194  -8.7738  1.73e-18 ***</a>
<a class="sourceLine" id="cb121-106" href="#cb121-106" data-line-number="106">## `(total_bc_limit) -Inf&lt;total_bc_limit&lt;=4478`                -0.99491   0.013929 -71.4271  0.00e+00 ***</a>
<a class="sourceLine" id="cb121-107" href="#cb121-107" data-line-number="107">## `(total_bc_limit) 4478&lt;total_bc_limit&lt;=9405`                -0.76318   0.012543 -60.8465  0.00e+00 ***</a>
<a class="sourceLine" id="cb121-108" href="#cb121-108" data-line-number="108">## `(total_bc_limit) 9405&lt;total_bc_limit&lt;=11360`               -0.64216   0.014401 -44.5908  0.00e+00 ***</a>
<a class="sourceLine" id="cb121-109" href="#cb121-109" data-line-number="109">## `(total_bc_limit) 11360&lt;total_bc_limit&lt;=13970`              -0.56875   0.013804 -41.2007  0.00e+00 ***</a>
<a class="sourceLine" id="cb121-110" href="#cb121-110" data-line-number="110">## `(total_bc_limit) 13970&lt;total_bc_limit&lt;=18174`              -0.49285   0.012950 -38.0576  0.00e+00 ***</a>
<a class="sourceLine" id="cb121-111" href="#cb121-111" data-line-number="111">## `(total_bc_limit) 18174&lt;total_bc_limit&lt;=20950`              -0.43128   0.014759 -29.2212 1.04e-187 ***</a>
<a class="sourceLine" id="cb121-112" href="#cb121-112" data-line-number="112">## `(total_bc_limit) 20950&lt;total_bc_limit&lt;=24806`              -0.38256   0.014233 -26.8782 3.95e-159 ***</a>
<a class="sourceLine" id="cb121-113" href="#cb121-113" data-line-number="113">## `(total_bc_limit) 24806&lt;total_bc_limit&lt;=29471`              -0.31852   0.014604 -21.8113 1.81e-105 ***</a>
<a class="sourceLine" id="cb121-114" href="#cb121-114" data-line-number="114">## `(total_bc_limit) 29471&lt;total_bc_limit&lt;=34756`              -0.26949   0.015151 -17.7866  8.98e-71 ***</a>
<a class="sourceLine" id="cb121-115" href="#cb121-115" data-line-number="115">## `(total_bc_limit) 34756&lt;total_bc_limit&lt;=47175`              -0.18062   0.013781 -13.1068  3.01e-39 ***</a>
<a class="sourceLine" id="cb121-116" href="#cb121-116" data-line-number="116">## </a>
<a class="sourceLine" id="cb121-117" href="#cb121-117" data-line-number="117">## ------------------------------------------------------------------- </a>
<a class="sourceLine" id="cb121-118" href="#cb121-118" data-line-number="118">## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1 </a>
<a class="sourceLine" id="cb121-119" href="#cb121-119" data-line-number="119">## </a>
<a class="sourceLine" id="cb121-120" href="#cb121-120" data-line-number="120">## ---</a>
<a class="sourceLine" id="cb121-121" href="#cb121-121" data-line-number="121">## null df: 1045083; null deviance: 1048231;</a>
<a class="sourceLine" id="cb121-122" href="#cb121-122" data-line-number="122">## residuals df: 1044976; residuals deviance: 982741;</a>
<a class="sourceLine" id="cb121-123" href="#cb121-123" data-line-number="123">## # obs.: 1045084; # non-zero weighted obs.: 1045084;</a>
<a class="sourceLine" id="cb121-124" href="#cb121-124" data-line-number="124">## AIC: 982957; log Likelihood: -491370.5;</a>
<a class="sourceLine" id="cb121-125" href="#cb121-125" data-line-number="125">## RSS: 1044655; dispersion: 1; iterations: 4;</a>
<a class="sourceLine" id="cb121-126" href="#cb121-126" data-line-number="126">## rank: 108; max tolerance: 9.52e-10; convergence: TRUE.</a></code></pre></div>
<div class="sourceCode" id="cb122"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" href="#cb122-1" data-line-number="1"><span class="co"># AIC = 982957</span></a>
<a class="sourceLine" id="cb122-2" href="#cb122-2" data-line-number="2"><span class="co"># Log likelihood = -491370.5</span></a>
<a class="sourceLine" id="cb122-3" href="#cb122-3" data-line-number="3"><span class="co"># </span></a>
<a class="sourceLine" id="cb122-4" href="#cb122-4" data-line-number="4">speedglm<span class="op">:::</span><span class="kw">summary.speedglm</span>(SGLM_B_reretrain)</a></code></pre></div>
<div class="sourceCode" id="cb123"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb123-1" href="#cb123-1" data-line-number="1">## Generalized Linear Model of class &#39;speedglm&#39;:</a>
<a class="sourceLine" id="cb123-2" href="#cb123-2" data-line-number="2">## </a>
<a class="sourceLine" id="cb123-3" href="#cb123-3" data-line-number="3">## Call:  speedglm::speedglm(formula = isGoodLoan ~ ., data = loansData,      family = binomial()) </a>
<a class="sourceLine" id="cb123-4" href="#cb123-4" data-line-number="4">## </a>
<a class="sourceLine" id="cb123-5" href="#cb123-5" data-line-number="5">## Coefficients:</a>
<a class="sourceLine" id="cb123-6" href="#cb123-6" data-line-number="6">##  ------------------------------------------------------------------ </a>
<a class="sourceLine" id="cb123-7" href="#cb123-7" data-line-number="7">##                                                             Estimate Std. Error  z value  Pr(&gt;|z|)    </a>
<a class="sourceLine" id="cb123-8" href="#cb123-8" data-line-number="8">## (Intercept)                                                  0.64039   0.019861  32.2431 4.40e-228 ***</a>
<a class="sourceLine" id="cb123-9" href="#cb123-9" data-line-number="9">## `(loan_amnt) -Inf&lt;loan_amnt&lt;=3500`                           1.10796   0.015121  73.2723  0.00e+00 ***</a>
<a class="sourceLine" id="cb123-10" href="#cb123-10" data-line-number="10">## `(loan_amnt) 3500&lt;loan_amnt&lt;=9000`                           0.93839   0.010726  87.4833  0.00e+00 ***</a>
<a class="sourceLine" id="cb123-11" href="#cb123-11" data-line-number="11">## `(loan_amnt) 9000&lt;loan_amnt&lt;=10000`                          0.70268   0.012338  56.9531  0.00e+00 ***</a>
<a class="sourceLine" id="cb123-12" href="#cb123-12" data-line-number="12">## `(loan_amnt) 10000&lt;loan_amnt&lt;=12000`                         0.56169   0.012064  46.5606  0.00e+00 ***</a>
<a class="sourceLine" id="cb123-13" href="#cb123-13" data-line-number="13">## `(loan_amnt) 12000&lt;loan_amnt&lt;=14975`                         0.45839   0.013082  35.0405 5.44e-269 ***</a>
<a class="sourceLine" id="cb123-14" href="#cb123-14" data-line-number="14">## `(loan_amnt) 14975&lt;loan_amnt&lt;=15000`                         0.52969   0.014185  37.3408 3.57e-305 ***</a>
<a class="sourceLine" id="cb123-15" href="#cb123-15" data-line-number="15">## `(loan_amnt) 15000&lt;loan_amnt&lt;=17000`                         0.34043   0.013520  25.1786 6.87e-140 ***</a>
<a class="sourceLine" id="cb123-16" href="#cb123-16" data-line-number="16">## `(loan_amnt) 17000&lt;loan_amnt&lt;=19950`                         0.24032   0.013357  17.9918  2.26e-72 ***</a>
<a class="sourceLine" id="cb123-17" href="#cb123-17" data-line-number="17">## `(loan_amnt) 19950&lt;loan_amnt&lt;=28000`                         0.22283   0.010012  22.2567 9.71e-110 ***</a>
<a class="sourceLine" id="cb123-18" href="#cb123-18" data-line-number="18">## `(verification_status) verification_status=Not Verified`     0.32251   0.007017  45.9606  0.00e+00 ***</a>
<a class="sourceLine" id="cb123-19" href="#cb123-19" data-line-number="19">## `(verification_status) verification_status=Source Verified`  0.10753   0.005988  17.9583  4.13e-72 ***</a>
<a class="sourceLine" id="cb123-20" href="#cb123-20" data-line-number="20">## `(issue_d) -Inf&lt;issue_d&lt;=14.167`                             0.19954   0.010447  19.1010  2.48e-81 ***</a>
<a class="sourceLine" id="cb123-21" href="#cb123-21" data-line-number="21">## `(issue_d) 14.667&lt;issue_d&lt;=16.083`                          -0.05187   0.008491  -6.1085  1.01e-09 ***</a>
<a class="sourceLine" id="cb123-22" href="#cb123-22" data-line-number="22">## `(issue_d) 16.083&lt;issue_d&lt;=16.667`                          -0.41059   0.011328 -36.2468 1.12e-287 ***</a>
<a class="sourceLine" id="cb123-23" href="#cb123-23" data-line-number="23">## `(issue_d) 16.667&lt;issue_d&lt;=17.75`                           -0.36143   0.011081 -32.6172 2.34e-233 ***</a>
<a class="sourceLine" id="cb123-24" href="#cb123-24" data-line-number="24">## `(dti) 0.299&lt;dti&lt;=9.99`                                     -0.42326   0.007897 -53.6008  0.00e+00 ***</a>
<a class="sourceLine" id="cb123-25" href="#cb123-25" data-line-number="25">## `(revol_util) -Inf&lt;revol_util&lt;=0.147`                        0.26612   0.015380  17.3028  4.48e-67 ***</a>
<a class="sourceLine" id="cb123-26" href="#cb123-26" data-line-number="26">## `(revol_util) 0.147&lt;revol_util&lt;=0.217`                       0.23979   0.015891  15.0894  1.90e-51 ***</a>
<a class="sourceLine" id="cb123-27" href="#cb123-27" data-line-number="27">## `(revol_util) 0.217&lt;revol_util&lt;=0.316`                       0.20448   0.011942  17.1221  1.01e-65 ***</a>
<a class="sourceLine" id="cb123-28" href="#cb123-28" data-line-number="28">## `(revol_util) 0.316&lt;revol_util&lt;=0.388`                       0.15118   0.011109  13.6087  3.56e-42 ***</a>
<a class="sourceLine" id="cb123-29" href="#cb123-29" data-line-number="29">## `(revol_util) 0.388&lt;revol_util&lt;=0.479`                       0.08991   0.008988  10.0032  1.48e-23 ***</a>
<a class="sourceLine" id="cb123-30" href="#cb123-30" data-line-number="30">## `(open_rv_12m) -Inf&lt;open_rv_12m&lt;=0`                         -0.33627   0.019429 -17.3078  4.11e-67 ***</a>
<a class="sourceLine" id="cb123-31" href="#cb123-31" data-line-number="31">## `(open_rv_12m) 0&lt;open_rv_12m&lt;=1`                            -0.24267   0.017149 -14.1505  1.85e-45 ***</a>
<a class="sourceLine" id="cb123-32" href="#cb123-32" data-line-number="32">## `(open_rv_12m) 1&lt;open_rv_12m&lt;=2`                            -0.13405   0.016511  -8.1188  4.71e-16 ***</a>
<a class="sourceLine" id="cb123-33" href="#cb123-33" data-line-number="33">## `(open_rv_12m) 2&lt;open_rv_12m&lt;=28`                           -0.02477   0.014092  -1.7578  7.88e-02 .  </a>
<a class="sourceLine" id="cb123-34" href="#cb123-34" data-line-number="34">## `(open_rv_24m) -Inf&lt;open_rv_24m&lt;=0`                          0.21090   0.022340   9.4402  3.72e-21 ***</a>
<a class="sourceLine" id="cb123-35" href="#cb123-35" data-line-number="35">## `(open_rv_24m) 0&lt;open_rv_24m&lt;=1`                             0.29822   0.017808  16.7471  5.94e-63 ***</a>
<a class="sourceLine" id="cb123-36" href="#cb123-36" data-line-number="36">## `(open_rv_24m) 1&lt;open_rv_24m&lt;=2`                             0.24708   0.016441  15.0279  4.82e-51 ***</a>
<a class="sourceLine" id="cb123-37" href="#cb123-37" data-line-number="37">## `(open_rv_24m) 2&lt;open_rv_24m&lt;=3`                             0.15733   0.015669  10.0413  1.00e-23 ***</a>
<a class="sourceLine" id="cb123-38" href="#cb123-38" data-line-number="38">## `(open_rv_24m) 3&lt;open_rv_24m&lt;=5`                             0.10573   0.013710   7.7121  1.24e-14 ***</a>
<a class="sourceLine" id="cb123-39" href="#cb123-39" data-line-number="39">## `(bc_open_to_buy) -Inf&lt;bc_open_to_buy&lt;=0.315`                0.35942   0.066245   5.4256  5.77e-08 ***</a>
<a class="sourceLine" id="cb123-40" href="#cb123-40" data-line-number="40">## `(bc_open_to_buy) 0.315&lt;bc_open_to_buy&lt;=0.388`               0.35527   0.066826   5.3164  1.06e-07 ***</a>
<a class="sourceLine" id="cb123-41" href="#cb123-41" data-line-number="41">## `(bc_open_to_buy) 0.388&lt;bc_open_to_buy&lt;=0.461`               0.37089   0.066665   5.5636  2.64e-08 ***</a>
<a class="sourceLine" id="cb123-42" href="#cb123-42" data-line-number="42">## `(bc_open_to_buy) 0.461&lt;bc_open_to_buy&lt;=0.539`               0.38326   0.066482   5.7649  8.17e-09 ***</a>
<a class="sourceLine" id="cb123-43" href="#cb123-43" data-line-number="43">## `(bc_open_to_buy) 0.539&lt;bc_open_to_buy&lt;=0.725`               0.39699   0.066009   6.0141  1.81e-09 ***</a>
<a class="sourceLine" id="cb123-44" href="#cb123-44" data-line-number="44">## `(bc_open_to_buy) 0.725&lt;bc_open_to_buy&lt;=0.876`               0.40323   0.066050   6.1050  1.03e-09 ***</a>
<a class="sourceLine" id="cb123-45" href="#cb123-45" data-line-number="45">## `(bc_open_to_buy) 0.876&lt;bc_open_to_buy&lt;=0.919`               0.33279   0.066538   5.0015  5.69e-07 ***</a>
<a class="sourceLine" id="cb123-46" href="#cb123-46" data-line-number="46">## `(bc_open_to_buy) 0.919&lt;bc_open_to_buy&lt;=0.979`               0.18281   0.066118   2.7649  5.69e-03 ** </a>
<a class="sourceLine" id="cb123-47" href="#cb123-47" data-line-number="47">## `(bc_open_to_buy) 0.979&lt;bc_open_to_buy&lt;=3.396`              -0.02193   0.066441  -0.3301  7.41e-01    </a>
<a class="sourceLine" id="cb123-48" href="#cb123-48" data-line-number="48">## `(mo_sin_rcnt_rev_tl_op) -Inf&lt;mo_sin_rcnt_rev_tl_op&lt;=1`      0.02121   0.012625   1.6796  9.30e-02 .  </a>
<a class="sourceLine" id="cb123-49" href="#cb123-49" data-line-number="49">## `(mo_sin_rcnt_rev_tl_op) 1&lt;mo_sin_rcnt_rev_tl_op&lt;=2`         0.07100   0.013128   5.4085  6.36e-08 ***</a>
<a class="sourceLine" id="cb123-50" href="#cb123-50" data-line-number="50">## `(mo_sin_rcnt_rev_tl_op) 2&lt;mo_sin_rcnt_rev_tl_op&lt;=3`         0.02405   0.013232   1.8174  6.92e-02 .  </a>
<a class="sourceLine" id="cb123-51" href="#cb123-51" data-line-number="51">## `(mo_sin_rcnt_rev_tl_op) 3&lt;mo_sin_rcnt_rev_tl_op&lt;=4`         0.02963   0.013417   2.2087  2.72e-02 *  </a>
<a class="sourceLine" id="cb123-52" href="#cb123-52" data-line-number="52">## `(mo_sin_rcnt_rev_tl_op) 7&lt;mo_sin_rcnt_rev_tl_op&lt;=9`        -0.01695   0.011849  -1.4302  1.53e-01    </a>
<a class="sourceLine" id="cb123-53" href="#cb123-53" data-line-number="53">## `(mo_sin_rcnt_rev_tl_op) 9&lt;mo_sin_rcnt_rev_tl_op&lt;=16`       -0.07866   0.009868  -7.9714  1.57e-15 ***</a>
<a class="sourceLine" id="cb123-54" href="#cb123-54" data-line-number="54">## `(mo_sin_rcnt_rev_tl_op) 16&lt;mo_sin_rcnt_rev_tl_op&lt;=20`      -0.09308   0.014689  -6.3371  2.34e-10 ***</a>
<a class="sourceLine" id="cb123-55" href="#cb123-55" data-line-number="55">## `(mo_sin_rcnt_rev_tl_op) 20&lt;mo_sin_rcnt_rev_tl_op&lt;=28`      -0.05295   0.013644  -3.8808  1.04e-04 ***</a>
<a class="sourceLine" id="cb123-56" href="#cb123-56" data-line-number="56">## `(mort_acc) -Inf&lt;mort_acc&lt;=0`                                0.80077   0.036082  22.1932 4.00e-109 ***</a>
<a class="sourceLine" id="cb123-57" href="#cb123-57" data-line-number="57">## `(mort_acc) 0&lt;mort_acc&lt;=1`                                   0.92056   0.036353  25.3225 1.81e-141 ***</a>
<a class="sourceLine" id="cb123-58" href="#cb123-58" data-line-number="58">## `(mort_acc) 1&lt;mort_acc&lt;=2`                                   1.01742   0.036415  27.9399 8.74e-172 ***</a>
<a class="sourceLine" id="cb123-59" href="#cb123-59" data-line-number="59">## `(mort_acc) 2&lt;mort_acc&lt;=3`                                   1.06480   0.036620  29.0769 7.03e-186 ***</a>
<a class="sourceLine" id="cb123-60" href="#cb123-60" data-line-number="60">## `(mort_acc) 3&lt;mort_acc&lt;=5`                                   1.10583   0.036453  30.3356 3.89e-202 ***</a>
<a class="sourceLine" id="cb123-61" href="#cb123-61" data-line-number="61">## `(mort_acc) 5&lt;mort_acc&lt;=47`                                  1.16868   0.037536  31.1351 8.06e-213 ***</a>
<a class="sourceLine" id="cb123-62" href="#cb123-62" data-line-number="62">## `(mths_since_recent_bc) -Inf&lt;mths_since_recent_bc&lt;=2`       -0.64469   0.070952  -9.0863  1.02e-19 ***</a>
<a class="sourceLine" id="cb123-63" href="#cb123-63" data-line-number="63">## `(mths_since_recent_bc) 2&lt;mths_since_recent_bc&lt;=4`          -0.56402   0.070864  -7.9591  1.73e-15 ***</a>
<a class="sourceLine" id="cb123-64" href="#cb123-64" data-line-number="64">## `(mths_since_recent_bc) 4&lt;mths_since_recent_bc&lt;=7`          -0.49657   0.070424  -7.0511  1.77e-12 ***</a>
<a class="sourceLine" id="cb123-65" href="#cb123-65" data-line-number="65">## `(mths_since_recent_bc) 7&lt;mths_since_recent_bc&lt;=15`         -0.45193   0.070215  -6.4363  1.22e-10 ***</a>
<a class="sourceLine" id="cb123-66" href="#cb123-66" data-line-number="66">## `(mths_since_recent_bc) 15&lt;mths_since_recent_bc&lt;=21`        -0.41463   0.070419  -5.8880  3.91e-09 ***</a>
<a class="sourceLine" id="cb123-67" href="#cb123-67" data-line-number="67">## `(mths_since_recent_bc) 21&lt;mths_since_recent_bc&lt;=28`        -0.37287   0.070541  -5.2859  1.25e-07 ***</a>
<a class="sourceLine" id="cb123-68" href="#cb123-68" data-line-number="68">## `(mths_since_recent_bc) 28&lt;mths_since_recent_bc&lt;=35`        -0.35380   0.070697  -5.0044  5.60e-07 ***</a>
<a class="sourceLine" id="cb123-69" href="#cb123-69" data-line-number="69">## `(mths_since_recent_bc) 35&lt;mths_since_recent_bc&lt;=56`        -0.28475   0.070276  -4.0519  5.08e-05 ***</a>
<a class="sourceLine" id="cb123-70" href="#cb123-70" data-line-number="70">## `(mths_since_recent_bc) 56&lt;mths_since_recent_bc&lt;=639`       -0.17252   0.069578  -2.4796  1.32e-02 *  </a>
<a class="sourceLine" id="cb123-71" href="#cb123-71" data-line-number="71">## `(mths_since_recent_inq) -Inf&lt;mths_since_recent_inq&lt;=0`     -0.45972   0.012796 -35.9263 1.19e-282 ***</a>
<a class="sourceLine" id="cb123-72" href="#cb123-72" data-line-number="72">## `(mths_since_recent_inq) 0&lt;mths_since_recent_inq&lt;=1`        -0.38775   0.012420 -31.2198 5.75e-214 ***</a>
<a class="sourceLine" id="cb123-73" href="#cb123-73" data-line-number="73">## `(mths_since_recent_inq) 1&lt;mths_since_recent_inq&lt;=2`        -0.29301   0.013200 -22.1981 3.58e-109 ***</a>
<a class="sourceLine" id="cb123-74" href="#cb123-74" data-line-number="74">## `(mths_since_recent_inq) 2&lt;mths_since_recent_inq&lt;=3`        -0.25035   0.013564 -18.4570  4.58e-76 ***</a>
<a class="sourceLine" id="cb123-75" href="#cb123-75" data-line-number="75">## `(mths_since_recent_inq) 3&lt;mths_since_recent_inq&lt;=4`        -0.20422   0.013977 -14.6112  2.38e-48 ***</a>
<a class="sourceLine" id="cb123-76" href="#cb123-76" data-line-number="76">## `(mths_since_recent_inq) 4&lt;mths_since_recent_inq&lt;=5`        -0.18047   0.014343 -12.5831  2.62e-36 ***</a>
<a class="sourceLine" id="cb123-77" href="#cb123-77" data-line-number="77">## `(mths_since_recent_inq) 5&lt;mths_since_recent_inq&lt;=8`        -0.14669   0.011848 -12.3804  3.34e-35 ***</a>
<a class="sourceLine" id="cb123-78" href="#cb123-78" data-line-number="78">## `(mths_since_recent_inq) 8&lt;mths_since_recent_inq&lt;=10`       -0.10755   0.013784  -7.8026  6.07e-15 ***</a>
<a class="sourceLine" id="cb123-79" href="#cb123-79" data-line-number="79">## `(mths_since_recent_inq) 10&lt;mths_since_recent_inq&lt;=16`      -0.10442   0.011941  -8.7446  2.24e-18 ***</a>
<a class="sourceLine" id="cb123-80" href="#cb123-80" data-line-number="80">## `(mths_since_recent_inq) 16&lt;mths_since_recent_inq&lt;=25`      -0.06943   0.013577  -5.1141  3.15e-07 ***</a>
<a class="sourceLine" id="cb123-81" href="#cb123-81" data-line-number="81">## `(num_actv_rev_tl) 2&lt;num_actv_rev_tl&lt;=3`                     0.09152   0.033155   2.7604  5.77e-03 ** </a>
<a class="sourceLine" id="cb123-82" href="#cb123-82" data-line-number="82">## `(num_actv_rev_tl) 3&lt;num_actv_rev_tl&lt;=4`                     0.06114   0.028129   2.1737  2.97e-02 *  </a>
<a class="sourceLine" id="cb123-83" href="#cb123-83" data-line-number="83">## `(num_rev_tl_bal_gt_0) -Inf&lt;num_rev_tl_bal_gt_0&lt;=2`          0.48104   0.012969  37.0927 3.68e-301 ***</a>
<a class="sourceLine" id="cb123-84" href="#cb123-84" data-line-number="84">## `(num_rev_tl_bal_gt_0) 2&lt;num_rev_tl_bal_gt_0&lt;=3`             0.34749   0.034237  10.1496  3.33e-24 ***</a>
<a class="sourceLine" id="cb123-85" href="#cb123-85" data-line-number="85">## `(num_rev_tl_bal_gt_0) 3&lt;num_rev_tl_bal_gt_0&lt;=4`             0.31390   0.029416  10.6713  1.39e-26 ***</a>
<a class="sourceLine" id="cb123-86" href="#cb123-86" data-line-number="86">## `(num_rev_tl_bal_gt_0) 4&lt;num_rev_tl_bal_gt_0&lt;=5`             0.32824   0.011256  29.1626 5.78e-187 ***</a>
<a class="sourceLine" id="cb123-87" href="#cb123-87" data-line-number="87">## `(num_rev_tl_bal_gt_0) 5&lt;num_rev_tl_bal_gt_0&lt;=6`             0.26724   0.011439  23.3616 1.05e-120 ***</a>
<a class="sourceLine" id="cb123-88" href="#cb123-88" data-line-number="88">## `(num_rev_tl_bal_gt_0) 6&lt;num_rev_tl_bal_gt_0&lt;=7`             0.23323   0.011982  19.4651  2.17e-84 ***</a>
<a class="sourceLine" id="cb123-89" href="#cb123-89" data-line-number="89">## `(num_rev_tl_bal_gt_0) 7&lt;num_rev_tl_bal_gt_0&lt;=8`             0.18045   0.012817  14.0786  5.14e-45 ***</a>
<a class="sourceLine" id="cb123-90" href="#cb123-90" data-line-number="90">## `(num_rev_tl_bal_gt_0) 8&lt;num_rev_tl_bal_gt_0&lt;=10`            0.13086   0.012003  10.9023  1.12e-27 ***</a>
<a class="sourceLine" id="cb123-91" href="#cb123-91" data-line-number="91">## `(num_tl_op_past_12m) -Inf&lt;num_tl_op_past_12m&lt;=0`            0.57009   0.013312  42.8238  0.00e+00 ***</a>
<a class="sourceLine" id="cb123-92" href="#cb123-92" data-line-number="92">## `(num_tl_op_past_12m) 0&lt;num_tl_op_past_12m&lt;=1`               0.46234   0.011232  41.1636  0.00e+00 ***</a>
<a class="sourceLine" id="cb123-93" href="#cb123-93" data-line-number="93">## `(num_tl_op_past_12m) 1&lt;num_tl_op_past_12m&lt;=2`               0.32881   0.010578  31.0833 4.05e-212 ***</a>
<a class="sourceLine" id="cb123-94" href="#cb123-94" data-line-number="94">## `(num_tl_op_past_12m) 2&lt;num_tl_op_past_12m&lt;=3`               0.19327   0.010336  18.6991  5.03e-78 ***</a>
<a class="sourceLine" id="cb123-95" href="#cb123-95" data-line-number="95">## `(num_tl_op_past_12m) 3&lt;num_tl_op_past_12m&lt;=4`               0.08567   0.010927   7.8403  4.49e-15 ***</a>
<a class="sourceLine" id="cb123-96" href="#cb123-96" data-line-number="96">## `(percent_bc_gt_75) 0.522&lt;percent_bc_gt_75&lt;=0.682`          -0.11542   0.008918 -12.9429  2.58e-38 ***</a>
<a class="sourceLine" id="cb123-97" href="#cb123-97" data-line-number="97">## `(percent_bc_gt_75) 0.682&lt;percent_bc_gt_75&lt;=0.958`          -0.17389   0.009611 -18.0935  3.58e-73 ***</a>
<a class="sourceLine" id="cb123-98" href="#cb123-98" data-line-number="98">## `(tot_hi_cred_lim) -Inf&lt;tot_hi_cred_lim&lt;=102535`            -0.67056   0.013971 -47.9982  0.00e+00 ***</a>
<a class="sourceLine" id="cb123-99" href="#cb123-99" data-line-number="99">## `(tot_hi_cred_lim) 102535&lt;tot_hi_cred_lim&lt;=131793`          -0.53327   0.016095 -33.1323 1.02e-240 ***</a>
<a class="sourceLine" id="cb123-100" href="#cb123-100" data-line-number="100">## `(tot_hi_cred_lim) 131793&lt;tot_hi_cred_lim&lt;=179071`          -0.50812   0.015210 -33.4079 1.05e-244 ***</a>
<a class="sourceLine" id="cb123-101" href="#cb123-101" data-line-number="101">## `(tot_hi_cred_lim) 179071&lt;tot_hi_cred_lim&lt;=208761`          -0.41743   0.016960 -24.6125 9.28e-134 ***</a>
<a class="sourceLine" id="cb123-102" href="#cb123-102" data-line-number="102">## `(tot_hi_cred_lim) 208761&lt;tot_hi_cred_lim&lt;=242055`          -0.36953   0.016854 -21.9249 1.50e-106 ***</a>
<a class="sourceLine" id="cb123-103" href="#cb123-103" data-line-number="103">## `(tot_hi_cred_lim) 242055&lt;tot_hi_cred_lim&lt;=298516`          -0.29341   0.015680 -18.7128  3.90e-78 ***</a>
<a class="sourceLine" id="cb123-104" href="#cb123-104" data-line-number="104">## `(tot_hi_cred_lim) 298516&lt;tot_hi_cred_lim&lt;=383997`          -0.21795   0.015550 -14.0163  1.24e-44 ***</a>
<a class="sourceLine" id="cb123-105" href="#cb123-105" data-line-number="105">## `(tot_hi_cred_lim) 383997&lt;tot_hi_cred_lim&lt;=487388`          -0.15086   0.017194  -8.7738  1.73e-18 ***</a>
<a class="sourceLine" id="cb123-106" href="#cb123-106" data-line-number="106">## `(total_bc_limit) -Inf&lt;total_bc_limit&lt;=4478`                -0.99491   0.013929 -71.4271  0.00e+00 ***</a>
<a class="sourceLine" id="cb123-107" href="#cb123-107" data-line-number="107">## `(total_bc_limit) 4478&lt;total_bc_limit&lt;=9405`                -0.76318   0.012543 -60.8465  0.00e+00 ***</a>
<a class="sourceLine" id="cb123-108" href="#cb123-108" data-line-number="108">## `(total_bc_limit) 9405&lt;total_bc_limit&lt;=11360`               -0.64216   0.014401 -44.5908  0.00e+00 ***</a>
<a class="sourceLine" id="cb123-109" href="#cb123-109" data-line-number="109">## `(total_bc_limit) 11360&lt;total_bc_limit&lt;=13970`              -0.56875   0.013804 -41.2007  0.00e+00 ***</a>
<a class="sourceLine" id="cb123-110" href="#cb123-110" data-line-number="110">## `(total_bc_limit) 13970&lt;total_bc_limit&lt;=18174`              -0.49285   0.012950 -38.0576  0.00e+00 ***</a>
<a class="sourceLine" id="cb123-111" href="#cb123-111" data-line-number="111">## `(total_bc_limit) 18174&lt;total_bc_limit&lt;=20950`              -0.43128   0.014759 -29.2212 1.04e-187 ***</a>
<a class="sourceLine" id="cb123-112" href="#cb123-112" data-line-number="112">## `(total_bc_limit) 20950&lt;total_bc_limit&lt;=24806`              -0.38256   0.014233 -26.8782 3.95e-159 ***</a>
<a class="sourceLine" id="cb123-113" href="#cb123-113" data-line-number="113">## `(total_bc_limit) 24806&lt;total_bc_limit&lt;=29471`              -0.31852   0.014604 -21.8113 1.81e-105 ***</a>
<a class="sourceLine" id="cb123-114" href="#cb123-114" data-line-number="114">## `(total_bc_limit) 29471&lt;total_bc_limit&lt;=34756`              -0.26949   0.015151 -17.7866  8.98e-71 ***</a>
<a class="sourceLine" id="cb123-115" href="#cb123-115" data-line-number="115">## `(total_bc_limit) 34756&lt;total_bc_limit&lt;=47175`              -0.18062   0.013781 -13.1068  3.01e-39 ***</a>
<a class="sourceLine" id="cb123-116" href="#cb123-116" data-line-number="116">## </a>
<a class="sourceLine" id="cb123-117" href="#cb123-117" data-line-number="117">## ------------------------------------------------------------------- </a>
<a class="sourceLine" id="cb123-118" href="#cb123-118" data-line-number="118">## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1 </a>
<a class="sourceLine" id="cb123-119" href="#cb123-119" data-line-number="119">## </a>
<a class="sourceLine" id="cb123-120" href="#cb123-120" data-line-number="120">## ---</a>
<a class="sourceLine" id="cb123-121" href="#cb123-121" data-line-number="121">## null df: 1045083; null deviance: 1048231;</a>
<a class="sourceLine" id="cb123-122" href="#cb123-122" data-line-number="122">## residuals df: 1044976; residuals deviance: 982741;</a>
<a class="sourceLine" id="cb123-123" href="#cb123-123" data-line-number="123">## # obs.: 1045084; # non-zero weighted obs.: 1045084;</a>
<a class="sourceLine" id="cb123-124" href="#cb123-124" data-line-number="124">## AIC: 982957; log Likelihood: -491370.5;</a>
<a class="sourceLine" id="cb123-125" href="#cb123-125" data-line-number="125">## RSS: 1044655; dispersion: 1; iterations: 4;</a>
<a class="sourceLine" id="cb123-126" href="#cb123-126" data-line-number="126">## rank: 108; max tolerance: 9.52e-10; convergence: TRUE.</a></code></pre></div>
<div class="sourceCode" id="cb124"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" href="#cb124-1" data-line-number="1"><span class="co"># AIC = 982957</span></a>
<a class="sourceLine" id="cb124-2" href="#cb124-2" data-line-number="2"><span class="co"># log Likelihood = -491370.5</span></a></code></pre></div>
<p></p>

</div>
</div>
<div id="model-result" class="section level2">
<h2><span class="header-section-number">3.5</span> Model result</h2>
<div id="final-list-of-variables" class="section level3">
<h3><span class="header-section-number">3.5.1</span> Final list of variables</h3>
<p></p>
<div class="sourceCode" id="cb125"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" href="#cb125-1" data-line-number="1"><span class="co"># Saved at the end of the modeling file</span></a>
<a class="sourceLine" id="cb125-2" href="#cb125-2" data-line-number="2">SGLM_B_train &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;datasets/SGLM_B_train.rds&quot;</span>)</a>
<a class="sourceLine" id="cb125-3" href="#cb125-3" data-line-number="3">SGLM_B_retrain &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;datasets/SGLM_B_retrain.rds&quot;</span>)</a>
<a class="sourceLine" id="cb125-4" href="#cb125-4" data-line-number="4">SGLM_B_reretrain &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;datasets/SGLM_B_reretrain.rds&quot;</span>)</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb126"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" href="#cb126-1" data-line-number="1"><span class="co"># Model to use</span></a>
<a class="sourceLine" id="cb126-2" href="#cb126-2" data-line-number="2">GLModel &lt;-<span class="st"> </span>SGLM_B_retrain</a>
<a class="sourceLine" id="cb126-3" href="#cb126-3" data-line-number="3"></a>
<a class="sourceLine" id="cb126-4" href="#cb126-4" data-line-number="4"><span class="co"># List of model variables</span></a>
<a class="sourceLine" id="cb126-5" href="#cb126-5" data-line-number="5">modelNames &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb126-6" href="#cb126-6" data-line-number="6"><span class="st">  </span><span class="kw">attr</span>(GLModel<span class="op">$</span>coefficients, <span class="st">&quot;names&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb126-7" href="#cb126-7" data-line-number="7"><span class="st">  </span><span class="kw">enframe</span>(<span class="dt">x =</span> .) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb126-8" href="#cb126-8" data-line-number="8"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">variableName =</span> <span class="st">&quot;value&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb126-9" href="#cb126-9" data-line-number="9"><span class="st">  </span><span class="kw">select</span>(variableName) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb126-10" href="#cb126-10" data-line-number="10"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">variableName =</span> <span class="kw">str_remove_all</span>(variableName, <span class="st">&quot;\`&quot;</span>))</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb127"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb127-1" href="#cb127-1" data-line-number="1"><span class="co"># and their coefficients in the model (the summary function for speedglm objects is not exported and</span></a>
<a class="sourceLine" id="cb127-2" href="#cb127-2" data-line-number="2"><span class="co"># bookdown seems to have a problem with that).</span></a>
<a class="sourceLine" id="cb127-3" href="#cb127-3" data-line-number="3"></a>
<a class="sourceLine" id="cb127-4" href="#cb127-4" data-line-number="4">sumSpeed &lt;-<span class="st"> </span>speedglm<span class="op">:::</span>summary.speedglm</a>
<a class="sourceLine" id="cb127-5" href="#cb127-5" data-line-number="5"></a>
<a class="sourceLine" id="cb127-6" href="#cb127-6" data-line-number="6">GLMCoefficients &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb127-7" href="#cb127-7" data-line-number="7"><span class="st">  </span><span class="kw">sumSpeed</span>(GLModel)<span class="op">$</span>coefficients <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb127-8" href="#cb127-8" data-line-number="8"><span class="st">  </span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb127-9" href="#cb127-9" data-line-number="9"><span class="st">  </span><span class="kw">cbind</span>(modelNames) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb127-10" href="#cb127-10" data-line-number="10"><span class="st">  </span><span class="kw">rename</span>(</a>
<a class="sourceLine" id="cb127-11" href="#cb127-11" data-line-number="11">    <span class="dt">zValue =</span> <span class="st">&quot;z value&quot;</span>,</a>
<a class="sourceLine" id="cb127-12" href="#cb127-12" data-line-number="12">    <span class="dt">pValue =</span> <span class="st">&quot;Pr(&gt;|z|)&quot;</span>,</a>
<a class="sourceLine" id="cb127-13" href="#cb127-13" data-line-number="13">    <span class="dt">stdErr =</span> <span class="st">&quot;Std. Error&quot;</span></a>
<a class="sourceLine" id="cb127-14" href="#cb127-14" data-line-number="14">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb127-15" href="#cb127-15" data-line-number="15"></a>
<a class="sourceLine" id="cb127-16" href="#cb127-16" data-line-number="16"><span class="st">  </span><span class="co"># reorder columns to have names first</span></a>
<a class="sourceLine" id="cb127-17" href="#cb127-17" data-line-number="17"><span class="st">  </span><span class="kw">select</span>(variableName, <span class="kw">everything</span>())</a></code></pre></div>
<p></p>
</div>
<div id="scoring" class="section level3">
<h3><span class="header-section-number">3.5.2</span> Scoring</h3>
<p>Scoring expresses the coefficients that were estimated during the logistic regression into points on a scale. The conversion is done using three parameters that are chosen somewhat arbitrarily.</p>
<ul>
<li><p>the number of points increase / decrease that would reflect halving / doubling the odds of defaulting;</p></li>
<li><p>an <em>anchoring</em> score reflecting a particular odd.</p></li>
</ul>
<p>For our purpose, we will choose (<span class="math inline">\(Score_{anchor}\)</span>) 5,000 points being equivalent to 1 in a 20 to default (<span class="math inline">\(Odds_{anchor}\)</span>), i.e. 5,000 points &lt;=&gt; <span class="math inline">\(Odds_{Anchor} = \frac{1 / 20}{1 - 1/20}\)</span>. We will also choose 100 to reflect <em>times 2</em> change in odds (<span class="math inline">\(DoubleOdds\)</span>). Those choices are completely arbitrary. Basically, the score is a linear representation of the odds. The score is defined by a point (the anchor) and the slope of the line going through that point.</p>
<p>Those values will reflect the total estimated score for a borrower (i.e. loan sample). The number of characteristics (information points gathered in a credit application), or number of bins, have to be irrelevant in calculating this score. In other words, if LendingClub were to gather 5 more information points, the score should, <strong>mutatis mutandis</strong>, be unchanged. (However, we would hope that the quality of the estimated score would improve.)</p>
<p>The score per variable needs to be adjusted using the number of information points, that is the number of characteristics. Here, the model has been trained on the number of bins. We first need to determine how many characteristics are used in the model.</p>
<p></p>
<div class="sourceCode" id="cb128"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" href="#cb128-1" data-line-number="1"><span class="co"># The list of characteristics is extracted from the list of bins names.</span></a>
<a class="sourceLine" id="cb128-2" href="#cb128-2" data-line-number="2">numberOfCharacteristics &lt;-</a>
<a class="sourceLine" id="cb128-3" href="#cb128-3" data-line-number="3"></a>
<a class="sourceLine" id="cb128-4" href="#cb128-4" data-line-number="4"><span class="st">  </span>modelNames <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb128-5" href="#cb128-5" data-line-number="5"></a>
<a class="sourceLine" id="cb128-6" href="#cb128-6" data-line-number="6"><span class="st">  </span><span class="co"># List of all names excluding the intercept which is not part of the scoring calculations (it</span></a>
<a class="sourceLine" id="cb128-7" href="#cb128-7" data-line-number="7"><span class="st">  </span><span class="co"># would mean giving points for free as a base line)</span></a>
<a class="sourceLine" id="cb128-8" href="#cb128-8" data-line-number="8"><span class="st">  </span><span class="kw">filter</span>(variableName <span class="op">!=</span><span class="st"> &quot;(Intercept)&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb128-9" href="#cb128-9" data-line-number="9"></a>
<a class="sourceLine" id="cb128-10" href="#cb128-10" data-line-number="10"><span class="st">  </span><span class="co"># Extract strings (&quot;[a-zA-Z0-9-_]*&quot;) preceded by an opening bracket (&quot;(?&lt;=\\()&quot;) and followed by a</span></a>
<a class="sourceLine" id="cb128-11" href="#cb128-11" data-line-number="11"><span class="st">  </span><span class="co"># closing bracket (&quot;(?=\\))&quot;). (The column names were formatted this way for that purpose.) See</span></a>
<a class="sourceLine" id="cb128-12" href="#cb128-12" data-line-number="12"><span class="st">  </span><span class="co"># &quot;https://github.com/rstudio/cheatsheets/blob/master/strings.pdf&quot; for details on the regex.</span></a>
<a class="sourceLine" id="cb128-13" href="#cb128-13" data-line-number="13"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">characteristic =</span> <span class="kw">str_match</span>(variableName, <span class="st">&quot;(?&lt;=</span><span class="ch">\\</span><span class="st">()[a-zA-Z0-9-_]*(?=</span><span class="ch">\\</span><span class="st">))&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb128-14" href="#cb128-14" data-line-number="14"></a>
<a class="sourceLine" id="cb128-15" href="#cb128-15" data-line-number="15"><span class="st">  </span><span class="co"># We are only interested in how many distinct characteristic there are.</span></a>
<a class="sourceLine" id="cb128-16" href="#cb128-16" data-line-number="16"><span class="st">  </span><span class="kw">distinct</span>(characteristic) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb128-17" href="#cb128-17" data-line-number="17"><span class="st">  </span><span class="kw">nrow</span>()</a>
<a class="sourceLine" id="cb128-18" href="#cb128-18" data-line-number="18"></a>
<a class="sourceLine" id="cb128-19" href="#cb128-19" data-line-number="19">numberOfCharacteristics</a></code></pre></div>
<div class="sourceCode" id="cb129"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb129-1" href="#cb129-1" data-line-number="1">## [1] 24</a></code></pre></div>
<p></p>
<p>We can now perform the scoring calculation.</p>
<p></p>
<div class="sourceCode" id="cb130"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" href="#cb130-1" data-line-number="1">ProbDefaultAtAnchor &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">/</span><span class="dv">20</span></a>
<a class="sourceLine" id="cb130-2" href="#cb130-2" data-line-number="2"></a>
<a class="sourceLine" id="cb130-3" href="#cb130-3" data-line-number="3"><span class="co"># The model is trained so that the &#39;Good&#39; outcome is that a loan does not default. The odds that</span></a>
<a class="sourceLine" id="cb130-4" href="#cb130-4" data-line-number="4"><span class="co"># therefore calculated on the probability of no default.</span></a>
<a class="sourceLine" id="cb130-5" href="#cb130-5" data-line-number="5">ProbAtAnchor &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">-</span><span class="st"> </span>ProbDefaultAtAnchor</a>
<a class="sourceLine" id="cb130-6" href="#cb130-6" data-line-number="6">OddsAnchor &lt;-<span class="st"> </span>ProbAtAnchor <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>ProbAtAnchor)</a>
<a class="sourceLine" id="cb130-7" href="#cb130-7" data-line-number="7">ScoreAnchor &lt;-<span class="st"> </span><span class="dv">2000</span></a>
<a class="sourceLine" id="cb130-8" href="#cb130-8" data-line-number="8"></a>
<a class="sourceLine" id="cb130-9" href="#cb130-9" data-line-number="9"><span class="co"># Doubling odds = 100 points</span></a>
<a class="sourceLine" id="cb130-10" href="#cb130-10" data-line-number="10">DoubleOdds &lt;-<span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb130-11" href="#cb130-11" data-line-number="11"></a>
<a class="sourceLine" id="cb130-12" href="#cb130-12" data-line-number="12">ScoreFactor &lt;-<span class="st"> </span>OddsAnchor <span class="op">/</span><span class="st"> </span><span class="kw">log</span>(<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb130-13" href="#cb130-13" data-line-number="13"></a>
<a class="sourceLine" id="cb130-14" href="#cb130-14" data-line-number="14"><span class="co"># 5,000 points is 20:1 odds of default</span></a>
<a class="sourceLine" id="cb130-15" href="#cb130-15" data-line-number="15">ScoreOffset &lt;-<span class="st"> </span>ScoreAnchor <span class="op">-</span><span class="st"> </span>ScoreFactor <span class="op">*</span><span class="st"> </span><span class="kw">log</span>(OddsAnchor)</a>
<a class="sourceLine" id="cb130-16" href="#cb130-16" data-line-number="16"></a>
<a class="sourceLine" id="cb130-17" href="#cb130-17" data-line-number="17"><span class="co"># Score at the intercept</span></a>
<a class="sourceLine" id="cb130-18" href="#cb130-18" data-line-number="18">Intercept &lt;-<span class="st"> </span><span class="kw">summary</span>(GLModel)<span class="op">$</span>coefficients[<span class="st">&quot;(Intercept)&quot;</span>, <span class="st">&quot;Estimate&quot;</span>]</a></code></pre></div>
<p></p>
<p>Then we apportion across characteristics.</p>
<p></p>
<div class="sourceCode" id="cb131"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb131-1" href="#cb131-1" data-line-number="1">ScorePerVariable &lt;-<span class="st"> </span>(ScoreFactor <span class="op">*</span><span class="st"> </span>Intercept <span class="op">+</span><span class="st"> </span>ScoreOffset) <span class="op">/</span><span class="st"> </span>numberOfCharacteristics </a>
<a class="sourceLine" id="cb131-2" href="#cb131-2" data-line-number="2">InterceptPerVariable &lt;-<span class="st"> </span>Intercept <span class="op">*</span><span class="st"> </span>ScoreFactor <span class="op">/</span><span class="st"> </span>numberOfCharacteristics</a>
<a class="sourceLine" id="cb131-3" href="#cb131-3" data-line-number="3"></a>
<a class="sourceLine" id="cb131-4" href="#cb131-4" data-line-number="4">GLMScores &lt;-</a>
<a class="sourceLine" id="cb131-5" href="#cb131-5" data-line-number="5"><span class="st">  </span>GLMCoefficients <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb131-6" href="#cb131-6" data-line-number="6"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb131-7" href="#cb131-7" data-line-number="7">    <span class="dt">weight =</span> Estimate <span class="op">*</span><span class="st"> </span>ScoreFactor,</a>
<a class="sourceLine" id="cb131-8" href="#cb131-8" data-line-number="8">    <span class="dt">weightScaled =</span> weight <span class="op">+</span><span class="st"> </span>ScorePerVariable,</a>
<a class="sourceLine" id="cb131-9" href="#cb131-9" data-line-number="9">    <span class="dt">points =</span> <span class="kw">round</span>(weightScaled)</a>
<a class="sourceLine" id="cb131-10" href="#cb131-10" data-line-number="10">  )</a></code></pre></div>
<p></p>
<blockquote>
<p>VERY IMPORTANT:</p>
</blockquote>
<p>The intercept points have been allocated across all characteristics. Therefore the regression coefficient estimated for the intercept becomes redundant and needs removing.</p>
<p></p>
<div class="sourceCode" id="cb132"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" href="#cb132-1" data-line-number="1">GLMScores[<span class="dv">1</span>, <span class="st">&quot;points&quot;</span>] &lt;-<span class="st">  </span><span class="dv">0</span></a></code></pre></div>
<p></p>
<p>Using the model is a simple matrix multiplication: <span class="math inline">\(\text{Loan matrix} \times \text{Scorecard weights}\)</span></p>
</div>
</div>
<div id="training-set" class="section level2">
<h2><span class="header-section-number">3.6</span> Training set</h2>
<p></p>
<div class="sourceCode" id="cb133"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb133-1" href="#cb133-1" data-line-number="1"><span class="co"># Reload the right datasets</span></a>
<a class="sourceLine" id="cb133-2" href="#cb133-2" data-line-number="2">allFactorsAsBins &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;datasets/allBins100.rds&quot;</span>)</a>
<a class="sourceLine" id="cb133-3" href="#cb133-3" data-line-number="3">loansTraining &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;datasets/LoansTraining.rds&quot;</span>)</a>
<a class="sourceLine" id="cb133-4" href="#cb133-4" data-line-number="4">loansTest &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;datasets/LoansTest.rds&quot;</span>)</a>
<a class="sourceLine" id="cb133-5" href="#cb133-5" data-line-number="5"><span class="kw">gc</span>(<span class="dt">full =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb134"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb134-1" href="#cb134-1" data-line-number="1">##             used   (Mb) gc trigger   (Mb)   max used    (Mb)</a>
<a class="sourceLine" id="cb134-2" href="#cb134-2" data-line-number="2">## Ncells   2845749  152.0    6816128  364.1    6816128   364.1</a>
<a class="sourceLine" id="cb134-3" href="#cb134-3" data-line-number="3">## Vcells 737738080 5628.5 1273967028 9719.6 1826494161 13935.1</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb135"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" href="#cb135-1" data-line-number="1"><span class="co"># Remove every variable that is not in the list of variables in the model then convert into a matrix</span></a>
<a class="sourceLine" id="cb135-2" href="#cb135-2" data-line-number="2">allMatrix &lt;-</a>
<a class="sourceLine" id="cb135-3" href="#cb135-3" data-line-number="3"><span class="st">  </span>allFactorsAsBins[, <span class="op">!</span><span class="kw">is.na</span>(<span class="kw">match</span>(</a>
<a class="sourceLine" id="cb135-4" href="#cb135-4" data-line-number="4">    <span class="kw">names</span>(allFactorsAsBins),</a>
<a class="sourceLine" id="cb135-5" href="#cb135-5" data-line-number="5">    <span class="kw">str_remove_all</span>(GLMCoefficients<span class="op">$</span>variableName, <span class="st">&quot;\`&quot;</span>)</a>
<a class="sourceLine" id="cb135-6" href="#cb135-6" data-line-number="6">  ))] <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb135-7" href="#cb135-7" data-line-number="7"><span class="st">  </span><span class="kw">as.matrix</span>()</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb136"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" href="#cb136-1" data-line-number="1"><span class="co"># Add a column of 1s for the intercept</span></a>
<a class="sourceLine" id="cb136-2" href="#cb136-2" data-line-number="2">allMatrix &lt;-</a>
<a class="sourceLine" id="cb136-3" href="#cb136-3" data-line-number="3"><span class="st">  </span><span class="kw">cbind</span>(<span class="kw">as.vector</span>(<span class="kw">rep.int</span>(</a>
<a class="sourceLine" id="cb136-4" href="#cb136-4" data-line-number="4">    <span class="dt">x =</span> <span class="dv">1</span>, <span class="dt">times =</span> <span class="kw">dim</span>(allMatrix)[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb136-5" href="#cb136-5" data-line-number="5">  )), allMatrix)</a>
<a class="sourceLine" id="cb136-6" href="#cb136-6" data-line-number="6"><span class="kw">dim</span>(allMatrix)</a></code></pre></div>
<div class="sourceCode" id="cb137"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb137-1" href="#cb137-1" data-line-number="1">## [1] 1045084     168</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb138"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" href="#cb138-1" data-line-number="1"><span class="co"># Done with this dataset</span></a>
<a class="sourceLine" id="cb138-2" href="#cb138-2" data-line-number="2"><span class="kw">rm</span>(allFactorsAsBins)</a>
<a class="sourceLine" id="cb138-3" href="#cb138-3" data-line-number="3"><span class="kw">gc</span>(<span class="dt">full =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb139"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb139-1" href="#cb139-1" data-line-number="1">##             used (Mb) gc trigger    (Mb)   max used    (Mb)</a>
<a class="sourceLine" id="cb139-2" href="#cb139-2" data-line-number="2">## Ncells   2845509  152    6816128   364.1    6816128   364.1</a>
<a class="sourceLine" id="cb139-3" href="#cb139-3" data-line-number="3">## Vcells 681825816 5202 1528840433 11664.2 1826494161 13935.1</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb140"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" href="#cb140-1" data-line-number="1">CoefficientsVector &lt;-<span class="st"> </span>GLMCoefficients<span class="op">$</span>Estimate <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.matrix</span>()</a>
<a class="sourceLine" id="cb140-2" href="#cb140-2" data-line-number="2"></a>
<a class="sourceLine" id="cb140-3" href="#cb140-3" data-line-number="3"><span class="co"># Score per variable</span></a>
<a class="sourceLine" id="cb140-4" href="#cb140-4" data-line-number="4">TrainingScorecard &lt;-<span class="st"> </span>allMatrix <span class="op">%*%</span><span class="st"> </span>( GLMScores<span class="op">$</span>points <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.matrix</span>() ) </a>
<a class="sourceLine" id="cb140-5" href="#cb140-5" data-line-number="5"><span class="kw">dim</span>(allMatrix)</a></code></pre></div>
<div class="sourceCode" id="cb141"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb141-1" href="#cb141-1" data-line-number="1">## [1] 1045084     168</a></code></pre></div>
<div class="sourceCode" id="cb142"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" href="#cb142-1" data-line-number="1"><span class="kw">dim</span>(GLMScores<span class="op">$</span>points)</a></code></pre></div>
<div class="sourceCode" id="cb143"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb143-1" href="#cb143-1" data-line-number="1">## NULL</a></code></pre></div>
<div class="sourceCode" id="cb144"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" href="#cb144-1" data-line-number="1"><span class="co"># CHECK: Any variable with NAs?</span></a>
<a class="sourceLine" id="cb144-2" href="#cb144-2" data-line-number="2"><span class="co"># GLMCoefficients$modelName[which(is.na(CoefficientsVector))]</span></a>
<a class="sourceLine" id="cb144-3" href="#cb144-3" data-line-number="3"><span class="co"># CoefficientsVector[is.na(CoefficientsVector)] &lt;- 0</span></a>
<a class="sourceLine" id="cb144-4" href="#cb144-4" data-line-number="4"><span class="co"># dim(CoefficientsVector)</span></a>
<a class="sourceLine" id="cb144-5" href="#cb144-5" data-line-number="5"></a>
<a class="sourceLine" id="cb144-6" href="#cb144-6" data-line-number="6">TrainingLogit &lt;-<span class="st"> </span>allMatrix <span class="op">%*%</span><span class="st"> </span>CoefficientsVector</a>
<a class="sourceLine" id="cb144-7" href="#cb144-7" data-line-number="7">TrainingLogit &lt;-</a>
<a class="sourceLine" id="cb144-8" href="#cb144-8" data-line-number="8"><span class="st">  </span><span class="kw">enframe</span>(TrainingLogit[, <span class="dv">1</span>]) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb144-9" href="#cb144-9" data-line-number="9"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">oddsGood =</span> <span class="kw">exp</span>(value),</a>
<a class="sourceLine" id="cb144-10" href="#cb144-10" data-line-number="10">         <span class="dt">p =</span> <span class="dv">1</span> <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>oddsGood)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb144-11" href="#cb144-11" data-line-number="11"><span class="st">  </span><span class="kw">cbind</span>(TrainingScorecard)</a></code></pre></div>
<p></p>
<div id="histogram-of-the-scores" class="section level3">
<h3><span class="header-section-number">3.6.1</span> Histogram of the scores</h3>
<p></p>
<div class="sourceCode" id="cb145"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb145-1" href="#cb145-1" data-line-number="1">loansTraining <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-2" href="#cb145-2" data-line-number="2"><span class="st">  </span><span class="kw">cbind</span>(TrainingLogit) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-3" href="#cb145-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">between</span>(value, <span class="dv">-2</span>, <span class="dv">5</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb145-4" href="#cb145-4" data-line-number="4"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(value, <span class="dt">col =</span> grade)) <span class="op">+</span></a>
<a class="sourceLine" id="cb145-5" href="#cb145-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_density</span>(<span class="dt">adjust =</span> <span class="dv">2</span>)</a></code></pre></div>
<p><img src="build/figure/graphics-05-03-training-hists-value-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p></p>
<p></p>
<div class="sourceCode" id="cb146"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" href="#cb146-1" data-line-number="1">loansTraining <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb146-2" href="#cb146-2" data-line-number="2"><span class="st">  </span><span class="kw">cbind</span>(TrainingLogit) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb146-3" href="#cb146-3" data-line-number="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(p, <span class="dt">col =</span> grade)) <span class="op">+</span></a>
<a class="sourceLine" id="cb146-4" href="#cb146-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_density</span>(<span class="dt">adjust =</span> <span class="dv">2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb146-5" href="#cb146-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_x_log10</span>()</a></code></pre></div>
<p><img src="build/figure/graphics-05-03-training-hists-p-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p></p>
<p></p>
<div class="sourceCode" id="cb147"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" href="#cb147-1" data-line-number="1">loansTraining <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb147-2" href="#cb147-2" data-line-number="2"><span class="st">  </span><span class="kw">cbind</span>(TrainingLogit) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb147-3" href="#cb147-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">between</span>(oddsGood, <span class="fl">0.1</span>, <span class="dv">100</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb147-4" href="#cb147-4" data-line-number="4"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(oddsGood, <span class="dt">col =</span> grade)) <span class="op">+</span></a>
<a class="sourceLine" id="cb147-5" href="#cb147-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_density</span>(<span class="dt">adjust =</span> <span class="dv">2</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb147-6" href="#cb147-6" data-line-number="6"><span class="st">  </span><span class="kw">scale_x_log10</span>()</a></code></pre></div>
<p><img src="build/figure/graphics-05-03-training-hists-odds-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p></p>
<p>The following histogram shows the density plot of the scorecards. Note the log-scale for the score, and the square-root scale for the density. It mirrors the multimodal density distributions of previous visualisations.</p>
<p></p>
<div class="sourceCode" id="cb148"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb148-1" href="#cb148-1" data-line-number="1">loansTraining <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb148-2" href="#cb148-2" data-line-number="2"><span class="st">  </span><span class="kw">cbind</span>(TrainingLogit) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb148-3" href="#cb148-3" data-line-number="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(TrainingScorecard, <span class="dt">col =</span> grade)) <span class="op">+</span></a>
<a class="sourceLine" id="cb148-4" href="#cb148-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_density</span>(<span class="dt">adjust =</span> <span class="dv">2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb148-5" href="#cb148-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_x_log10</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb148-6" href="#cb148-6" data-line-number="6"><span class="st">  </span><span class="kw">scale_y_sqrt</span>()</a></code></pre></div>
<p><img src="build/figure/graphics-05-03-training-scores-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p></p>
</div>
</div>
<div id="test-set" class="section level2">
<h2><span class="header-section-number">3.7</span> Test set</h2>
<p></p>
<div class="sourceCode" id="cb149"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" href="#cb149-1" data-line-number="1"><span class="co"># Prepare the full test set</span></a>
<a class="sourceLine" id="cb149-2" href="#cb149-2" data-line-number="2">bestBins &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;datasets/bestBins100.rds&quot;</span>)</a>
<a class="sourceLine" id="cb149-3" href="#cb149-3" data-line-number="3"></a>
<a class="sourceLine" id="cb149-4" href="#cb149-4" data-line-number="4">predictionCategories &lt;-<span class="st"> </span>loansTest[, <span class="st">&quot;loanID&quot;</span>]</a>
<a class="sourceLine" id="cb149-5" href="#cb149-5" data-line-number="5"></a>
<a class="sourceLine" id="cb149-6" href="#cb149-6" data-line-number="6"><span class="cf">for</span> (index <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(bestBins<span class="op">$</span>variable)) {</a>
<a class="sourceLine" id="cb149-7" href="#cb149-7" data-line-number="7">  binned &lt;-</a>
<a class="sourceLine" id="cb149-8" href="#cb149-8" data-line-number="8"><span class="st">    </span>binner<span class="op">::</span><span class="kw">categoriseFromWoE.Wide</span>(</a>
<a class="sourceLine" id="cb149-9" href="#cb149-9" data-line-number="9">      <span class="dt">df =</span> loansTest,</a>
<a class="sourceLine" id="cb149-10" href="#cb149-10" data-line-number="10">      <span class="dt">varName =</span> bestBins<span class="op">$</span>variable[index],</a>
<a class="sourceLine" id="cb149-11" href="#cb149-11" data-line-number="11">      <span class="dt">woeTable =</span> bestBins<span class="op">$</span>WoE[[index]]</a>
<a class="sourceLine" id="cb149-12" href="#cb149-12" data-line-number="12">    )</a>
<a class="sourceLine" id="cb149-13" href="#cb149-13" data-line-number="13"></a>
<a class="sourceLine" id="cb149-14" href="#cb149-14" data-line-number="14">  predictionCategories &lt;-<span class="st"> </span><span class="kw">cbind</span>(predictionCategories, binned)</a>
<a class="sourceLine" id="cb149-15" href="#cb149-15" data-line-number="15">}</a>
<a class="sourceLine" id="cb149-16" href="#cb149-16" data-line-number="16"></a>
<a class="sourceLine" id="cb149-17" href="#cb149-17" data-line-number="17"><span class="kw">dim</span>(predictionCategories)</a></code></pre></div>
<div class="sourceCode" id="cb150"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb150-1" href="#cb150-1" data-line-number="1">## [1] 261272    222</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb151"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb151-1" href="#cb151-1" data-line-number="1"><span class="co"># Retain only the relevant scorecard categories</span></a>
<a class="sourceLine" id="cb151-2" href="#cb151-2" data-line-number="2">predictionMatrix &lt;-</a>
<a class="sourceLine" id="cb151-3" href="#cb151-3" data-line-number="3"><span class="st">  </span>predictionCategories[, <span class="op">!</span><span class="kw">is.na</span>(<span class="kw">match</span>(</a>
<a class="sourceLine" id="cb151-4" href="#cb151-4" data-line-number="4">    <span class="kw">names</span>(predictionCategories),</a>
<a class="sourceLine" id="cb151-5" href="#cb151-5" data-line-number="5">    <span class="kw">str_remove_all</span>(GLMCoefficients<span class="op">$</span>variableName, <span class="st">&quot;\`&quot;</span>)</a>
<a class="sourceLine" id="cb151-6" href="#cb151-6" data-line-number="6">  ))] <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb151-7" href="#cb151-7" data-line-number="7"><span class="st">  </span><span class="kw">as.matrix</span>()</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb152"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb152-1" href="#cb152-1" data-line-number="1">predictionMatrix &lt;-<span class="st"> </span><span class="kw">cbind</span>(<span class="kw">as.vector</span>(<span class="kw">rep.int</span>(<span class="dt">x =</span> <span class="dv">1</span>, <span class="dt">times =</span> <span class="kw">dim</span>(predictionMatrix)[<span class="dv">1</span>])), predictionMatrix)</a>
<a class="sourceLine" id="cb152-2" href="#cb152-2" data-line-number="2"><span class="kw">dim</span>(predictionMatrix)</a></code></pre></div>
<div class="sourceCode" id="cb153"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb153-1" href="#cb153-1" data-line-number="1">## [1] 261272    168</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb154"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb154-1" href="#cb154-1" data-line-number="1">TestLogit &lt;-<span class="st"> </span>predictionMatrix <span class="op">%*%</span><span class="st"> </span>CoefficientsVector</a>
<a class="sourceLine" id="cb154-2" href="#cb154-2" data-line-number="2">TestLogit &lt;-</a>
<a class="sourceLine" id="cb154-3" href="#cb154-3" data-line-number="3"><span class="st">  </span>tibble<span class="op">::</span><span class="kw">enframe</span>(TestLogit[, <span class="dv">1</span>]) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb154-4" href="#cb154-4" data-line-number="4"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb154-5" href="#cb154-5" data-line-number="5">    <span class="dt">p =</span> <span class="dv">1</span> <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="kw">exp</span>(<span class="op">-</span>value)),</a>
<a class="sourceLine" id="cb154-6" href="#cb154-6" data-line-number="6">    <span class="dt">oddsGood =</span> <span class="kw">if_else</span>(<span class="kw">is.infinite</span>(p <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>p)), <span class="fl">1e10</span>, p <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>p)))</a>
<a class="sourceLine" id="cb154-7" href="#cb154-7" data-line-number="7"></a>
<a class="sourceLine" id="cb154-8" href="#cb154-8" data-line-number="8">predictionScorecard &lt;-<span class="st"> </span>predictionMatrix <span class="op">%*%</span><span class="st"> </span>( GLMScores<span class="op">$</span>points <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.matrix</span>() ) </a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb155"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb155-1" href="#cb155-1" data-line-number="1">loansTest <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb155-2" href="#cb155-2" data-line-number="2"><span class="st">  </span><span class="kw">cbind</span>(TestLogit) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb155-3" href="#cb155-3" data-line-number="3"><span class="st">  </span><span class="kw">cbind</span>(predictionScorecard) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb155-4" href="#cb155-4" data-line-number="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">scoreBand =</span> <span class="kw">floor</span>(predictionScorecard <span class="op">/</span><span class="st"> </span><span class="dv">50</span>) <span class="op">*</span><span class="st"> </span><span class="dv">50</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb155-5" href="#cb155-5" data-line-number="5"><span class="st">  </span><span class="kw">filter</span>(predictionScorecard <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb155-6" href="#cb155-6" data-line-number="6"><span class="st">  </span><span class="kw">group_by</span>(scoreBand) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb155-7" href="#cb155-7" data-line-number="7"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Count =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb155-8" href="#cb155-8" data-line-number="8"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(scoreBand, Count)) <span class="op">+</span></a>
<a class="sourceLine" id="cb155-9" href="#cb155-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_col</span>(<span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>)</a></code></pre></div>
<p><img src="build/figure/graphics-05-03-test-estimates-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p></p>
<p></p>
<div class="sourceCode" id="cb156"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb156-1" href="#cb156-1" data-line-number="1"><span class="kw">median</span>(predictionScorecard)</a></code></pre></div>
<div class="sourceCode" id="cb157"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb157-1" href="#cb157-1" data-line-number="1">## [1] 1636</a></code></pre></div>
<p></p>
<p>Same downward dynamics as training set</p>
<p></p>
<div class="sourceCode" id="cb158"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb158-1" href="#cb158-1" data-line-number="1">loansTest <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb158-2" href="#cb158-2" data-line-number="2"><span class="st">  </span><span class="kw">cbind</span>(TestLogit) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb158-3" href="#cb158-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">between</span>(value, <span class="dv">-2</span>, <span class="dv">5</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb158-4" href="#cb158-4" data-line-number="4"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(value, <span class="dt">col =</span> grade)) <span class="op">+</span></a>
<a class="sourceLine" id="cb158-5" href="#cb158-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_density</span>(<span class="dt">adjust =</span> <span class="dv">2</span>)</a></code></pre></div>
<p><img src="build/figure/graphics-05-03-test-viz-value-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p></p>
<p></p>
<div class="sourceCode" id="cb159"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb159-1" href="#cb159-1" data-line-number="1">loansTest <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb159-2" href="#cb159-2" data-line-number="2"><span class="st">  </span><span class="kw">cbind</span>(TestLogit) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb159-3" href="#cb159-3" data-line-number="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(p, <span class="dt">col =</span> grade)) <span class="op">+</span></a>
<a class="sourceLine" id="cb159-4" href="#cb159-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_density</span>(<span class="dt">adjust =</span> <span class="dv">2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb159-5" href="#cb159-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_x_log10</span>()</a></code></pre></div>
<p><img src="build/figure/graphics-05-03-test-viz-p-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p></p>
<p></p>
<div class="sourceCode" id="cb160"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb160-1" href="#cb160-1" data-line-number="1">loansTest <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb160-2" href="#cb160-2" data-line-number="2"><span class="st">  </span><span class="kw">cbind</span>(TestLogit) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb160-3" href="#cb160-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">between</span>(oddsGood, <span class="fl">0.1</span>, <span class="dv">100</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb160-4" href="#cb160-4" data-line-number="4"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(oddsGood, <span class="dt">col =</span> grade)) <span class="op">+</span></a>
<a class="sourceLine" id="cb160-5" href="#cb160-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_density</span>(<span class="dt">adjust =</span> <span class="dv">2</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb160-6" href="#cb160-6" data-line-number="6"><span class="st">  </span><span class="kw">scale_x_log10</span>()</a></code></pre></div>
<p><img src="build/figure/graphics-05-03-test-viz-odds-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p></p>
</div>
<div id="correlation-matrix" class="section level2">
<h2><span class="header-section-number">3.8</span> Correlation matrix</h2>
<p>[TODO]</p>
</div>
<div id="roc-curve" class="section level2">
<h2><span class="header-section-number">3.9</span> ROC Curve</h2>
<p></p>
<div class="sourceCode" id="cb161"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb161-1" href="#cb161-1" data-line-number="1">ROCRPrediction &lt;-<span class="st"> </span>ROCR<span class="op">::</span><span class="kw">prediction</span>(TestLogit<span class="op">$</span>value, loansTest<span class="op">$</span>isGoodLoan)</a>
<a class="sourceLine" id="cb161-2" href="#cb161-2" data-line-number="2">ROCRPerformance &lt;-<span class="st"> </span>ROCR<span class="op">::</span><span class="kw">performance</span>(ROCRPrediction, <span class="st">&quot;tpr&quot;</span>, <span class="st">&quot;fpr&quot;</span>)</a>
<a class="sourceLine" id="cb161-3" href="#cb161-3" data-line-number="3"></a>
<a class="sourceLine" id="cb161-4" href="#cb161-4" data-line-number="4">ROCRPlot &lt;-</a>
<a class="sourceLine" id="cb161-5" href="#cb161-5" data-line-number="5"><span class="st">  </span><span class="kw">tibble</span>(<span class="dt">x =</span> ROCRPerformance<span class="op">@</span>x.values[[<span class="dv">1</span>]], <span class="dt">y =</span> ROCRPerformance<span class="op">@</span>y.values[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb161-6" href="#cb161-6" data-line-number="6"></a>
<a class="sourceLine" id="cb161-7" href="#cb161-7" data-line-number="7"></a>
<a class="sourceLine" id="cb161-8" href="#cb161-8" data-line-number="8">ROCRPlot <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(x, y)) <span class="op">+</span></a>
<a class="sourceLine" id="cb161-9" href="#cb161-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="build/figure/graphics-05-03-test-ROC-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p></p>
<p></p>
<div class="sourceCode" id="cb162"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb162-1" href="#cb162-1" data-line-number="1">stats<span class="op">::</span><span class="kw">ks.test</span>(<span class="dt">x =</span> ROCRPlot<span class="op">$</span>x, <span class="dt">y =</span> ROCRPlot<span class="op">$</span>y)</a></code></pre></div>
<div class="sourceCode" id="cb163"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb163-1" href="#cb163-1" data-line-number="1">## </a>
<a class="sourceLine" id="cb163-2" href="#cb163-2" data-line-number="2">##  Two-sample Kolmogorov-Smirnov test</a>
<a class="sourceLine" id="cb163-3" href="#cb163-3" data-line-number="3">## </a>
<a class="sourceLine" id="cb163-4" href="#cb163-4" data-line-number="4">## data:  ROCRPlot$x and ROCRPlot$y</a>
<a class="sourceLine" id="cb163-5" href="#cb163-5" data-line-number="5">## D = 0.25527, p-value &lt; 2.2e-16</a>
<a class="sourceLine" id="cb163-6" href="#cb163-6" data-line-number="6">## alternative hypothesis: two-sided</a></code></pre></div>
<p></p>
<p></p>
<div class="sourceCode" id="cb164"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb164-1" href="#cb164-1" data-line-number="1"><span class="kw">str</span>(ROCRPerformance)</a></code></pre></div>
<div class="sourceCode" id="cb165"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb165-1" href="#cb165-1" data-line-number="1">## Formal class &#39;performance&#39; [package &quot;ROCR&quot;] with 6 slots</a>
<a class="sourceLine" id="cb165-2" href="#cb165-2" data-line-number="2">##   ..@ x.name      : chr &quot;False positive rate&quot;</a>
<a class="sourceLine" id="cb165-3" href="#cb165-3" data-line-number="3">##   ..@ y.name      : chr &quot;True positive rate&quot;</a>
<a class="sourceLine" id="cb165-4" href="#cb165-4" data-line-number="4">##   ..@ alpha.name  : chr &quot;Cutoff&quot;</a>
<a class="sourceLine" id="cb165-5" href="#cb165-5" data-line-number="5">##   ..@ x.values    :List of 1</a>
<a class="sourceLine" id="cb165-6" href="#cb165-6" data-line-number="6">##   .. ..$ : num [1:255287] 0 0 0 0 0 0 0 0 0 0 ...</a>
<a class="sourceLine" id="cb165-7" href="#cb165-7" data-line-number="7">##   ..@ y.values    :List of 1</a>
<a class="sourceLine" id="cb165-8" href="#cb165-8" data-line-number="8">##   .. ..$ : num [1:255287] 0.00 4.79e-06 9.58e-06 1.44e-05 1.92e-05 ...</a>
<a class="sourceLine" id="cb165-9" href="#cb165-9" data-line-number="9">##   ..@ alpha.values:List of 1</a>
<a class="sourceLine" id="cb165-10" href="#cb165-10" data-line-number="10">##   .. ..$ : num [1:255287] Inf 4.91 4.8 4.54 4.45 ...</a></code></pre></div>
<p></p>
</div>
<div id="bin-test-set-by-prediction" class="section level2">
<h2><span class="header-section-number">3.10</span> Bin test set by prediction</h2>
<p></p>
<div class="sourceCode" id="cb166"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" href="#cb166-1" data-line-number="1">probEstimates &lt;-<span class="st"> </span><span class="kw">if_else</span>(TestLogit<span class="op">$</span>value <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>, <span class="dv">0</span>, TestLogit<span class="op">$</span>value)</a>
<a class="sourceLine" id="cb166-2" href="#cb166-2" data-line-number="2"></a>
<a class="sourceLine" id="cb166-3" href="#cb166-3" data-line-number="3"><span class="kw">summary</span>(probEstimates <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>probEstimates))</a></code></pre></div>
<div class="sourceCode" id="cb167"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb167-1" href="#cb167-1" data-line-number="1">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </a>
<a class="sourceLine" id="cb167-2" href="#cb167-2" data-line-number="2">##  0.0000  0.5115  0.6030  0.5677  0.6655  0.8307</a></code></pre></div>
<p></p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="15">
<li id="fn15"><p> <a href="https://cran.r-project.org/web/packages/Information/vignettes/Information-vignette.html"></a><a href="logistic-regression-model-and-credit-scorecard.html#fnref15" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="dataset.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conclusion.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Emmanuel-R8/HarvardX-LendingClub/edit/master/05-1-Model-Preparation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["HarvardX - Credit Scoring of the LendingClub Dataset.pdf", "HarvardX - Credit Scoring of the LendingClub Dataset.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
